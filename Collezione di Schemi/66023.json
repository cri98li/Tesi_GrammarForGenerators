{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"This schema formalizes the package metadata used by UpdateHub services","additionalProperties":false,"title":"UpdateHub package metadata schema","type":"object","properties":{"___product":{"description":"The id of the product that will be updated. It must be a hexadecimal number of 64 digits","$fref":"definitions.json#\/sha256sum"},"___version":{"minLength":1,"description":"Version of the software installed on device AFTER updating","type":"string"},"___supported-hardware":{"oneOf":[{"minItems":1,"uniqueItems":true,"type":"array","items":{"type":"string"}},{"type":"string","enum":["any"]}],"description":"A list of hardware identifiers compatible with this package. You can provide a string 'any' to specify that any hardware is compatible."},"___objects":{"minItems":1,"maxItems":2,"type":"array","items":{"minItems":1,"type":"array","items":{"oneOf":[{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Object specifications for COPY mode","additionalProperties":false,"title":"Copy object","type":"object","properties":{"___compressed":{"$ref":"definitions.json#\/compressed"},"___filesystem":{"$ref":"definitions.json#\/filesystem"},"___install-if-different":{"$ref":"install-if-different.json"},"___target-uid":{"oneOf":[{"type":"string"},{"type":"integer"}],"description":"The UNIX user ID to be set in target when installed"},"___target-type":{"description":"The type of target (only device)","type":"string","enum":["device"]},"___sha256sum":{"$ref":"definitions.json#\/sha256sum"},"___required-uncompressed-size":{"$ref":"definitions.json#\/required-uncompressed-size"},"___target":{"$ref":"definitions.json#\/target"},"___format-options":{"$ref":"definitions.json#\/format-options"},"___mount-options":{"$ref":"definitions.json#\/mount-options"},"___target-mode":{"pattern":"^[0-9]{4}$","description":"The mode which the target will have after installed","type":"string"},"___target-path":{"$ref":"definitions.json#\/target-path"},"___mode":{"$ref":"definitions.json#\/mode"},"___size":{"$ref":"definitions.json#\/size"},"___target-gid":{"oneOf":[{"type":"string"},{"type":"integer"}],"description":"The UNIX group ID to be set in target when installed"},"___format?":{"$ref":"definitions.json#\/format?"},"___filename":{"$ref":"definitions.json#\/filename"}},"required":["filename","filesystem","mode","sha256sum","size","target-type","target","target-path"],"dependencies":{"mode":{"properties":{"___mode":{"enum":["copy"]}}},"format-options":{"properties":{"___format?":{"enum":[true]}},"required":["format?"]},"target-gid":["target-uid"],"target-uid":["target-gid"]}}},{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Object specifications for Flash mode","additionalProperties":false,"title":"Flash object","type":"object","properties":{"___sha256sum":{"$ref":"definitions.json#\/sha256sum"},"___target":{"$ref":"definitions.json#\/target"},"___install-if-different":{"$ref":"install-if-different.json"},"___mode":{"$ref":"definitions.json#\/mode"},"___size":{"$ref":"definitions.json#\/size"},"___filename":{"$ref":"definitions.json#\/filename"},"___target-type":{"description":"The type of target (device or mtdname)","type":"string","enum":["device","mtdname"]}},"required":["filename","mode","size","sha256sum","target-type","target"],"dependencies":{"mode":{"properties":{"___mode":{"enum":["flash"]}}}}}},{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Object specifications for imxkobs mode","additionalProperties":false,"title":"imxkobs object","type":"object","properties":{"___sha256sum":{"$ref":"definitions.json#\/sha256sum"},"___install-if-different":{"$ref":"install-if-different.json"},"___chip_0_device_path":{"$ref":"definitions.json#\/chip_0_device_path"},"___1k_padding":{"$ref":"definitions.json#\/1k_padding"},"___mode":{"$ref":"definitions.json#\/mode"},"___search_exponent":{"$ref":"definitions.json#\/search_exponent"},"___size":{"$ref":"definitions.json#\/size"},"___chip_1_device_path":{"$ref":"definitions.json#\/chip_1_device_path"},"___filename":{"$ref":"definitions.json#\/filename"}},"required":["filename","mode","size","sha256sum"],"dependencies":{"mode":{"properties":{"___mode":{"enum":["imxkobs"]}}}}}},{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Object specifications for RAW mode","additionalProperties":false,"title":"Raw object","type":"object","properties":{"___skip":{"$ref":"definitions.json#\/skip"},"___compressed":{"$ref":"definitions.json#\/compressed"},"___install-if-different":{"$ref":"install-if-different.json"},"___seek":{"$ref":"definitions.json#\/seek"},"___target-type":{"description":"The type of target (only device)","type":"string","enum":["device"]},"___sha256sum":{"$ref":"definitions.json#\/sha256sum"},"___required-uncompressed-size":{"$ref":"definitions.json#\/required-uncompressed-size"},"___count":{"$ref":"definitions.json#\/count"},"___truncate":{"$ref":"definitions.json#\/truncate"},"___target":{"$ref":"definitions.json#\/target"},"___mode":{"$ref":"definitions.json#\/mode"},"___chunk-size":{"$ref":"definitions.json#\/chunk-size"},"___size":{"$ref":"definitions.json#\/size"},"___filename":{"$ref":"definitions.json#\/filename"}},"required":["filename","mode","sha256sum","size","target","target-type"],"dependencies":{"mode":{"properties":{"___mode":{"enum":["raw"]}}}}}},{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Object specifications for COPY mode","additionalProperties":false,"title":"Copy object","type":"object","properties":{"___compressed":{"$ref":"definitions.json#\/compressed"},"___filesystem":{"$ref":"definitions.json#\/filesystem"},"___target-type":{"description":"The type of target (device, mtdname or ubivolume)","type":"string","enum":["device","mtdname","ubivolume"]},"___sha256sum":{"$ref":"definitions.json#\/sha256sum"},"___required-uncompressed-size":{"$ref":"definitions.json#\/required-uncompressed-size"},"___target":{"$ref":"definitions.json#\/target"},"___format-options":{"$ref":"definitions.json#\/format-options"},"___mount-options":{"$ref":"definitions.json#\/mount-options"},"___target-path":{"$ref":"definitions.json#\/target-path"},"___mode":{"$ref":"definitions.json#\/mode"},"___size":{"$ref":"definitions.json#\/size"},"___format?":{"$ref":"definitions.json#\/format?"},"___filename":{"$ref":"definitions.json#\/filename"}},"required":["filename","filesystem","mode","sha256sum","size","target","target-path","target-type"],"dependencies":{"mode":{"properties":{"___mode":{"enum":["tarball"]}}},"format-options":{"properties":{"___format?":{"enum":[true]}},"required":["format?"]}}}},{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Object specifications for UBI mode","additionalProperties":false,"title":"UBI object","type":"object","properties":{"___sha256sum":{"$ref":"definitions.json#\/sha256sum"},"___required-uncompressed-size":{"$ref":"definitions.json#\/required-uncompressed-size"},"___target":{"$ref":"definitions.json#\/target"},"___compressed":{"$ref":"definitions.json#\/compressed"},"___mode":{"$ref":"definitions.json#\/mode"},"___size":{"$ref":"definitions.json#\/size"},"___filename":{"$ref":"definitions.json#\/filename"},"___target-type":{"description":"The type of target (only ubivolume)","type":"string","enum":["ubivolume"]}},"required":["filename","mode","size","sha256sum","target","target-type"],"dependencies":{"mode":{"properties":{"___mode":{"enum":["ubifs"]}}},"required-uncompressed-size":{"_00properties":{"compressed":{"enum":[true]}}}}}}]}}}},"required":["objects","product","supported-hardware","version"]}