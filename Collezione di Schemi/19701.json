{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"cluster.json","description":"A set of one or more nodePools, along with any shared configuration between them.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/cluster.json","additionalProperties":false,"title":"A single cluster configuration","type":"object","properties":{"___name":{"minLength":1,"pattern":"^[A-Za-z0-9-]+$","description":"Name of this cluster.","type":"string","maxLength":21},"___kubeAuth":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"kubeAuthConfig.json","description":"Kubernetes Authentication Entry","id":"http:\/\/judkins.house\/apis\/k2\/v1\/kubeAuthConfig.json","additionalProperties":false,"title":"Kubernetes Authentication Entry","type":"object","properties":{"___authz":{"$ref":"kubeAuthAuthzEntry.json"},"___authn":{"$ref":"kubeAuthAuthnEntry.json"}},"required":["authn"]},"description":"AAA (Authentication, Authorization and Accounting) settings for the cluster."},"___dnsConfig":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"dnsConfig.json","description":"Describes the configuration of a DNS service for the cluster.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/dnsConfig.json","additionalProperties":false,"title":"Cluster DNS configuration","type":"object","properties":{"___name":{"description":"Name of cluster DNS configuration.","type":"string"},"___kubedns":{"$ref":"kubeDns.json"},"___kind":{"description":"Type of cluster DNS configuration.","type":"string","enum":["dns"]}},"required":["name","kubedns"]},"description":"DNS Configuration for the cluster."},"___helmConfig":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"helmConfig.json","description":"Configuration for helm for use in K2.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/helmConfig.json","additionalProperties":false,"title":"Helm Configuration","type":"object","properties":{"___name":{"description":"Name of the helm configuration.","type":"string"},"___repos":{"description":"List of helm repositories we want installed.","type":"array","items":{"$ref":"helmRepo.json"}},"___registries":{"description":"List of helm app registries we want installed.","type":"array","items":{"$ref":"helmRegistry.json"}},"___kind":{"description":"Kind of kubernetes package manager.","type":"string"},"___charts":{"description":"List of helm charts we want installed.","type":"array","items":{"$ref":"helmChart.json"}}},"required":["name","repos","charts"]},"description":"Helm config for installing kubernetes resources."},"___helmOverride":{"description":"Set to true when using your own helm version.","type":["boolean","string","null"]},"___providerConfig":{"$eref":{"oneOf":[{"$ref":"awsProviderConfig.json"},{"$ref":"gkeProviderConfig.json"}],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"providerConfig.json","description":"Describes the provider specific (e.g. AWS, GKE, etc.) configuration.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/providerConfig.json","title":"Provider Configuration"},"description":"Provider (e.g. AWS, GKE, etc.) configuration."},"___network":{"format":"cidr","description":"Internal IP address range (CIDR) for services.","type":"string"},"___dns":{"format":"ipv4","description":"Internal IP address of the DNS service.","type":"string"},"___domain":{"format":"hostname","description":"Domain name for cluster (internal resolution).","type":"string"},"___customApiDns":{"description":"Custom domain name for API server ELB.","type":"string"},"___fabricConfig":{"$eref":{"oneOf":[{"$ref":"canalFabricConfig.json"},{"$ref":"weaveFabricConfig.json"},{"$ref":"kubeVersionedFabric.json"}],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"fabricConfig.json","description":"Describes the configuration of a network fabric for use with kubernetes.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/fabricConfig.json","title":"Fabric Configuration"},"description":"Fabric config for the kubernetes overlay network."},"___nodePools":{"minItems":1,"description":"A list of nodePools.","type":"array","items":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"nodePool.json","description":"Describes a set of one or more nodes which share the same configuration.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/nodePool.json","additionalProperties":false,"title":"nodePool Configuration","type":"object","properties":{"___keyPair":{"$ref":"keyPair.json"},"___schedulingConfig":{"$ref":"schedulingConfig.json"},"___containerConfig":{"$ref":"containerConfig.json"},"___apiServerConfig":{"$ref":"apiServerConfig.json"},"___taints":{"description":"List of AWS taints to associate with the kubernetes node","type":"array","items":{"$ref":"kubeNodeTaint.json"}},"___autoScalingConfig":{"$ref":"autoScalingConfig.json"},"___name":{"description":"Name of the nodePool.","type":"string"},"___count":{"description":"Number of nodes in the nodePool.","type":"number","minimum":1},"___etcdConfigs":{"minItems":1,"type":"array","items":{"$ref":"kvStoreConfig.json"}},"___bastionConfig":{"$ref":"bastionConfig.json"},"___nodeConfig":{"$ref":"nodeConfig.json"},"___etcdConfig":{"$ref":"kvStoreConfig.json"},"___osConfig":{"$ref":"osConfig.json"},"___kubeConfig":{"$ref":"kubeConfig.json"}},"required":["name","count","nodeConfig"]}}}},"required":["name","network","dns","domain","providerConfig","nodePools","fabricConfig","kubeAuth","helmConfig","dnsConfig"]}