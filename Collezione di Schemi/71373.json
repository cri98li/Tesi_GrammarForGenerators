{"$schema":"http:\/\/json-schema.org\/draft-07\/schema#","description":"Schema for all the data the Habitat supervisor makes available at the \/butterfly HTTP API endpoint","type":"object","definitions":{"_88sys_basic":{"description":"System information","type":"object","properties":{"___http_gateway_port":{"default":9631,"description":"The port for the HTTP gateway to listen on","type":"integer"},"___ip":{"description":"The member's IP address","type":"string"},"___gossip_port":{"default":9638,"description":"The port to listen on for gossip traffic","type":"integer"},"___gossip_ip":{"default":"0.0.0.0","description":"The IP address to listen on for gossip traffic","type":"string"},"___http_gateway_ip":{"default":"0.0.0.0","description":"The IP address for the HTTP gateway to listen on","type":"string"},"___ctl_gateway_ip":{"description":"The control gateway IP address","type":"string"},"___hostname":{"description":"The hostname of the member","type":"string"},"___ctl_gateway_port":{"default":9632,"description":"The control gateway port","type":"integer"}},"required":["ctl_gateway_ip","ctl_gateway_port","gossip_ip","gossip_port","hostname","http_gateway_ip","http_gateway_port","ip"]}},"properties":{"___election_update":{"description":"A list of election update rumors","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'latest_election_update' key.","type":"object","properties":{"___list":{"description":"The election list","additionalProperties":{"description":"The name of a service group","type":"object","properties":{"___election":{"description":"The election","type":"object","properties":{"___status":{"description":"The status of the election","type":"string"},"___votes":{"type":"array","items":{"type":"string"}},"___term":{"description":"The election term","type":"integer"},"___from_id":{"description":"The member ID being voted for","type":"string"},"___suitability":{"description":"How suitable this member is for election","type":"integer"},"___member_id":{"description":"The member ID being voted for","type":"string"},"___service_group":{"description":"The service group this election is running in","type":"string"}}}}},"type":"object"},"___update_counter":{"description":"A count of how many times the election rumors have been updated","$deprecated":"Since 0.66.0","type":"integer"}},"required":["list"]},"___departed_members":{"description":"A list of member IDs that are departed","type":"array","items":{"type":"string"}},"___latest_service_config":{"description":"The latest service config for each service group","additionalProperties":{"description":"A description of each service config, named by service group","type":"object","properties":{"___service_config":{"description":"A description of the various service parameters","type":"object","properties":{"___incarnation":{"description":"The incarnation number associated with this config","type":"integer"},"___config":{"description":"The bytes of the config value","type":"array"},"___from_id":{"description":"Where did this config come from","type":"string"},"___encrypted":{"description":"Is the config encrypted","type":"boolean"},"___service_group":{"description":"The service group","type":"string"}},"required":["config","encrypted","from_id","incarnation","service_group"]}}},"type":"object"},"___services":{"additionalProperties":{"description":"A representation of the service, named for the service group","additionalProperties":{"description":"A representation of the service, named for the member ID","type":"object","properties":{"___incarnation":{"description":"The incarnation number of a member","type":"integer"},"___initialized":{"description":"Whether the service has been initialized","type":"boolean"},"___cfg":{"description":"Service configuration","additionalProperties":{"type":["boolean","string","integer","array","object"]},"type":"object"},"___sys":{"$eref":{"description":"System information","type":"object","properties":{"___http_gateway_port":{"default":9631,"description":"The port for the HTTP gateway to listen on","type":"integer"},"___ip":{"description":"The member's IP address","type":"string"},"___gossip_port":{"default":9638,"description":"The port to listen on for gossip traffic","type":"integer"},"___gossip_ip":{"default":"0.0.0.0","description":"The IP address to listen on for gossip traffic","type":"string"},"___http_gateway_ip":{"default":"0.0.0.0","description":"The IP address for the HTTP gateway to listen on","type":"string"},"___ctl_gateway_ip":{"description":"The control gateway IP address","type":"string"},"___hostname":{"description":"The hostname of the member","type":"string"},"___ctl_gateway_port":{"default":9632,"description":"The control gateway port","type":"integer"}},"required":["ctl_gateway_ip","ctl_gateway_port","gossip_ip","gossip_port","hostname","http_gateway_ip","http_gateway_port","ip"]}},"___package":{"description":"The package identifier","type":"string"},"___member_id":{"description":"The member ID","type":"string"},"___service_group":{"description":"The service group","type":"string"}},"required":["cfg","incarnation","initialized","member_id","package","service_group","sys"]},"type":"object"}},"___election":{"description":"A list of election rumors","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'latest_election' key.","type":"object","properties":{"___list":{"description":"The election list","additionalProperties":{"description":"The name of a service group","type":"object","properties":{"___election":{"description":"The election","type":"object","properties":{"___status":{"description":"The status of the election","enum":["Running","NoQuorum","Finished"]},"___votes":{"type":"array","items":{"type":"string"}},"___term":{"description":"The election term","type":"integer"},"___from_id":{"description":"The member ID being voted for","type":"string"},"___suitability":{"description":"How suitable this member is for election","type":"integer"},"___member_id":{"description":"The member ID being voted for","type":"string"},"___service_group":{"description":"The service group this election is running in","type":"string"}}}}},"type":"object"},"___update_counter":{"description":"A count of how many times the election rumors have been updated","type":"integer"},"___additionalProperties":{"description":"The name of a service group","type":"object","properties":{"___status":{"description":"The status of the election","enum":["Running","NoQuorum","Finished"]},"___votes":{"type":"array","items":{"type":"string"}},"___term":{"description":"The election term","type":"integer"},"___from_id":{"description":"The member ID being voted for","type":"string"},"___suitability":{"description":"How suitable this member is for election","type":"integer"},"___member_id":{"description":"The member ID being voted for","type":"string"},"___service_group":{"description":"The service group this election is running in","type":"string"}}}},"required":["list"]},"___service_config":{"description":"A list of service config rumors","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'latest_service_config' key.","type":"object","properties":{"___list":{"description":"The list of service config rumors","additionalProperties":{"description":"A description of each service config, named by service group","type":"object","properties":{"___service_config":{"description":"A description of the various service parameters","type":"object","properties":{"___incarnation":{"description":"The incarnation number associated with this config","type":"integer"},"___config":{"description":"The bytes of the config value","type":"array"},"___from_id":{"description":"Where did this config come from","type":"string"},"___encrypted":{"description":"Is the config encrypted","type":"boolean"},"___service_group":{"description":"The service group","type":"string"}},"required":["config","encrypted","from_id","incarnation","service_group"]}}},"type":"object"},"___update_counter":{"description":"How many times the service config rumors have been updated","$deprecated":"Since 0.66.0","type":"integer"}},"required":["list"]},"___latest_election_update":{"description":"A description of the latest election update (there can be only one), keyed by service group","additionalProperties":{"type":"object","properties":{"___status":{"description":"The status of the election","enum":["Running","NoQuorum","Finished"]},"___votes":{"type":"array","items":{"type":"string"}},"___term":{"description":"The election term","type":"integer"},"___from_id":{"description":"The member ID being voted for","type":"string"},"___suitability":{"description":"How suitable this member is for election","type":"integer"},"___member_id":{"description":"The member ID being voted for","type":"string"},"___service_group":{"description":"The service group this election is running in","type":"string"}}}},"___service_files":{"description":"A list of service file rumors","additionalProperties":{"description":"A description of each service file, named by service group","additionalProperties":{"description":"A description of each file, named by file name","type":"object","properties":{"___incarnation":{"description":"The incarnation number associated with this file","type":"integer"},"___body":{"description":"The body of the file in bytes","$deprecated":"Since 0.66.0","type":"array","items":{"type":"integer"}},"___from_id":{"description":"Member ID of who sent the file","type":"string"},"___filename":{"description":"The file name","type":"string"},"___encrypted":{"description":"Is this file encrypted","type":"boolean"},"___service_group":{"description":"The service group this file was sent to","type":"string"}},"required":["encrypted","filename","from_id","incarnation","service_group"]},"type":"object"}},"___service_file":{"description":"A list of service file rumors","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'service_files' key.","type":"object","properties":{"___list":{"description":"The list of service file rumors","additionalProperties":{"description":"A description of each service file, named by service group","additionalProperties":{"description":"A description of each file, named by file name","type":"object","properties":{"___incarnation":{"description":"The incarnation number associated with this file","type":"integer"},"___body":{"description":"The body of the file in bytes","$deprecated":"Since 0.66.0","type":"array","items":{"type":"integer"}},"___from_id":{"description":"Member ID of who sent the file","type":"string"},"___filename":{"description":"The file name","type":"string"},"___encrypted":{"description":"Is this file encrypted","type":"boolean"},"___service_group":{"description":"The service group this file was sent to","type":"string"}},"required":["encrypted","filename","from_id","incarnation","service_group"]},"type":"object"},"type":"object"},"___update_counter":{"description":"How many times the service files have been updated","$deprecated":"Since 0.66.0","type":"integer"}},"required":["list"]},"___departure":{"description":"A list of departure rumors","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'departed_members' key.","properties":{"___list":{"description":"The departure list","type":"object","properties":{"___departure":{"description":"Yet another list of departure rumors","additionalProperties":{"type":"object","properties":{"___member_id":{"description":"The member ID of the member that departed","type":"string"}}},"type":"object"}}},"___update_counter":{"description":"A count of how many times the departure rumors have been updated","type":"integer"}}},"___service":{"description":"A list of service rumors","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'services' key.","type":"object","properties":{"___list":{"description":"The list of service rumors","additionalProperties":{"description":"A representation of the service, named for the service group","additionalProperties":{"description":"A representation of the service, named for the member ID","type":"object","properties":{"___incarnation":{"description":"The incarnation number of a member","type":"integer"},"___initialized":{"description":"Whether the service has been initialized","type":"boolean"},"___cfg":{"description":"Service configuration","additionalProperties":{"type":["boolean","string","integer","array","object"]},"type":"object"},"___sys":{"$eref":{"description":"System information","type":"object","properties":{"___http_gateway_port":{"default":9631,"description":"The port for the HTTP gateway to listen on","type":"integer"},"___ip":{"description":"The member's IP address","type":"string"},"___gossip_port":{"default":9638,"description":"The port to listen on for gossip traffic","type":"integer"},"___gossip_ip":{"default":"0.0.0.0","description":"The IP address to listen on for gossip traffic","type":"string"},"___http_gateway_ip":{"default":"0.0.0.0","description":"The IP address for the HTTP gateway to listen on","type":"string"},"___ctl_gateway_ip":{"description":"The control gateway IP address","type":"string"},"___hostname":{"description":"The hostname of the member","type":"string"},"___ctl_gateway_port":{"default":9632,"description":"The control gateway port","type":"integer"}},"required":["ctl_gateway_ip","ctl_gateway_port","gossip_ip","gossip_port","hostname","http_gateway_ip","http_gateway_port","ip"]}},"___package":{"description":"The package identifier","type":"string"},"___member_id":{"description":"The member ID","type":"string"},"___service_group":{"description":"The service group","type":"string"}},"required":["cfg","incarnation","initialized","member_id","package","service_group","sys"]},"type":"object"},"type":"object"},"___update_counter":{"description":"How many times the service rumors have been updated","$deprecated":"Since 0.66.0","type":"integer"}},"required":["list"]},"___membership":{"description":"A map of membership information, including health","additionalProperties":{"type":"object","properties":{"___incarnation":{"description":"The incarnation number of the member","type":"integer"},"___health":{"description":"The health of the member","enum":["Alive","Suspect","Confirmed","Departed"]},"___persistent":{"default":false,"description":"Whether this is a persistent\/permanent peer","type":"boolean"},"___gossip_port":{"default":9638,"description":"The port for gossip traffic","type":"integer"},"___address":{"description":"IP Address of the member","type":"string"},"___swim_port":{"default":9638,"description":"The port for SWIM traffic","type":"integer"}}}},"___latest_election":{"description":"A description of the latest election (there can be only one), keyed by service group","additionalProperties":{"type":"object","properties":{"___status":{"description":"The status of the election","enum":["Running","NoQuorum","Finished"]},"___votes":{"type":"array","items":{"type":"string"}},"___term":{"description":"The election term","type":"integer"},"___from_id":{"description":"The member ID being voted for","type":"string"},"___suitability":{"description":"How suitable this member is for election","type":"integer"},"___member_id":{"description":"The member ID being voted for","type":"string"},"___service_group":{"description":"The service group this election is running in","type":"string"}}}},"___member":{"description":"The members of the butterfly network","$deprecated":"Since 0.66.0; a more concise version of this information is now available under the 'membership' key.","type":"object","properties":{"___health":{"description":"The health of the members","additionalProperties":{"description":"The health of the member","enum":["Alive","Suspect","Confirmed","Departed"]},"type":"object"},"___update_counter":{"description":"How many times the membership list has been updated","$deprecated":"Since 0.66.0","type":"integer"},"___members":{"description":"Details on each member of the network","additionalProperties":{"description":"Network details on the member","type":"object","properties":{"___incarnation":{"description":"The incarnation number of the member","type":"integer"},"___persistent":{"default":false,"description":"Whether this is a persistent\/permanent peer","type":"boolean"},"___gossip_port":{"default":9638,"description":"The port for gossip traffic","type":"integer"},"___address":{"description":"IP Address of the member","type":"string"},"___departed":{"description":"Whether the member has departed or not","type":"boolean"},"___swim_port":{"default":9638,"description":"The port for SWIM traffic","type":"integer"},"___id":{"description":"The member ID","type":"string"}},"required":["address","departed","gossip_port","id","incarnation","persistent","swim_port"]},"type":"object"}},"required":["health","members"]}}}