{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Microsoft Insights Resource Types","id":"https:\/\/schema.management.azure.com\/schemas\/2018-04-16\/Microsoft.Insights.json#","title":"Microsoft.Insights","resourceDefinitions":{"scheduledQueryRules":{"description":"Microsoft.Insights\/scheduledQueryRules","type":"object","properties":{"___location":{"description":"Resource location","type":"string"},"___name":{"description":"The name of the rule.","type":"string"},"___type":{"type":"string","enum":["Microsoft.Insights\/scheduledQueryRules"]},"___tags":{"oneOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Resource tags"},"___properties":{"oneOf":[{"$eref":{"description":"Log Search Rule Definition","type":"object","properties":{"___action":{"oneOf":[{"$ref":"#\/definitions\/Action"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Action needs to be taken on rule execution."},"___description":{"description":"The description of the Log Search rule.","type":"string"},"___enabled":{"oneOf":[{"type":"string","enum":["true","false"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"The flag which indicates whether the Log Search rule is enabled. Value should be true or false."},"___schedule":{"oneOf":[{"$ref":"#\/definitions\/Schedule"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Schedule (Frequency, Time Window) for rule."},"___source":{"oneOf":[{"$ref":"#\/definitions\/Source"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Data Source against which rule will Query Data"}},"required":["source","schedule","action"]}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"The rule properties of the resource."},"___apiVersion":{"type":"string","enum":["2018-04-16"]}},"required":["name","type","apiVersion","location","properties"]}},"definitions":{"_88TriggerCondition":{"description":"The condition that results in the Log Search rule.","type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Result or count threshold based on which rule should be triggered."},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Evaluation operation for rule - 'GreaterThan' or 'LessThan."},"___metricTrigger":{"oneOf":[{"$eref":{"type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]},"___metricColumn":{"description":"Evaluation of metric on a particular column","type":"string"},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Evaluation operation for Metric -'GreaterThan' or 'LessThan' or 'Equal'."},"___metricTriggerType":{"oneOf":[{"type":"string","enum":["Consecutive","Total"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Metric Trigger Type - 'Consecutive' or 'Total'."}}}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Trigger condition for metric query rule"}},"required":["thresholdOperator","threshold"]},"_88Source":{"description":"Specifies the log search query.","type":"object","properties":{"___query":{"description":"Log search query.","type":"string"},"___dataSourceId":{"description":"The resource uri over which log search query is to be run.","type":"string"},"___authorizedResources":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"List of  Resource referred into query"},"___queryType":{"oneOf":[{"type":"string","enum":["ResultCount"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Set value to 'ResultCount'."}},"required":["query","dataSourceId"]},"_88LogSearchRule":{"description":"Log Search Rule Definition","type":"object","properties":{"___action":{"oneOf":[{"$eref":{"oneOf":[{"properties":{"___odata.type":{"oneOf":[{"type":"string","enum":["Action"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]}}},{"allOf":[{"$ref":"#\/definitions\/AlertingAction"}],"properties":{"___odata.type":{"oneOf":[{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]}}}],"type":"object","properties":{"___odata.type":{"type":"string"}},"required":["odata.type"]}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Action needs to be taken on rule execution."},"___description":{"description":"The description of the Log Search rule.","type":"string"},"___enabled":{"oneOf":[{"type":"string","enum":["true","false"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"The flag which indicates whether the Log Search rule is enabled. Value should be true or false."},"___schedule":{"oneOf":[{"$eref":{"description":"Defines how often to run the search and the time interval.","type":"object","properties":{"___frequencyInMinutes":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"frequency (in minutes) at which rule condition should be evaluated."},"___timeWindowInMinutes":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Time window for which data needs to be fetched for query (should be greater than or equal to frequencyInMinutes)."}},"required":["frequencyInMinutes","timeWindowInMinutes"]}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Schedule (Frequency, Time Window) for rule."},"___source":{"oneOf":[{"$eref":{"description":"Specifies the log search query.","type":"object","properties":{"___query":{"description":"Log search query.","type":"string"},"___dataSourceId":{"description":"The resource uri over which log search query is to be run.","type":"string"},"___authorizedResources":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"List of  Resource referred into query"},"___queryType":{"oneOf":[{"type":"string","enum":["ResultCount"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Set value to 'ResultCount'."}},"required":["query","dataSourceId"]}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Data Source against which rule will Query Data"}},"required":["source","schedule","action"]},"_88LogMetricTrigger":{"type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]},"___metricColumn":{"description":"Evaluation of metric on a particular column","type":"string"},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Evaluation operation for Metric -'GreaterThan' or 'LessThan' or 'Equal'."},"___metricTriggerType":{"oneOf":[{"type":"string","enum":["Consecutive","Total"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Metric Trigger Type - 'Consecutive' or 'Total'."}}},"_88AzNsActionGroup":{"description":"Azure Action group","type":"object","properties":{"___actionGroup":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Azure Action Group reference."},"___emailSubject":{"description":"Custom subject override for all email ids in Azure action group","type":"string"},"___customWebhookPayload":{"description":"Custom payload to be sent for all webook URI in Azure action group","type":"string"}}},"_88Action":{"oneOf":[{"properties":{"___odata.type":{"oneOf":[{"type":"string","enum":["Action"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]}}},{"allOf":[{"$eref":{"oneOf":[{"properties":{"___odata.type":{"oneOf":[{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]}}}],"description":"Specifiy action need to be taken when rule type is Alert","type":"object","properties":{"___trigger":{"oneOf":[{"$ref":"#\/definitions\/TriggerCondition"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"The trigger condition that results in the alert rule being."},"___throttlingInMin":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"time (in minutes) for which Alerts should be throttled or suppressed."},"___odata.type":{"type":"string"},"___severity":{"oneOf":[{"type":"string","enum":["0","1","2","3","4"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Severity of the alert."},"___aznsAction":{"oneOf":[{"$ref":"#\/definitions\/AzNsActionGroup"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Azure action group reference."}},"required":["severity","aznsAction","trigger","odata.type"]}}],"properties":{"___odata.type":{"oneOf":[{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]}}}],"type":"object","properties":{"___odata.type":{"type":"string"}},"required":["odata.type"]},"_88AlertingAction":{"oneOf":[{"properties":{"___odata.type":{"oneOf":[{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}]}}}],"description":"Specifiy action need to be taken when rule type is Alert","type":"object","properties":{"___trigger":{"oneOf":[{"$eref":{"description":"The condition that results in the Log Search rule.","type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Result or count threshold based on which rule should be triggered."},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Evaluation operation for rule - 'GreaterThan' or 'LessThan."},"___metricTrigger":{"oneOf":[{"$ref":"#\/definitions\/LogMetricTrigger"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Trigger condition for metric query rule"}},"required":["thresholdOperator","threshold"]}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"The trigger condition that results in the alert rule being."},"___throttlingInMin":{"oneOf":[{"type":"integer"},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"time (in minutes) for which Alerts should be throttled or suppressed."},"___odata.type":{"type":"string"},"___severity":{"oneOf":[{"type":"string","enum":["0","1","2","3","4"]},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Severity of the alert."},"___aznsAction":{"oneOf":[{"$eref":{"description":"Azure Action group","type":"object","properties":{"___actionGroup":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Azure Action Group reference."},"___emailSubject":{"description":"Custom subject override for all email ids in Azure action group","type":"string"},"___customWebhookPayload":{"description":"Custom payload to be sent for all webook URI in Azure action group","type":"string"}}}},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Azure action group reference."}},"required":["severity","aznsAction","trigger","odata.type"]},"_88Schedule":{"description":"Defines how often to run the search and the time interval.","type":"object","properties":{"___frequencyInMinutes":{"oneOf":[{"type":"integer"},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"frequency (in minutes) at which rule condition should be evaluated."},"___timeWindowInMinutes":{"oneOf":[{"type":"integer"},{"$fref":"https:\/\/schema.management.azure.com\/schemas\/2015-01-01\/deploymentTemplate.json#\/definitions\/expression"}],"description":"Time window for which data needs to be fetched for query (should be greater than or equal to frequencyInMinutes)."}},"required":["frequencyInMinutes","timeWindowInMinutes"]}}}