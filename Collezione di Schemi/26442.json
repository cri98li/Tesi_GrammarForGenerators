{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/github.com\/boutiques\/boutiques-schema","additionalProperties":false,"title":"Tool","type":"object","properties":{"___environment-variables":{"minItems":1,"uniqueItems":true,"description":"An array of key-value pairs specifying environment variable names and their values to be used in the execution environment.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/environment-variables","type":"array","items":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/environment-variable","additionalProperties":false,"type":"object","properties":{"___name":{"minLength":1,"pattern":"^[a-z,A-Z][0-9,_,a-z,A-Z]*$","description":"The environment variable name (identifier) containing only alphanumeric characters and underscores. Example: \"PROGRAM_PATH\".","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/environment-variable\/name","type":"string"},"___description":{"description":"Description of the environment variable.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/environment-variable\/description","type":"string"},"___value":{"description":"The value of the environment variable.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/environment-variable\/value","type":"string"}},"required":["name","value"]}},"___tool-version":{"minLength":1,"description":"Tool version.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/description","type":"string"},"___tags":{"description":"A set of key-value pairs specifying tags describing the pipeline. The tag names are open, they might be more constrained in the future.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tags","additionalProperties":{"description":"Tag values","type":["string","array","boolean"],"items":{"type":"string"}},"type":"object"},"___invocation-schema":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/invocation-schema","type":"object"},"___custom":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/custom","type":"object"},"___tests":{"minItems":1,"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests","type":"array","items":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case","type":"object","properties":{"___name":{"minLength":1,"description":"Name of the test-case","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/name","type":"string"},"___invocation":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/invocation","type":"object"},"___assertions":{"anyOf":[{"required":["exit-code"]},{"required":["output-files"]}],"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/assertions","type":"object","properties":{"___output-files":{"minItems":1,"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/assertions\/out-files","type":"array","items":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/test-case\/assertions\/out-files\/output","type":"object","properties":{"___md5-reference":{"minLength":1,"description":"MD5 checksum string to match against the MD5 checksum of the output-file specified by the id object","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/assertions\/out-files\/output\/reference","type":"string"},"___id":{"minLength":1,"pattern":"^[0-9,_,a-z,A-Z]*$","description":"Id referring to an output-file","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/assertions\/out-files\/output\/id","type":"string"}},"required":["id"]}},"___exit-code":{"description":"Expected code returned by the program.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tests\/test-case\/assertions\/exit-code","type":"integer"}}}},"required":["name","assertions","invocation"]}},"___schema-version":{"description":"Version of the schema used.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/schema-version","type":"string","enum":["0.5"]},"___shell":{"minLength":1,"description":"Absolute path of the shell interpreter to use in the container (defaults to \/bin\/sh).","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/shell","type":"string"},"___name":{"minLength":1,"description":"Tool name.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/name","type":"string"},"___groups":{"minItems":1,"uniqueItems":true,"description":"Sets of identifiers of inputs, each specifying an input group.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/groups","type":"array","items":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group","additionalProperties":false,"type":"object","properties":{"___name":{"minLength":1,"description":"A human-readable name for the input group.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/name","type":"string"},"___one-is-required":{"description":"True if at least one of the inputs in the group must be active at runtime.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/one-is-required","type":"boolean"},"___description":{"description":"Description of the input group.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/description","type":"string"},"___mutually-exclusive":{"description":"True if only one input in the group may be active at runtime.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/mutually-exclusive","type":"boolean"},"___all-or-none":{"description":"True if members of the group need to be toggled together","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/all-or-none","type":"boolean"},"___id":{"minLength":1,"pattern":"^[0-9,_,a-z,A-Z]*$","description":"A short, unique, informative identifier containing only alphanumeric characters and underscores. Typically used to generate variable names. Example: \"outfile_group\".","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/id","type":"string"},"___members":{"description":"IDs of the inputs belonging to this group.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/group\/members","type":"array","items":{"minLength":1,"pattern":"^[0-9,_,a-z,A-Z]*$","type":"string"}}},"required":["name","id","members"]}},"___description":{"minLength":1,"description":"Tool description.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/description","type":"string"},"___online-platform-urls":{"description":"Online platform URLs from which the tool can be executed.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/online-platforms","type":"array","items":{"pattern":"^https?:\/\/","type":"string"}},"___url":{"minLength":1,"description":"Tool URL.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/url","type":"string"},"___output-files":{"minItems":1,"uniqueItems":true,"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output-files","type":"array","items":{"oneOf":[{"properties":{"___path-template":{"enum":[true]}}},{"properties":{"___conditional-path-template":{"enum":[true]}}}],"anyOf":[{"properties":{"___list":{"enum":[false]},"___file-template":{"minItems":1,"type":"array","items":{"type":"string"}}}},{"properties":{"___file-template":{"enum":[false]}}}],"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output","additionalProperties":false,"type":"object","properties":{"___list":{"description":"True if output is a list of value.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/list","type":"boolean"},"___uses-absolute-path":{"description":"Specifies that this output filepath will be given as an absolute path.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output-files\/uses-absolute-path","type":"boolean"},"___conditional-path-template":{"minLength":1,"description":"List of objects containing boolean statement (Limited python syntax: ==, !=, <, >, <=, >=, and, or) and output file paths relative to the execution directory, assign path of first true boolean statement. May contain input value keys, \"default\" object required if \"optional\" set to True . Example list: \"[{\"[PARAM1] > 8\": \"outputs\/[INPUT1].txt\"}, {\"default\": \"outputs\/default.txt\"}]\".","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/conditional-path-template","type":"array","items":{"type":"object","properties":{"___propertyNames":{"pattern":"^[A-Za-z0-9_><=!)( ]*$"}}}},"___file-template":{"minItems":1,"description":"An array of strings that may contain value keys. Each item will be a line in the configuration file.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/file-template","type":"array","items":{"type":"string"}},"___path-template-stripped-extensions":{"description":"List of file extensions that will be stripped from the input values before being substituted in the path template. Example: [\".nii\",\".nii.gz\"].","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/path-template-stripped-extensions","type":"array","items":{"type":"string"}},"___name":{"minLength":1,"description":"A human-readable output name. Example: 'Data file'","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/name","type":"string"},"___optional":{"description":"True if output may not be produced by the tool.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/optional","type":"boolean"},"___description":{"description":"Output description.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/description","type":"string"},"___value-key":{"description":"A string contained in command-line, substituted by the output value and\/or flag at runtime.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/value-key","type":"string"},"___path-template":{"minLength":1,"description":"Describes the output file path relatively to the execution directory. May contain input value keys. Example: \"results\/[INPUT1]_brain.mnc\".","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/path-template","type":"string"},"___command-line-flag-separator":{"description":"Separator used between flags and their arguments. Defaults to a single space.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/command-line-flag-separator","type":"string"},"___id":{"minLength":1,"pattern":"^[0-9,_,a-z,A-Z]*$","description":"A short, unique, informative identifier containing only alphanumeric characters and underscores. Typically used to generate variable names. Example: \"data_file\"","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/id","type":"string"},"___command-line-flag":{"description":"Option flag of the output, involved in the value-key substitution. Examples: -o, --output","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/command-line-flag","type":"string"}},"required":["id","name"],"dependencies":{"command-line-flag-separator":["command-line-flag"]}}},"___error-codes":{"minItems":1,"uniqueItems":true,"description":"An array of key-value pairs specifying exit codes and their description. Can be used for tools to specify the meaning of particular exit codes. Exit code 0 is assumed to indicate a successful execution.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/error-codes","type":"array","items":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/error-codes","additionalProperties":false,"type":"object","properties":{"___description":{"description":"Description of the error code.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/error-codes\/description","type":"string"},"___code":{"description":"Value of the exit code","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/error-codes\/code","type":"integer"}},"required":["code","description"]}},"___tool-doi":{"minLength":1,"description":"DOI of the tool (not of the descriptor).","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/tool-doi","type":"string"},"___command-line":{"minLength":1,"description":"A string that describes the tool command line, where input and output values are identified by \"keys\". At runtime, command-line keys are substituted with flags and values.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/command-line","type":"string"},"___author":{"minLength":1,"description":"Tool author name(s).","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/author","type":"string"},"___doi":{"minLength":1,"description":"DOI of the descriptor (not of the tool itself).","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/doi","type":"string"},"___inputs":{"minItems":1,"uniqueItems":true,"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/inputs","type":"array","items":{"anyOf":[{"properties":{"___type":{"enum":["Flag"]},"___list":{"enum":[false]}}},{"properties":{"___type":{"enum":["String","File","Number"]}}}],"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input","additionalProperties":false,"type":"object","properties":{"___type":{"description":"Input type.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/type","type":"string","enum":["String","File","Flag","Number"]},"___default-value":{"description":"Default value of the input. The default value is set when no value is specified, even when the input is optional. If the desired behavior is to omit the input from the command line when no value is specified, then no default value should be used. In this case, the tool might still use a default value internally, but this will remain undocumented in the Boutiques interface.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/default-value"},"___list":{"description":"True if input is a list of value. An input of type \"Flag\" cannot be a list.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/list","type":"boolean"},"___uses-absolute-path":{"description":"Specifies that this input must be given as an absolute path. Only specifiable for File type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/uses-absolute-path","type":"boolean"},"___minimum":{"description":"Specify the minimum value of the input (inclusive). May only be used with Number type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/minimum","type":"number"},"___value-choices":{"description":"Permitted choices for input value. May not be used with the Flag type.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/value-choices","type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}},"___value-requires":{"description":"Ids of the inputs that are required when the corresponding value choice is selected.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/value-requires","additionalProperties":true,"type":"object","properties":{}},"___maximum":{"description":"Specify the maximum value of the input (inclusive). May only be used with Number type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/maximum","type":"number"},"___value-disables":{"description":"Ids of the inputs that are disabled when the corresponding value choice is selected.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/value-disables","additionalProperties":true,"type":"object","properties":{}},"___name":{"minLength":1,"description":"A human-readable input name. Example: 'Data file'.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/name","type":"string"},"___list-separator":{"description":"Separator used between list items. Defaults to a single space.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/list-separator","type":"string"},"___optional":{"description":"True if input is optional.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/optional","type":"boolean"},"___disables-inputs":{"description":"Ids of the inputs that are disabled when this input is active.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/disabled-by-inputs","type":"array","items":{"type":"string"}},"___exclusive-maximum":{"description":"Specify whether the maximum is exclusive or not. May only be used with Number type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/exclusive-maximum","type":"boolean"},"___description":{"description":"Input description.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/description","type":"string"},"___value-key":{"description":"A string contained in command-line, substituted by the input value and\/or flag at runtime.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/value-key","type":"string"},"___max-list-entries":{"description":"Specify the maximum number of entries in the list. May only be used with List type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/max-list-entries","type":"number"},"___requires-inputs":{"description":"Ids of the inputs or ids of groups whose members must be active for this input to be available.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/output\/required-inputs","type":"array","items":{"type":"string"}},"___integer":{"description":"Specify whether the input should be an integer. May only be used with Number type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/integer","type":"boolean"},"___min-list-entries":{"description":"Specify the minimum number of entries in the list. May only be used with List type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/min-list-entries","type":"number"},"___command-line-flag-separator":{"description":"Separator used between flags and their arguments. Defaults to a single space.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/command-line-flag-separator","type":"string"},"___exclusive-minimum":{"description":"Specify whether the minimum is exclusive or not. May only be used with Number type inputs.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/exclusive-minimum","type":"boolean"},"___id":{"minLength":1,"pattern":"^[0-9,_,a-z,A-Z]*$","description":"A short, unique, informative identifier containing only alphanumeric characters and underscores. Typically used to generate variable names. Example: \"data_file\".","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/id","type":"string"},"___command-line-flag":{"description":"Option flag of the input, involved in the value-key substitution. Inputs of type \"Flag\" have to have a command-line flag. Examples: -v, --force.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/input\/command-line-flag","type":"string"}},"required":["name","id","type"],"dependencies":{"command-line-flag-separator":["command-line-flag"],"exclusive-maximum":["maximum"],"uses-absolute-path":{"properties":{"___type":{"enum":["File"]}}},"integer":{"properties":{"___type":{"enum":["Number"]}}},"value-enables":["value-choices"],"exclusive-minimum":["minimum"],"value-choices":{"properties":{"___type":{"enum":["String","Number"]}}},"list-separator":["list"],"value-disables":["value-choices"],"maximum":{"properties":{"___type":{"enum":["Number"]}}},"max-list-entries":["list"],"min-list-entries":["list"],"minimum":{"properties":{"___type":{"enum":["Number"]}}}}}},"___descriptor-url":{"minLength":1,"description":"Link to the descriptor itself (e.g. the GitHub repo where it is hosted).","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/descriptor-url","type":"string"},"___container-image":{"allOf":[{"properties":{"___container-hash":{"minLength":1,"description":"Hash for the given container.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/container-hash","type":"string"},"___working-directory":{"minLength":1,"description":"Location from which this task must be launched within the container.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/working-directory","type":"string"}}},{"oneOf":[{"description":"Object representing a docker or singularity container for the tool.","additionalProperties":false,"properties":{"___index":{"minLength":1,"description":"Optional index where the image is available, if not the standard location. Example: docker.io","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/index","type":"string"},"___type":{"enum":["docker","singularity"]},"___container-hash":{},"___image":{"minLength":1,"description":"Name of an image where the tool is installed and configured. Example: bids\/mriqc.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/image","type":"string"},"___working-directory":{},"___container-opts":{"description":"Container-level arguments for the application. Example: --privileged","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/container-opts","type":"array","items":{"type":"string"}},"___entrypoint":{"description":"Flag indicating whether or not the container uses an entrypoint.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/entrypoint","type":"boolean"}},"required":["type","image"]},{"description":"Object representing a rootfs container for the tool.","additionalProperties":false,"properties":{"___type":{"enum":["rootfs"]},"___url":{"minLength":1,"description":"URL where the image is available.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container\/url","type":"string"},"___container-hash":{},"___working-directory":{}},"required":["type","url"]}]}],"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/container-image","type":"object"},"___suggested-resources":{"id":"http:\/\/github.com\/boutiques\/boutiques-schema\/suggested-resources","type":"object","properties":{"___cpu-cores":{"description":"The requested number of cpu cores to run the described application","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/suggested-resources\/cpu-cores","type":"integer","minimum":1},"___disk-space":{"description":"The requested number of GB of storage to run the described application","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/suggested-resources\/disk-space","type":"number","minimum":0},"___walltime-estimate":{"description":"Estimated wall time of a task in seconds.","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/suggested-resources\/walltime-estimate","type":"number","minimum":0},"___ram":{"description":"The requested number of GB RAM to run the described application","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/suggested-resources\/ram","type":"number","minimum":0},"___nodes":{"description":"The requested number of nodes to spread the described application across","id":"http:\/\/github.com\/boutiques\/boutiques-schema\/suggested-resources\/nodes","type":"integer","minimum":1}}}},"required":["name","description","command-line","schema-version","inputs","tool-version"]}