{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Chute Specification","type":"object","definitions":{"_88interface":{"$$target":"#\/definitions\/interface","additionalProperties":false,"title":"Interface Specification","type":"object","properties":{"___requirements":{"additionalProperties":false,"type":"object","properties":{"___ipv4_network":{"pattern":"^\\d+\\.\\d+\\.\\d+\\.\\d+\/\\d+","description":"Required IP network in slash notation.","type":"string"},"___hwmode":{"description":"Required operating mode (11b for old hardware, 11g for 2.4 GHz, 11a for 5 Ghz).","type":"string","enum":["11b","11g","11a"]}}},"___type":{"description":"Network interface type.","type":"string","enum":["monitor","vlan","wifi-ap"]},"___wireless":{"additionalProperties":false,"type":"object","properties":{"___maxassoc":{"description":"Maximum number of associated clients.","type":"integer","minimum":0},"___acct_interval":{"description":"RADIUS accounting update interval (seconds).","type":"integer","minimum":1},"___key":{"minLength":8,"description":"Wireless network password.","type":"string"},"___ssid":{"description":"ESSID to broadcast.","type":"string","maxLength":32},"___acct_server":{"description":"RADIUS accounting server.","type":"string"},"___hidden":{"description":"Disable broadcasting the ESSID in beacons.","type":"boolean"},"___nasid":{"description":"NAS identifier for RADIUS.","type":"string"},"___isolate":{"description":"Disable forwarding traffic between connected clients.","type":"boolean"},"___acct_secret":{"description":"RADIUS accounting secret.","type":"string"}}},"___dhcp":{"additionalProperties":false,"type":"object","properties":{"___limit":{"description":"Size of address range beginning at start value.","type":"integer","minimum":1},"___start":{"description":"Starting offset for address assignment.","type":"integer","minimum":3},"___leasetime":{"pattern":"\\d+[dhms]","description":"Duration of client leases, e.g. 2h.","type":"string"}}},"___dns":{"description":"List of DNS servers to advertise to connected clients.","type":"array","items":{"type":"string"}},"___vlan-id":{"description":"VLAN tag for traffic to and from the interface.","maximum":4094,"type":"integer","minimum":1},"___l3bridge":{"description":"Bridge to another network using ARP proxying (experimental).","type":"string"}},"required":["type"]},"_88service":{"$$target":"#\/definitions\/service","additionalProperties":false,"title":"Service Specification","type":"object","properties":{"___requests":{"additionalProperties":false,"type":"object","properties":{"___as-root":{"description":"Run service as privileged user.","type":"boolean"},"___port-bindings":{"description":"Port bindings from host to service container.","type":"array","items":{"additionalProperties":false,"type":"object","properties":{"___external":{"description":"External (host) port number.","maximum":65536,"type":"integer","minimum":1},"___internal":{"description":"Internal (container) port number.","maximum":65536,"type":"integer","minimum":1}}}}}},"___type":{"description":"Type of chute service.","type":"string","enum":["light","normal","image"]},"___command":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"___dns":{"description":"List of DNS servers to be used within the container.","type":"array","items":{"type":"string"}},"___image":{"description":"Image specification for services that pull a Docker image.","type":"string"},"___interfaces":{"patternProperties":{"___\\w{1,16}":{"$eref":{"$$target":"#\/definitions\/interface","additionalProperties":false,"title":"Interface Specification","type":"object","properties":{"___requirements":{"additionalProperties":false,"type":"object","properties":{"___ipv4_network":{"pattern":"^\\d+\\.\\d+\\.\\d+\\.\\d+\/\\d+","description":"Required IP network in slash notation.","type":"string"},"___hwmode":{"description":"Required operating mode (11b for old hardware, 11g for 2.4 GHz, 11a for 5 Ghz).","type":"string","enum":["11b","11g","11a"]}}},"___type":{"description":"Network interface type.","type":"string","enum":["monitor","vlan","wifi-ap"]},"___wireless":{"additionalProperties":false,"type":"object","properties":{"___maxassoc":{"description":"Maximum number of associated clients.","type":"integer","minimum":0},"___acct_interval":{"description":"RADIUS accounting update interval (seconds).","type":"integer","minimum":1},"___key":{"minLength":8,"description":"Wireless network password.","type":"string"},"___ssid":{"description":"ESSID to broadcast.","type":"string","maxLength":32},"___acct_server":{"description":"RADIUS accounting server.","type":"string"},"___hidden":{"description":"Disable broadcasting the ESSID in beacons.","type":"boolean"},"___nasid":{"description":"NAS identifier for RADIUS.","type":"string"},"___isolate":{"description":"Disable forwarding traffic between connected clients.","type":"boolean"},"___acct_secret":{"description":"RADIUS accounting secret.","type":"string"}}},"___dhcp":{"additionalProperties":false,"type":"object","properties":{"___limit":{"description":"Size of address range beginning at start value.","type":"integer","minimum":1},"___start":{"description":"Starting offset for address assignment.","type":"integer","minimum":3},"___leasetime":{"pattern":"\\d+[dhms]","description":"Duration of client leases, e.g. 2h.","type":"string"}}},"___dns":{"description":"List of DNS servers to advertise to connected clients.","type":"array","items":{"type":"string"}},"___vlan-id":{"description":"VLAN tag for traffic to and from the interface.","maximum":4094,"type":"integer","minimum":1},"___l3bridge":{"description":"Bridge to another network using ARP proxying (experimental).","type":"string"}},"required":["type"]}}},"description":"Network interfaces to be connected.","type":"object"},"___environment":{"description":"Environment variables.","type":"object"},"___source":{"description":"Source directory for this service.","type":"string"}}}},"properties":{"___name":{"description":"Name of the chute.","type":"string"},"___web":{"additionalProperties":false,"type":"object","properties":{"___port":{"description":"Listening port inside the chute.","maximum":65536,"type":"integer","minimum":1},"___service":{"description":"Name of chute service which provides the web service.","type":"string"}}},"___description":{"description":"Description of the chute to be shown to users.","type":"string"},"___version":{"description":"Version of the chute.","anyOf":[{"type":"string"},{"type":"number"}]},"___services":{"patternProperties":{"___\\w+":{"$eref":{"$$target":"#\/definitions\/service","additionalProperties":false,"title":"Service Specification","type":"object","properties":{"___requests":{"additionalProperties":false,"type":"object","properties":{"___as-root":{"description":"Run service as privileged user.","type":"boolean"},"___port-bindings":{"description":"Port bindings from host to service container.","type":"array","items":{"additionalProperties":false,"type":"object","properties":{"___external":{"description":"External (host) port number.","maximum":65536,"type":"integer","minimum":1},"___internal":{"description":"Internal (container) port number.","maximum":65536,"type":"integer","minimum":1}}}}}},"___type":{"description":"Type of chute service.","type":"string","enum":["light","normal","image"]},"___command":{"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"___dns":{"description":"List of DNS servers to be used within the container.","type":"array","items":{"type":"string"}},"___image":{"description":"Image specification for services that pull a Docker image.","type":"string"},"___interfaces":{"patternProperties":{"___\\w{1,16}":{"$ref":"#\/definitions\/interface"}},"description":"Network interfaces to be connected.","type":"object"},"___environment":{"description":"Environment variables.","type":"object"},"___source":{"description":"Source directory for this service.","type":"string"}}}}},"description":"Services to be installed with the chute.","type":"object"}},"required":["name"]}