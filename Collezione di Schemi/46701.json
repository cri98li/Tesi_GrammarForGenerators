{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"This is a json-schema for the statemachines as defined by the php izzum library. see http:\/\/jsonschemalint.com\/draft4\/# to validate your json definitions","title":"izzum statemachines definitions schema","type":"object","properties":{"___machines":{"minItems":1,"uniqueItems":true,"description":"All machines are defined here","type":"array","items":{"description":"A full machine definition","type":"object","properties":{"___name":{"pattern":"^([a-z0-9])+((-)?([a-z0-9])+)*$","description":"the name of the machine","type":"string"},"___description":{"description":"a description of the machine","type":["string","null"]},"___states":{"minItems":2,"uniqueItems":true,"description":"All state definitions for a machine go in this array","type":"array","items":{"description":"A state definition","type":"object","properties":{"___name":{"pattern":"^([a-z0-9])+((-)?([a-z0-9])+)*$|^(not-)?regex:(.*)$","description":"the state name","type":"string"},"___exit_callable":{"description":"A php callable for state exit. can only be in form of fully\\qualified\\Class::staticMethod","type":["string","null"]},"___description":{"description":"A description of the state","type":["string","null"]},"___exit_command":{"description":"\\fully\\qualified\\Command name (multiple can be comma seperated) that will be executed on exit of the state","type":["string","null"]},"___type":{"description":"the type of state: initial (1), normal(0..n), final (1..n) or regex (0..n)","enum":["initial","normal","final","regex"]},"___entry_callable":{"description":"A php callable for state entry. can only be in form of fully\\qualified\\Class::staticMethod","type":["string","null"]},"___entry_command":{"description":"\\fully\\qualified\\Command (multiple can be comma seperated) that will be executed on entry of the state","type":["string","null"]}},"required":["name","type"]}},"___transitions":{"minItems":1,"uniqueItems":true,"description":"A list of transitions, referring to the states","type":"array","items":{"description":"A transition definition","type":"object","properties":{"___description":{"description":"The description of the transition","type":["string","null"]},"___state_from":{"pattern":"^([a-z0-9])+((-)?([a-z0-9])+)*$|^(not-)?regex:(.*)$","description":"the state from which the transition is made. this can be a regex.","type":"string"},"___rule":{"description":"\\fully\\qualified\\Rule name (multiple can be comma seperated) that will be checked as boolean guard logic before the transition","type":["string","null"]},"___command":{"description":"\\fully\\qualified\\Command name (multiple can be comma seperated) that will be executed as the transition logic","type":["string","null"]},"___transition_callable":{"description":"A php callable for transition logic. can only be in form of fully\\qualified\\Class::staticMethod","type":["string","null"]},"___event":{"pattern":"^[a-zA-Z0-9]+$","description":"an event name by which you can call this transition","type":["string","null"]},"___guard_callable":{"description":"A php callable for guard logic. can only be in form of fully\\qualified\\Class::staticMethod","type":["string","null"]},"___state_to":{"pattern":"^([a-z0-9])+((-)?([a-z0-9])+)*$|^(not-)?regex:(.*)$","description":"the state to which the transition is made. this can be a regex.","type":"string"}},"required":["state_from","state_to","event"]}},"___factory":{"description":"\\fully\\qualified\\Factory class name","type":["string","null"]}},"required":["name","description","states","transitions"]}},"___comment":{"description":"comments for the description of the file contents can be placed here.","type":["string","null"]}},"required":["machines"]}