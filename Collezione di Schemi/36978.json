{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"config_schema_v3.1.json","additionalProperties":false,"type":"object","definitions":{"_88string_or_list":{"oneOf":[{"type":"string"},{"$eref":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}]},"_88secret":{"id":"#\/definitions\/secret","additionalProperties":false,"type":"object","properties":{"___external":{"type":["boolean","object"],"properties":{"___name":{"type":"string"}}},"___labels":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___file":{"type":"string"}}},"_88network":{"id":"#\/definitions\/network","additionalProperties":false,"type":["object","null"],"properties":{"___driver_opts":{"patternProperties":{"___^.+$":{"type":["string","number"]}},"type":"object"},"___driver":{"type":"string"},"___external":{"additionalProperties":false,"type":["boolean","object"],"properties":{"___name":{"type":"string"}}},"___internal":{"type":"boolean"},"___ipam":{"additionalProperties":false,"type":"object","properties":{"___config":{"type":"array","items":{"additionalProperties":false,"type":"object","properties":{"___subnet":{"type":"string"}}}},"___driver":{"type":"string"}}},"___labels":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}}}},"_88list_of_strings":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"_88volume":{"id":"#\/definitions\/volume","additionalProperties":false,"type":["object","null"],"properties":{"___driver_opts":{"patternProperties":{"___^.+$":{"type":["string","number"]}},"type":"object"},"___driver":{"type":"string"},"___external":{"additionalProperties":false,"type":["boolean","object"],"properties":{"___name":{"type":"string"}}},"___labels":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}}}},"_88constraints":{"service":{"anyOf":[{"required":["build"]},{"required":["image"]}],"id":"#\/definitions\/constraints\/service","properties":{"___build":{"required":["context"]}}}},"_88service":{"id":"#\/definitions\/service","additionalProperties":false,"type":"object","properties":{"___secrets":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"object","properties":{"___gid":{"type":"string"},"___target":{"type":"string"},"___uid":{"type":"string"},"___mode":{"type":"number"},"___source":{"type":"string"}}}]}},"___env_file":{"$eref":{"oneOf":[{"type":"string"},{"$ref":"#\/definitions\/list_of_strings"}]}},"___shm_size":{"type":["number","string"]},"___stop_grace_period":{"format":"duration","type":"string"},"___sysctls":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___dns":{"$eref":{"oneOf":[{"type":"string"},{"$ref":"#\/definitions\/list_of_strings"}]}},"___ports":{"uniqueItems":true,"type":"array","items":{"format":"ports","type":["string","number"]}},"___depends_on":{"$eref":{"uniqueItems":true,"type":"array","items":{"type":"string"}}},"___networks":{"oneOf":[{"$eref":{"uniqueItems":true,"type":"array","items":{"type":"string"}}},{"patternProperties":{"___^[a-zA-Z0-9._-]+$":{"oneOf":[{"additionalProperties":false,"type":"object","properties":{"___ipv4_address":{"type":"string"},"___aliases":{"$eref":{"uniqueItems":true,"type":"array","items":{"type":"string"}}},"___ipv6_address":{"type":"string"}}},{"type":"null"}]}},"additionalProperties":false,"type":"object"}]},"___labels":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___expose":{"uniqueItems":true,"type":"array","items":{"format":"expose","type":["string","number"]}},"___cap_add":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___mac_address":{"type":"string"},"___external_links":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___environment":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___devices":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___restart":{"type":"string"},"___stdin_open":{"type":"boolean"},"___stop_signal":{"type":"string"},"___hostname":{"type":"string"},"___healthcheck":{"$eref":{"id":"#\/definitions\/healthcheck","additionalProperties":false,"type":"object","properties":{"___interval":{"type":"string"},"___timeout":{"type":"string"},"___retries":{"type":"number"},"___disable":{"type":"boolean"},"___test":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}}}},"___ulimits":{"patternProperties":{"___^[a-z]+$":{"oneOf":[{"type":"integer"},{"additionalProperties":false,"type":"object","properties":{"___soft":{"type":"integer"},"___hard":{"type":"integer"}},"required":["soft","hard"]}]}},"type":"object"},"___logging":{"additionalProperties":false,"type":"object","properties":{"___options":{"patternProperties":{"___^.+$":{"type":["string","number","null"]}},"type":"object"},"___driver":{"type":"string"}}},"___container_name":{"type":"string"},"___volumes":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___tty":{"type":"boolean"},"___domainname":{"type":"string"},"___privileged":{"type":"boolean"},"___links":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___cap_drop":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___userns_mode":{"type":"string"},"___image":{"type":"string"},"___deploy":{"$eref":{"id":"#\/definitions\/deployment","additionalProperties":false,"type":["object","null"],"properties":{"___update_config":{"additionalProperties":false,"type":"object","properties":{"___max_failure_ratio":{"type":"number"},"___delay":{"format":"duration","type":"string"},"___parallelism":{"type":"integer"},"___failure_action":{"type":"string"},"___monitor":{"format":"duration","type":"string"}}},"___mode":{"type":"string"},"___replicas":{"type":"integer"},"___labels":{"$ref":"#\/definitions\/list_or_dict"},"___resources":{"additionalProperties":false,"type":"object","properties":{"___reservations":{"$ref":"#\/definitions\/resource"},"___limits":{"$ref":"#\/definitions\/resource"}}},"___placement":{"additionalProperties":false,"type":"object","properties":{"___constraints":{"type":"array","items":{"type":"string"}}}},"___restart_policy":{"additionalProperties":false,"type":"object","properties":{"___max_attempts":{"type":"integer"},"___delay":{"format":"duration","type":"string"},"___condition":{"type":"string"},"___window":{"format":"duration","type":"string"}}}}}},"___extra_hosts":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___dns_search":{"$eref":{"oneOf":[{"type":"string"},{"$ref":"#\/definitions\/list_of_strings"}]}},"___pid":{"type":["string","null"]},"___entrypoint":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"___working_dir":{"type":"string"},"___user":{"type":"string"},"___tmpfs":{"$eref":{"oneOf":[{"type":"string"},{"$ref":"#\/definitions\/list_of_strings"}]}},"___command":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"___security_opt":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___build":{"oneOf":[{"type":"string"},{"additionalProperties":false,"type":"object","properties":{"___args":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___context":{"type":"string"},"___dockerfile":{"type":"string"}}}]},"___cgroup_parent":{"type":"string"},"___read_only":{"type":"boolean"},"___ipc":{"type":"string"},"___network_mode":{"type":"string"}}},"_88deployment":{"id":"#\/definitions\/deployment","additionalProperties":false,"type":["object","null"],"properties":{"___update_config":{"additionalProperties":false,"type":"object","properties":{"___max_failure_ratio":{"type":"number"},"___delay":{"format":"duration","type":"string"},"___parallelism":{"type":"integer"},"___failure_action":{"type":"string"},"___monitor":{"format":"duration","type":"string"}}},"___mode":{"type":"string"},"___replicas":{"type":"integer"},"___labels":{"$eref":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]}},"___resources":{"additionalProperties":false,"type":"object","properties":{"___reservations":{"$eref":{"id":"#\/definitions\/resource","additionalProperties":false,"type":"object","properties":{"___memory":{"type":"string"},"___cpus":{"type":"string"}}}},"___limits":{"$eref":{"id":"#\/definitions\/resource","additionalProperties":false,"type":"object","properties":{"___memory":{"type":"string"},"___cpus":{"type":"string"}}}}}},"___placement":{"additionalProperties":false,"type":"object","properties":{"___constraints":{"type":"array","items":{"type":"string"}}}},"___restart_policy":{"additionalProperties":false,"type":"object","properties":{"___max_attempts":{"type":"integer"},"___delay":{"format":"duration","type":"string"},"___condition":{"type":"string"},"___window":{"format":"duration","type":"string"}}}}},"_88healthcheck":{"id":"#\/definitions\/healthcheck","additionalProperties":false,"type":"object","properties":{"___interval":{"type":"string"},"___timeout":{"type":"string"},"___retries":{"type":"number"},"___disable":{"type":"boolean"},"___test":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}}},"_88list_or_dict":{"oneOf":[{"patternProperties":{"___.+":{"type":["string","number","null"]}},"additionalProperties":false,"type":"object"},{"uniqueItems":true,"type":"array","items":{"type":"string"}}]},"_88resource":{"id":"#\/definitions\/resource","additionalProperties":false,"type":"object","properties":{"___memory":{"type":"string"},"___cpus":{"type":"string"}}}},"properties":{"___secrets":{"patternProperties":{"___^[a-zA-Z0-9._-]+$":{"$eref":{"id":"#\/definitions\/secret","additionalProperties":false,"type":"object","properties":{"___external":{"type":["boolean","object"],"properties":{"___name":{"type":"string"}}},"___labels":{"$ref":"#\/definitions\/list_or_dict"},"___file":{"type":"string"}}}}},"id":"#\/properties\/secrets","additionalProperties":false,"type":"object"},"___version":{"type":"string"},"___services":{"patternProperties":{"___^[a-zA-Z0-9._-]+$":{"$eref":{"id":"#\/definitions\/service","additionalProperties":false,"type":"object","properties":{"___secrets":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"object","properties":{"___gid":{"type":"string"},"___target":{"type":"string"},"___uid":{"type":"string"},"___mode":{"type":"number"},"___source":{"type":"string"}}}]}},"___env_file":{"$ref":"#\/definitions\/string_or_list"},"___shm_size":{"type":["number","string"]},"___stop_grace_period":{"format":"duration","type":"string"},"___sysctls":{"$ref":"#\/definitions\/list_or_dict"},"___dns":{"$ref":"#\/definitions\/string_or_list"},"___ports":{"uniqueItems":true,"type":"array","items":{"format":"ports","type":["string","number"]}},"___depends_on":{"$ref":"#\/definitions\/list_of_strings"},"___networks":{"oneOf":[{"$ref":"#\/definitions\/list_of_strings"},{"patternProperties":{"___^[a-zA-Z0-9._-]+$":{"oneOf":[{"additionalProperties":false,"type":"object","properties":{"___ipv4_address":{"type":"string"},"___aliases":{"$ref":"#\/definitions\/list_of_strings"},"___ipv6_address":{"type":"string"}}},{"type":"null"}]}},"additionalProperties":false,"type":"object"}]},"___labels":{"$ref":"#\/definitions\/list_or_dict"},"___expose":{"uniqueItems":true,"type":"array","items":{"format":"expose","type":["string","number"]}},"___cap_add":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___mac_address":{"type":"string"},"___external_links":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___environment":{"$ref":"#\/definitions\/list_or_dict"},"___devices":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___restart":{"type":"string"},"___stdin_open":{"type":"boolean"},"___stop_signal":{"type":"string"},"___hostname":{"type":"string"},"___healthcheck":{"$ref":"#\/definitions\/healthcheck"},"___ulimits":{"patternProperties":{"___^[a-z]+$":{"oneOf":[{"type":"integer"},{"additionalProperties":false,"type":"object","properties":{"___soft":{"type":"integer"},"___hard":{"type":"integer"}},"required":["soft","hard"]}]}},"type":"object"},"___logging":{"additionalProperties":false,"type":"object","properties":{"___options":{"patternProperties":{"___^.+$":{"type":["string","number","null"]}},"type":"object"},"___driver":{"type":"string"}}},"___container_name":{"type":"string"},"___volumes":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___tty":{"type":"boolean"},"___domainname":{"type":"string"},"___privileged":{"type":"boolean"},"___links":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___cap_drop":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___userns_mode":{"type":"string"},"___image":{"type":"string"},"___deploy":{"$ref":"#\/definitions\/deployment"},"___extra_hosts":{"$ref":"#\/definitions\/list_or_dict"},"___dns_search":{"$ref":"#\/definitions\/string_or_list"},"___pid":{"type":["string","null"]},"___entrypoint":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"___working_dir":{"type":"string"},"___user":{"type":"string"},"___tmpfs":{"$ref":"#\/definitions\/string_or_list"},"___command":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"___security_opt":{"uniqueItems":true,"type":"array","items":{"type":"string"}},"___build":{"oneOf":[{"type":"string"},{"additionalProperties":false,"type":"object","properties":{"___args":{"$ref":"#\/definitions\/list_or_dict"},"___context":{"type":"string"},"___dockerfile":{"type":"string"}}}]},"___cgroup_parent":{"type":"string"},"___read_only":{"type":"boolean"},"___ipc":{"type":"string"},"___network_mode":{"type":"string"}}}}},"id":"#\/properties\/services","additionalProperties":false,"type":"object"},"___networks":{"patternProperties":{"___^[a-zA-Z0-9._-]+$":{"$eref":{"id":"#\/definitions\/network","additionalProperties":false,"type":["object","null"],"properties":{"___driver_opts":{"patternProperties":{"___^.+$":{"type":["string","number"]}},"type":"object"},"___driver":{"type":"string"},"___external":{"additionalProperties":false,"type":["boolean","object"],"properties":{"___name":{"type":"string"}}},"___internal":{"type":"boolean"},"___ipam":{"additionalProperties":false,"type":"object","properties":{"___config":{"type":"array","items":{"additionalProperties":false,"type":"object","properties":{"___subnet":{"type":"string"}}}},"___driver":{"type":"string"}}},"___labels":{"$ref":"#\/definitions\/list_or_dict"}}}}},"id":"#\/properties\/networks","type":"object"},"___volumes":{"patternProperties":{"___^[a-zA-Z0-9._-]+$":{"$eref":{"id":"#\/definitions\/volume","additionalProperties":false,"type":["object","null"],"properties":{"___driver_opts":{"patternProperties":{"___^.+$":{"type":["string","number"]}},"type":"object"},"___driver":{"type":"string"},"___external":{"additionalProperties":false,"type":["boolean","object"],"properties":{"___name":{"type":"string"}}},"___labels":{"$ref":"#\/definitions\/list_or_dict"}}}}},"id":"#\/properties\/volumes","additionalProperties":false,"type":"object"}},"required":["version"]}