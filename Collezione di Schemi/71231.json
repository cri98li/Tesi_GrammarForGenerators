{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Data captured by an agent representing an event occurring in a monitored app","type":"object","properties":{"___name":{"description":"Generic designation of a transaction in the scope of a single app (eg: 'GET \/users\/:id')","type":"string","maxLength":1024},"___timestamp":{"pattern":"Z$","format":"date-time","description":"Recorded time of the transaction, UTC based and formatted as YYYY-MM-DDTHH:mm:ss.sssZ","type":"string"},"___type":{"description":"Keyword of specific relevance in the app's domain (eg: 'request', 'cache', etc)","type":"string","maxLength":1024},"___traces":{"minItems":0,"type":["array","null"],"items":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","type":"object","properties":{"___name":{"description":"Generic designation of a trace in the scope of a transaction","type":"string","maxLength":1024},"___type":{"description":"Keyword of specific relevance in the app's domain (eg: 'db.postgresql.query', 'template.erb', etc)","type":"string","maxLength":1024},"___start":{"description":"Offset relative to the transaction's timestamp identifying the start of the trace, in milliseconds","type":"number"},"___parent":{"description":"The locally unique ID of the parent of the trace.","type":["number","null"]},"___duration":{"description":"Duration of the trace in milliseconds","type":"number"},"___context":{"description":"Any other arbitrary data captured by the agent, optionally provided by the user","type":["object","null"],"properties":{"___db":{"description":"An object containing contextual data for database traces","type":["object","null"],"properties":{"___statement":{"description":"A database statement (e.g. query) for the given database type","type":["string","null"]},"___type":{"description":"Database type. For any SQL database, \"sql\". For others, the lower-case database category, e.g. \"cassandra\", \"hbase\", or \"redis\"","type":["string","null"]},"___user":{"description":"Username for accessing database","type":["string","null"]},"___instance":{"description":"Database instance name","type":["string","null"]}}}}},"___id":{"description":"The locally unique ID of the trace.","type":["number","null"]},"___stacktrace":{"minItems":0,"description":"List of stack frames with variable attributes (eg: lineno, filename, etc)","type":["array","null"],"items":{"$ref":"..\/stacktrace_frame.json"}}},"required":["duration","name","start","type"],"$id":"docs\/spec\/transactions\/trace.json","dependencies":{"parent":{"required":["id"]}}}}},"___duration":{"description":"How long the transaction took to complete, in ms with 3 decimal points","type":"number"},"___context":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Any arbitrary contextual information regarding the event, captured by the agent, optionally provided by the user","title":"Context","type":["object","null"],"properties":{"___request":{"$ref":"request.json"},"___user":{"$ref":"user.json"},"___tags":{"patternProperties":{"___^[^.*\"]*$":{"type":"string","maxLength":1024}},"additionalProperties":false,"type":["object","null"],"regexProperties":true},"___response":{"type":["object","null"],"properties":{"___status_code":{"type":["number","null"]},"___headers_sent":{"type":["boolean","null"]},"___headers":{"type":["object","null"],"properties":{"___content-type":{"type":["string","null"]}}},"___finished":{"type":["boolean","null"]}}},"___custom":{"patternProperties":{"___^[^.*\"]*$":{}},"description":"An arbitrary mapping of additional metadata to store with the event.","additionalProperties":false,"regexProperties":true,"type":["object","null"]}},"$id":"doc\/spec\/context.json"}},"___id":{"pattern":"^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$","description":"UUID for the transaction, referred by its traces","type":"string"},"___result":{"description":"The result of the transaction. HTTP status code for HTTP-related transactions.","type":"string","maxLength":1024}},"required":["id","name","duration","type","timestamp","result"],"$id":"docs\/spec\/transactions\/transaction.json"}