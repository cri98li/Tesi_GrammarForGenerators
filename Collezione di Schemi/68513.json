{"$schema":"http:\/\/json-schema.org\/schema#","id":"https:\/\/raw.githubusercontent.com\/pschanely\/wildflower\/master\/module.schema.json","additionalProperties":false,"title":"Module","type":"object","definitions":{"_88function":{"description":"A Wildflower function","additionalProperties":false,"type":"object","properties":{"___name":{"description":"A short description of this function. It can be any name, need not be unique, and is ignored by the runtime.","type":"string"},"___overrides":{"$eref":{"description":"Refers to a function, assertion, justification, or parameter, either in this module or externally.","additionalProperties":false,"type":"object","properties":{"___module":{"description":"The identifier of the module to load from; omit this value when the reference is within this module.","type":"string"},"___id":{"description":"The identifier of a function or parameter.","type":"string"}}},"description":"If specified, this is the identifier of another function to override."},"___native_code":{"description":"Maps Wildflower platform ids to values that represent native code.  The nature of the value depends on the platform.","type":"object"},"___parameters":{"description":"A list of identifiers for parameters required by this function.","type":"array","items":{"$eref":{"description":"Represents a parameter of a function.","additionalProperties":false,"properties":{"___name":{"description":"A short description of this parameter. The name is ignored by the runtime.","type":"string"},"___id":{"description":"This idenifier of this parameter. It can be any string that is unique within the module.","type":"string"}},"required":["id"]}}},"___code":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/literalOp"},{"$ref":"#\/definitions\/lambdaOp"},{"$ref":"#\/definitions\/loadOp"},{"$ref":"#\/definitions\/callOp"}],"type":"object","properties":{"___llid":{"description":"A long-lived uuid that may be used to track this bit of code over time.","type":"string"},"___comment":{"type":"string"}},"required":["op"]}}}},"_88lambdaOp":{"$eref":{"description":"A Wildflower function","additionalProperties":false,"type":"object","properties":{"___name":{"description":"A short description of this function. It can be any name, need not be unique, and is ignored by the runtime.","type":"string"},"___overrides":{"description":"If specified, this is the identifier of another function to override.","$ref":"#\/definitions\/reference"},"___native_code":{"description":"Maps Wildflower platform ids to values that represent native code.  The nature of the value depends on the platform.","type":"object"},"___parameters":{"description":"A list of identifiers for parameters required by this function.","type":"array","items":{"$ref":"#\/definitions\/parameter"}},"___code":{"$ref":"#\/definitions\/codeExpr"}}},"description":"Yields a local function which may reference parameters in its lexical scope (it is a closure). The function cannot be native, nor an override of another function.","properties":{"___op":{"enum":["lambda"]}}},"_88reference":{"description":"Refers to a function, assertion, justification, or parameter, either in this module or externally.","additionalProperties":false,"type":"object","properties":{"___module":{"description":"The identifier of the module to load from; omit this value when the reference is within this module.","type":"string"},"___id":{"description":"The identifier of a function or parameter.","type":"string"}}},"_88callOp":{"description":"Calls a function and supplies arguments.","properties":{"___fn":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/literalOp"},{"$ref":"#\/definitions\/lambdaOp"},{"$ref":"#\/definitions\/loadOp"},{"$ref":"#\/definitions\/callOp"}],"type":"object","properties":{"___llid":{"description":"A long-lived uuid that may be used to track this bit of code over time.","type":"string"},"___comment":{"type":"string"}},"required":["op"]},"description":"An expression which evaluates to a function."},"___op":{"enum":["call"]},"___args":{"description":"An object keyed by parameter ids, mapped to expressions that yield values for each parameter.","additionalProperties":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/literalOp"},{"$ref":"#\/definitions\/lambdaOp"},{"$ref":"#\/definitions\/loadOp"},{"$ref":"#\/definitions\/callOp"}],"type":"object","properties":{"___llid":{"description":"A long-lived uuid that may be used to track this bit of code over time.","type":"string"},"___comment":{"type":"string"}},"required":["op"]}},"type":"object"}},"required":["fn","args"]},"_88externalModule":{"description":"Refers to other modules by URL.","additionalProperties":false,"properties":{"___url":{"description":"A permalink to the module's contents.  This should be a publicly accessible link.","type":"string"},"___hash":{"description":"SHA-256 hash of the file referred to.  Used to confirm that the source has not changed.","type":"string"},"___size":{"description":"Size of the file, in bytes.","type":"integer","minimum":0}},"required":["url","size","hash"]},"_88codeExpr":{"oneOf":[{"$eref":{"description":"Evaluates to a Wildflower value that corresponds to a literal json value. The interpretation of this can depend on the platform.","properties":{"___val":{"description":"The value to be produced."},"___op":{"enum":["literal"]}},"required":["val"]}},{"$eref":{"description":"Yields a local function which may reference parameters in its lexical scope (it is a closure). The function cannot be native, nor an override of another function.","$ref":"#\/definitions\/function","properties":{"___op":{"enum":["lambda"]}}}},{"$eref":{"description":"Loads a value; this may be a function in this module or elsewhere, or it may reference a parameter id. The parameter must be visible in the current lexical scope).","properties":{"___ref":{"description":"The identifier of the function or parameter.","$ref":"#\/definitions\/reference"},"___op":{"enum":["load"]},"___super":{"description":"If present, load a reference to the next lower version of this function in the override stack. This can only be used in a function that overrides another function. The 'ref' field should not be present when using super.","type":"boolean","enum":[true]}}}},{"$eref":{"description":"Calls a function and supplies arguments.","properties":{"___fn":{"description":"An expression which evaluates to a function.","$ref":"#\/definitions\/codeExpr"},"___op":{"enum":["call"]},"___args":{"description":"An object keyed by parameter ids, mapped to expressions that yield values for each parameter.","additionalProperties":{"$ref":"#\/definitions\/codeExpr"},"type":"object"}},"required":["fn","args"]}}],"type":"object","properties":{"___llid":{"description":"A long-lived uuid that may be used to track this bit of code over time.","type":"string"},"___comment":{"type":"string"}},"required":["op"]},"_88parameter":{"description":"Represents a parameter of a function.","additionalProperties":false,"properties":{"___name":{"description":"A short description of this parameter. The name is ignored by the runtime.","type":"string"},"___id":{"description":"This idenifier of this parameter. It can be any string that is unique within the module.","type":"string"}},"required":["id"]},"_88justification":{"description":"Justification that an assertion is valid, if its antecendents are valid. The exact nature of this object depends on the 'type' field.","additionalProperties":false,"type":"object","properties":{"___consequent":{"$eref":{"description":"Refers to a function, assertion, justification, or parameter, either in this module or externally.","additionalProperties":false,"type":"object","properties":{"___module":{"description":"The identifier of the module to load from; omit this value when the reference is within this module.","type":"string"},"___id":{"description":"The identifier of a function or parameter.","type":"string"}}},"description":"The identifier of an assertion to be justified."},"___antecedents":{"description":"Identifiers of assertions on which this assertion depends.","type":"array","items":{"$eref":{"description":"Refers to a function, assertion, justification, or parameter, either in this module or externally.","additionalProperties":false,"type":"object","properties":{"___module":{"description":"The identifier of the module to load from; omit this value when the reference is within this module.","type":"string"},"___id":{"description":"The identifier of a function or parameter.","type":"string"}}}}},"___type":{"description":"Determines the type of assertion. An assertion of type 'open-theory' contains an OpenTheory proof object in its contents field.","type":"string"},"___contents":{"description":"Data that is specific to this type of justification.","type":"object"}},"required":["consequent","type"]},"_88assertion":{"description":"Assertions represent test cases or more generally, invariant expectations of the code. This contains a function that should return true for every possible input.","additionalProperties":false,"properties":{"___function":{"$eref":{"description":"A Wildflower function","additionalProperties":false,"type":"object","properties":{"___name":{"description":"A short description of this function. It can be any name, need not be unique, and is ignored by the runtime.","type":"string"},"___overrides":{"description":"If specified, this is the identifier of another function to override.","$ref":"#\/definitions\/reference"},"___native_code":{"description":"Maps Wildflower platform ids to values that represent native code.  The nature of the value depends on the platform.","type":"object"},"___parameters":{"description":"A list of identifiers for parameters required by this function.","type":"array","items":{"$ref":"#\/definitions\/parameter"}},"___code":{"$ref":"#\/definitions\/codeExpr"}}}},"___properties":{"description":"Various classifications for this assertion, in the form of key-value pairs; platforms and verifiers may implement conventions with these (for example, to indicate that an assertion should be used for rewriting).","type":"object"}}},"_88literalOp":{"description":"Evaluates to a Wildflower value that corresponds to a literal json value. The interpretation of this can depend on the platform.","properties":{"___val":{"description":"The value to be produced."},"___op":{"enum":["literal"]}},"required":["val"]},"_88loadOp":{"description":"Loads a value; this may be a function in this module or elsewhere, or it may reference a parameter id. The parameter must be visible in the current lexical scope).","properties":{"___ref":{"$eref":{"description":"Refers to a function, assertion, justification, or parameter, either in this module or externally.","additionalProperties":false,"type":"object","properties":{"___module":{"description":"The identifier of the module to load from; omit this value when the reference is within this module.","type":"string"},"___id":{"description":"The identifier of a function or parameter.","type":"string"}}},"description":"The identifier of the function or parameter."},"___op":{"enum":["load"]},"___super":{"description":"If present, load a reference to the next lower version of this function in the override stack. This can only be used in a function that overrides another function. The 'ref' field should not be present when using super.","type":"boolean","enum":[true]}}}},"properties":{"___name":{"description":"The name of the module.  This is a just a user-friendly label, and need not be unique","type":"string"},"___wf_version":{"type":"string","enum":["0.1"]},"___assertions":{"description":"Assertions made by this module, keyed by arbitrary, unique strings.","additionalProperties":{"$fref":"#\/definition\/assertion"},"type":"object"},"___forked_from":{"description":"A reference to the codebase from which this module is derived. Because all Wildflower code is immutable, this is the mechanism by which developers can find updated versions of your module.","additionalProperties":false,"properties":{"___ref":{"$eref":{"description":"Refers to other modules by URL.","additionalProperties":false,"properties":{"___url":{"description":"A permalink to the module's contents.  This should be a publicly accessible link.","type":"string"},"___hash":{"description":"SHA-256 hash of the file referred to.  Used to confirm that the source has not changed.","type":"string"},"___size":{"description":"Size of the file, in bytes.","type":"integer","minimum":0}},"required":["url","size","hash"]}},"___date":{"format":"date-time","type":"string"}},"required":["ref","date"]},"___properties":{"description":"Arbitrary key-value pairs for organization purposes. These do not influence the runtime directly.","type":"object"},"___functions":{"description":"Functions provided by this module. This object is keyed by arbitrary strings that are unique within the module. Note that module-level constants are not permitted; you must use a zero-argument function instead (this ensures everything in a module is overrideable)","additionalProperties":{"$eref":{"description":"A Wildflower function","additionalProperties":false,"type":"object","properties":{"___name":{"description":"A short description of this function. It can be any name, need not be unique, and is ignored by the runtime.","type":"string"},"___overrides":{"description":"If specified, this is the identifier of another function to override.","$ref":"#\/definitions\/reference"},"___native_code":{"description":"Maps Wildflower platform ids to values that represent native code.  The nature of the value depends on the platform.","type":"object"},"___parameters":{"description":"A list of identifiers for parameters required by this function.","type":"array","items":{"$ref":"#\/definitions\/parameter"}},"___code":{"$ref":"#\/definitions\/codeExpr"}}}},"type":"object"},"___dependencies":{"description":"A list of modules on which this module depends.","type":"array","items":{"$eref":{"description":"Refers to other modules by URL.","additionalProperties":false,"properties":{"___url":{"description":"A permalink to the module's contents.  This should be a publicly accessible link.","type":"string"},"___hash":{"description":"SHA-256 hash of the file referred to.  Used to confirm that the source has not changed.","type":"string"},"___size":{"description":"Size of the file, in bytes.","type":"integer","minimum":0}},"required":["url","size","hash"]}}},"___override_order":{"description":"A (floating point) preference for when the overrides for this module occur.  Overrides with higher values here will wrap implementations in modules with lower values. If omitted, the default value of 0.0 is assumed.","type":"number"},"___justifications":{"description":"Proofs or other evidence that assertions are valid.","additionalProperties":{"$fref":"#\/definition\/justification"},"type":"object"}},"required":["wf_version","dependencies","functions"]}