{"$schema":"http:\/\/json-schema.org\/draft-07\/schema#","description":"Schema for all the data the Habitat supervisor makes available at the \/services HTTP API endpoint","type":"array","items":{"description":"The services that the Habitat supervisor has loaded","type":"object","properties":{"___svc_encrypted_password":{"description":"The encrypted password for this service","type":["null","string"]},"___needs_reload":{"description":"Does this service need to be reloaded","type":"boolean"},"___binds":{"description":"Mapping of bind name to service group","type":"array","items":{"examples":["router:builder-router.default"],"description":"A colon separated list of two items: the bind name, and service group","type":"string"}},"___cfg":{"description":"The current configuration of this service","additionalProperties":{"type":["null","boolean","string","integer","array","object"]},"type":["null","object"]},"___initialized":{"description":"Whether this service has been initialized or not","type":"boolean"},"___process":{"description":"Run time data about this service","type":"object","properties":{"___state":{"description":"The state of this process","enum":["up","down"]},"___state_entered":{"description":"The time the process entered its current state, expressed as seconds since epoch","type":"integer"},"___pid":{"description":"The PID of this process while it's running","type":["null","integer"]}},"required":["pid","state","state_entered"]},"___user_config_updated":{"description":"Did a user update the config","type":"boolean"},"___hooks":{"description":"A description of the hooks for this service","type":"object","properties":{"___post_run":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The PostRun Hook"},"___health_check":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The HealthCheck Hook"},"___init":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The Init Hook"},"___file_updated":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The FileUpdated Hook"},"___reload":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The Reload Hook"},"___run":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The Run Hook"},"___post_stop":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The PostStop Hook"},"___reconfigure":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The Reconfigure Hook"},"___suitability":{"oneOf":[{"type":"null"},{"$eref":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}],"description":"The Suitability Hook"}}},"___last_election_status":{"description":"The status of the last election","type":"string"},"___spec_file":{"description":"The path to this service's spec file","type":"string"},"___needs_reconfiguration":{"description":"Does this service need to be reconfigured","type":"boolean"},"___topology":{"description":"The topology this service runs as","enum":["standalone","leader"]},"___spec_ident":{"description":"The package identifier for this service spec","$deprecated":"Since 0.66.0; please use 'spec_identifier' instead","$fref":"#\/definitions\/package_identifier"},"___update_strategy":{"description":"The strategy used to update this service","enum":["none","at-once","rolling"]},"___channel":{"description":"The channel this service updates itself from","type":"string"},"___health_check":{"description":"The results of the last health check","enum":["Ok","Warning","Critical","Unknown"]},"___sys":{"$eref":{"description":"System information","$comment":"In http_gateway_butterfly_schema.json#\/definitions\/sys_basic, we lay out basic system information. This structure is a duplication of that, but it includes member_id, permanent, and version, as well.","type":"object","properties":{"___http_gateway_port":{"default":9631,"description":"Listening port for Supervisor's HTTP gateway.","type":"integer"},"___ip":{"description":"The IP address of the running service.","type":"string"},"___version":{"description":"Version of the Habitat Supervisor, e.g., `0.54.0\/20180221023448`","type":"string"},"___gossip_port":{"default":9638,"description":"Listening port for Supervisor's gossip connection.","type":"integer"},"___gossip_ip":{"default":"0.0.0.0","description":"Listening address for Supervisor's gossip connection.","type":"string"},"___http_gateway_ip":{"default":"0.0.0.0","description":"Listening address for Supervisor's HTTP gateway.","type":"string"},"___ctl_gateway_ip":{"description":"Listening address for Supervisor's Control Gateway.","type":"string"},"___hostname":{"default":"localhost","description":"The hostname of the running service.","type":"string"},"___ctl_gateway_port":{"default":9632,"description":"Listening port for Supervisor's Control Gateway.","type":"integer"},"___permanent":{"description":"Set to true if a Supervisor is being used as a permanent peer, to increase Ring network traffic stability.","type":"boolean"},"___member_id":{"description":"The member's Supervisor ID, e.g., `3d1e73ff19464a27aea3cdc5c2243f74`","type":"string"}},"required":["ctl_gateway_ip","ctl_gateway_port","gossip_ip","gossip_port","hostname","http_gateway_ip","http_gateway_port","ip","member_id","permanent","version"]}},"___pkg":{"description":"The habitat package that this service was spawned from","type":"object","properties":{"___svc_static_path":{"description":"The path to this package's static files","type":"string"},"___svc_var_path":{"description":"The path to this package's var directory","type":"string"},"___origin":{"description":"The origin of this package","type":"string"},"___ident":{"description":"The ident of this package","type":"string"},"___svc_user":{"description":"The user this package will run as","type":"string"},"___dependencies":{"description":"This package's dependencies","type":"array","items":{"description":"Package identifier for a dependency","type":"string"}},"___svc_path":{"description":"The root of this package's run time data","type":"string"},"___env":{"description":"The environment for this package","additionalProperties":{"type":"string"},"type":"object"},"___svc_files_path":{"description":"The path to this package's files","type":"string"},"___exports":{"description":"The exports for this package","additionalProperties":{"type":"string"},"type":"object"},"___name":{"description":"The name of this package","type":"string"},"___svc_pid_file":{"description":"The PID file for this package when it's running","type":"string"},"___svc_run":{"description":"The run hook","type":"string"},"___version":{"description":"The version of this package","type":"string"},"___deps":{"description":"This package's dependencies","$deprecated":"Since 0.66.0; please use 'dependencies' instead.","type":"array","items":{"$eref":{"description":"A Habitat package identifier, split apart into its constituent components","additionalProperties":false,"type":"object","properties":{"___name":{"description":"The name of the Habitat package","type":"string"},"___origin":{"description":"The origin of the Habitat package","type":"string"},"___version":{"description":"The version of the Habitat package","type":"string"},"___release":{"description":"The release of the Habitat package","type":"string"}},"required":["origin","name","version","release"]},"description":"Package identifier for a dependency"}},"___svc_group":{"description":"The group this package will run as","type":"string"},"___svc_data_path":{"description":"The path to this package's data","type":"string"},"___release":{"description":"The release of this package","type":"string"},"___svc_config_path":{"description":"The path to this package's configuration","type":"string"},"___path":{"description":"The path to the exploded version of this package on disk","type":"string"},"___exposes":{"description":"The configuration that this package exposes to others","type":"array","items":{"description":"Piece of data to expose","type":"string"}}},"required":["deps","env","exports","exposes","ident","name","origin","path","release","svc_config_path","svc_data_path","svc_files_path","svc_group","svc_path","svc_pid_file","svc_run","svc_static_path","svc_user","svc_var_path","version"]},"___service_group":{"description":"The service group of this service","type":"string"},"___desired_state":{"description":"The desired state for this service","enum":["Up","Down"]},"___binding_mode":{"description":"What type of bind this is, either strict or relaxed","enum":["strict","relaxed"]},"___all_pkg_binds":{"description":"All of the package bind information","type":"array","items":{"description":"A package bind","type":"object","properties":{"___exports":{"description":"The binds that the service exports","type":"array","items":{"description":"The bind value","type":"string"}},"___service":{"description":"The bind name","type":"string"}},"required":["exports","service"]}},"___config_from":{"description":"The path where the config is loaded from","type":["null","string"]},"___bldr_url":{"description":"The URL for the Habitat Builder service","type":"string"},"___manager_fs_cfg":{"description":"The filesystem paths the supervisor uses to persist data to disk","type":"object","properties":{"___sup_root":{"description":"The supervisor's root directory","type":"string"},"___data_path":{"description":"The path for data","type":"string"},"___proc_lock_file":{"description":"The path to the LOCK file","type":"string"},"___member_id_file":{"description":"The path to the MEMBER_ID file","type":"string"},"___specs_path":{"description":"The path to the supervisor spec files","type":"string"}},"required":["data_path","member_id_file","proc_lock_file","specs_path","sup_root"]},"___spec_identifier":{"description":"The package identifier for this service spec","type":"string"}},"required":["all_pkg_binds","binding_mode","binds","bldr_url","channel","config_from","desired_state","health_check","hooks","initialized","last_election_status","manager_fs_cfg","needs_reconfiguration","needs_reload","pkg","process","service_group","spec_file","spec_ident","sys","topology","update_strategy","user_config_updated"]},"definitions":{"_88sys_extended":{"description":"System information","$comment":"In http_gateway_butterfly_schema.json#\/definitions\/sys_basic, we lay out basic system information. This structure is a duplication of that, but it includes member_id, permanent, and version, as well.","type":"object","properties":{"___http_gateway_port":{"default":9631,"description":"Listening port for Supervisor's HTTP gateway.","type":"integer"},"___ip":{"description":"The IP address of the running service.","type":"string"},"___version":{"description":"Version of the Habitat Supervisor, e.g., `0.54.0\/20180221023448`","type":"string"},"___gossip_port":{"default":9638,"description":"Listening port for Supervisor's gossip connection.","type":"integer"},"___gossip_ip":{"default":"0.0.0.0","description":"Listening address for Supervisor's gossip connection.","type":"string"},"___http_gateway_ip":{"default":"0.0.0.0","description":"Listening address for Supervisor's HTTP gateway.","type":"string"},"___ctl_gateway_ip":{"description":"Listening address for Supervisor's Control Gateway.","type":"string"},"___hostname":{"default":"localhost","description":"The hostname of the running service.","type":"string"},"___ctl_gateway_port":{"default":9632,"description":"Listening port for Supervisor's Control Gateway.","type":"integer"},"___permanent":{"description":"Set to true if a Supervisor is being used as a permanent peer, to increase Ring network traffic stability.","type":"boolean"},"___member_id":{"description":"The member's Supervisor ID, e.g., `3d1e73ff19464a27aea3cdc5c2243f74`","type":"string"}},"required":["ctl_gateway_ip","ctl_gateway_port","gossip_ip","gossip_port","hostname","http_gateway_ip","http_gateway_port","ip","member_id","permanent","version"]},"_88hook":{"description":"A hook","type":"object","properties":{"___render_pair":{"description":"The path to the hook","type":"string"},"___stderr_log_path":{"description":"The path to the stderr log","type":"string"},"___stdout_log_path":{"description":"The path to the stdout log","type":"string"}}}}}