{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Microsoft BatchAI Resource Types","id":"https:\/\/schema.management.azure.com\/schemas\/2018-05-01\/Microsoft.BatchAI.json#","title":"Microsoft.BatchAI","resourceDefinitions":{"workspaces_experiments":{"description":"Microsoft.BatchAI\/workspaces\/experiments","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the experiment. Experiment names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["Microsoft.BatchAI\/workspaces\/experiments"]},"___apiVersion":{"type":"string","enum":["2018-05-01"]},"___resources":{"type":"array","items":{"oneOf":[{"$eref":{"description":"Microsoft.BatchAI\/workspaces\/experiments\/jobs","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The name of the job within the specified resource group. Job names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["jobs"]},"___properties":{"oneOf":[{"$ref":"#\/definitions\/JobBaseProperties"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The properties of a Batch AI Job."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]}}]}}},"required":["apiVersion","name","type"]},"workspaces_fileServers":{"description":"Microsoft.BatchAI\/workspaces\/fileServers","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the file server within the specified resource group. File server names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["Microsoft.BatchAI\/workspaces\/fileServers"]},"___properties":{"oneOf":[{"$eref":{"description":"The properties of a file server.","type":"object","properties":{"___sshConfiguration":{"oneOf":[{"$ref":"#\/definitions\/SshConfiguration"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"SSH configuration."},"___dataDisks":{"oneOf":[{"$ref":"#\/definitions\/DataDisks"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Data disks settings."},"___subnet":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___vmSize":{"description":"The size of the virtual machine for the File Server. For information about available VM sizes from the Virtual Machines Marketplace, see Sizes for Virtual Machines (Linux).","type":"string"}},"required":["dataDisks","sshConfiguration","vmSize"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The properties of a file server."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]},"workspaces":{"description":"Microsoft.BatchAI\/workspaces","type":"object","properties":{"___location":{"description":"The region in which to create the Workspace.","type":"string"},"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the workspace. Workspace names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["Microsoft.BatchAI\/workspaces"]},"___tags":{"oneOf":[{"additionalProperties":{"type":"string"},"type":"object","properties":{}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The user specified tags associated with the Workspace."},"___apiVersion":{"type":"string","enum":["2018-05-01"]},"___resources":{"type":"array","items":{"oneOf":[{"$eref":{"description":"Microsoft.BatchAI\/workspaces\/experiments","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The name of the experiment. Experiment names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["experiments"]},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","type"]}},{"$eref":{"description":"Microsoft.BatchAI\/workspaces\/fileServers","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The name of the file server within the specified resource group. File server names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["fileServers"]},"___properties":{"oneOf":[{"$ref":"#\/definitions\/FileServerBaseProperties"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The properties of a file server."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]}},{"$eref":{"description":"Microsoft.BatchAI\/workspaces\/clusters","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The name of the cluster within the specified resource group. Cluster names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["clusters"]},"___properties":{"oneOf":[{"$ref":"#\/definitions\/ClusterBaseProperties"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The properties of a Cluster."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]}}]}}},"required":["apiVersion","location","name","type"]},"workspaces_clusters":{"description":"Microsoft.BatchAI\/workspaces\/clusters","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the cluster within the specified resource group. Cluster names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["Microsoft.BatchAI\/workspaces\/clusters"]},"___properties":{"oneOf":[{"$eref":{"description":"The properties of a Cluster.","type":"object","properties":{"___vmPriority":{"oneOf":[{"type":"string","enum":["dedicated","lowpriority"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"VM priority. Allowed values are: dedicated (default) and lowpriority."},"___virtualMachineConfiguration":{"oneOf":[{"$ref":"#\/definitions\/VirtualMachineConfiguration"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"VM configuration."},"___nodeSetup":{"oneOf":[{"$ref":"#\/definitions\/NodeSetup"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Node setup settings."},"___scaleSettings":{"oneOf":[{"$ref":"#\/definitions\/ScaleSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"At least one of manual or autoScale settings must be specified. Only one of manual or autoScale settings can be specified. If autoScale settings are specified, the system automatically scales the cluster up and down (within the supplied limits) based on the pending jobs on the cluster."},"___userAccountSettings":{"oneOf":[{"$ref":"#\/definitions\/UserAccountSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Settings for user account that gets created on each on the nodes of a cluster."},"___subnet":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___vmSize":{"description":"The size of the virtual machines in the cluster. All nodes in a cluster have the same VM size. For information about available VM sizes for clusters using images from the Virtual Machines Marketplace see Sizes for Virtual Machines (Linux). Batch AI service supports all Azure VM sizes except STANDARD_A0 and those with premium storage (STANDARD_GS, STANDARD_DS, and STANDARD_DSV2 series).","type":"string"}},"required":["userAccountSettings","vmSize"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The properties of a Cluster."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]},"workspaces_experiments_jobs":{"description":"Microsoft.BatchAI\/workspaces\/experiments\/jobs","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the job within the specified resource group. Job names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["Microsoft.BatchAI\/workspaces\/experiments\/jobs"]},"___properties":{"oneOf":[{"$eref":{"description":"The properties of a Batch AI Job.","type":"object","properties":{"___secrets":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/EnvironmentVariableWithSecretValue"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of user defined environment variables with secret values which will be setup for the job. Server will never report values of these variables back."},"___schedulingPriority":{"oneOf":[{"type":"string","enum":["low","normal","high"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Scheduling priority associated with the job. Possible values: low, normal, high."},"___constraints":{"oneOf":[{"$ref":"#\/definitions\/JobBasePropertiesConstraints"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Constraints associated with the Job."},"___outputDirectories":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/OutputDirectory"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of output directories for the job."},"___jobPreparation":{"oneOf":[{"$ref":"#\/definitions\/JobPreparation"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Job preparation settings."},"___inputDirectories":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/InputDirectory"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of input directories for the job."},"___chainerSettings":{"oneOf":[{"$ref":"#\/definitions\/ChainerSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Chainer job settings."},"___cluster":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___nodeCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of compute nodes to run the job on. The job will be gang scheduled on that many compute nodes."},"___mountVolumes":{"oneOf":[{"$ref":"#\/definitions\/MountVolumes"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Details of volumes to mount on the cluster."},"___customToolkitSettings":{"oneOf":[{"$ref":"#\/definitions\/CustomToolkitSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Custom tool kit job settings."},"___caffe2Settings":{"oneOf":[{"$ref":"#\/definitions\/Caffe2Settings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Caffe2 job settings."},"___cntkSettings":{"oneOf":[{"$ref":"#\/definitions\/CNTKsettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"CNTK (aka Microsoft Cognitive Toolkit) job settings."},"___tensorFlowSettings":{"oneOf":[{"$ref":"#\/definitions\/TensorFlowSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"TensorFlow job settings."},"___stdOutErrPathPrefix":{"description":"The path where the Batch AI service will store stdout, stderror and execution log of the job.","type":"string"},"___pyTorchSettings":{"oneOf":[{"$ref":"#\/definitions\/PyTorchSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"pyTorch job settings."},"___customMpiSettings":{"oneOf":[{"$ref":"#\/definitions\/CustomMpiSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Custom MPI job settings."},"___horovodSettings":{"oneOf":[{"$ref":"#\/definitions\/HorovodSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Specifies the settings for Horovod job."},"___caffeSettings":{"oneOf":[{"$ref":"#\/definitions\/CaffeSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Caffe job settings."},"___environmentVariables":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/EnvironmentVariable"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of user defined environment variables which will be setup for the job."},"___containerSettings":{"oneOf":[{"$ref":"#\/definitions\/ContainerSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Docker container settings."}},"required":["cluster","nodeCount","stdOutErrPathPrefix"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The properties of a Batch AI Job."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]}},"definitions":{"_88ChainerSettings":{"description":"Chainer job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"}},"required":["pythonScriptFilePath"]},"_88DataDisks":{"description":"Data disks settings.","type":"object","properties":{"___storageAccountType":{"oneOf":[{"type":"string","enum":["Standard_LRS","Premium_LRS"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Type of storage account to be used on the disk. Possible values are: Standard_LRS or Premium_LRS. Premium storage account type can only be used with VM sizes supporting premium storage."},"___diskSizeInGB":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Disk size in GB for the blank data disks."},"___diskCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of data disks attached to the File Server. If multiple disks attached, they will be configured in RAID level 0."},"___cachingType":{"oneOf":[{"type":"string","enum":["none","readonly","readwrite"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Caching type for the disks. Available values are none (default), readonly, readwrite. Caching type can be set only for VM sizes supporting premium storage."}},"required":["diskCount","diskSizeInGB","storageAccountType"]},"_88ManualScaleSettings":{"description":"Manual scale settings for the cluster.","type":"object","properties":{"___nodeDeallocationOption":{"oneOf":[{"type":"string","enum":["requeue","terminate","waitforjobcompletion"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"An action to be performed when the cluster size is decreasing. The default value is requeue."},"___targetNodeCount":{"oneOf":[{"default":"0","type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The desired number of compute nodes in the Cluster. Default is 0."}},"required":["targetNodeCount"]},"_88AppInsightsReference":{"description":"Azure Application Insights information for performance counters reporting.","type":"object","properties":{"___instrumentationKeySecretReference":{"oneOf":[{"$eref":{"description":"Key Vault Secret reference.","type":"object","properties":{"___secretUrl":{"description":"The URL referencing a secret in the Key Vault.","type":"string"},"___sourceVault":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."}},"required":["secretUrl","sourceVault"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Key Vault Secret reference."},"___component":{"oneOf":[{"$eref":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___instrumentationKey":{"description":"Value of the Azure Application Insights instrumentation key.","type":"string"}},"required":["component"]},"_88ClusterBaseProperties":{"description":"The properties of a Cluster.","type":"object","properties":{"___vmPriority":{"oneOf":[{"type":"string","enum":["dedicated","lowpriority"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"VM priority. Allowed values are: dedicated (default) and lowpriority."},"___virtualMachineConfiguration":{"oneOf":[{"$eref":{"description":"VM configuration.","type":"object","properties":{"___imageReference":{"oneOf":[{"$ref":"#\/definitions\/ImageReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The OS image reference."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"VM configuration."},"___nodeSetup":{"oneOf":[{"$eref":{"description":"Node setup settings.","type":"object","properties":{"___performanceCountersSettings":{"oneOf":[{"$ref":"#\/definitions\/PerformanceCountersSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Performance counters reporting settings."},"___mountVolumes":{"oneOf":[{"$ref":"#\/definitions\/MountVolumes"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Details of volumes to mount on the cluster."},"___setupTask":{"oneOf":[{"$ref":"#\/definitions\/SetupTask"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Specifies a setup task which can be used to customize the compute nodes of the cluster."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Node setup settings."},"___scaleSettings":{"oneOf":[{"$eref":{"description":"At least one of manual or autoScale settings must be specified. Only one of manual or autoScale settings can be specified. If autoScale settings are specified, the system automatically scales the cluster up and down (within the supplied limits) based on the pending jobs on the cluster.","type":"object","properties":{"___manual":{"oneOf":[{"$ref":"#\/definitions\/ManualScaleSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Manual scale settings for the cluster."},"___autoScale":{"oneOf":[{"$ref":"#\/definitions\/AutoScaleSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Auto-scale settings for the cluster. The system automatically scales the cluster up and down (within minimumNodeCount and maximumNodeCount) based on the number of queued and running jobs assigned to the cluster."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"At least one of manual or autoScale settings must be specified. Only one of manual or autoScale settings can be specified. If autoScale settings are specified, the system automatically scales the cluster up and down (within the supplied limits) based on the pending jobs on the cluster."},"___userAccountSettings":{"oneOf":[{"$eref":{"description":"Settings for user account that gets created on each on the nodes of a cluster.","type":"object","properties":{"___adminUserSshPublicKey":{"description":"SSH public key of the administrator user account.","type":"string"},"___adminUserName":{"description":"Name of the administrator user account which can be used to SSH to nodes.","type":"string"},"___adminUserPassword":{"description":"Password of the administrator user account.","type":"string"}},"required":["adminUserName"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Settings for user account that gets created on each on the nodes of a cluster."},"___subnet":{"oneOf":[{"$eref":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___vmSize":{"description":"The size of the virtual machines in the cluster. All nodes in a cluster have the same VM size. For information about available VM sizes for clusters using images from the Virtual Machines Marketplace see Sizes for Virtual Machines (Linux). Batch AI service supports all Azure VM sizes except STANDARD_A0 and those with premium storage (STANDARD_GS, STANDARD_DS, and STANDARD_DSV2 series).","type":"string"}},"required":["userAccountSettings","vmSize"]},"_88CNTKsettings":{"description":"CNTK (aka Microsoft Cognitive Toolkit) job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script or cntk executable.","type":"string"},"___pythonScriptFilePath":{"description":"Python script to execute. This property can be specified only if the languageType is 'Python'.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter. This property can be specified only if the languageType is 'Python'.","type":"string"},"___configFilePath":{"description":"Specifies the path of the BrainScript config file. This property can be specified only if the languageType is 'BrainScript'.","type":"string"},"___languageType":{"description":"The language to use for launching CNTK (aka Microsoft Cognitive Toolkit) job. Valid values are 'BrainScript' or 'Python'.","type":"string"}}},"_88FileServerBaseProperties":{"description":"The properties of a file server.","type":"object","properties":{"___sshConfiguration":{"oneOf":[{"$eref":{"description":"SSH configuration.","type":"object","properties":{"___userAccountSettings":{"oneOf":[{"$ref":"#\/definitions\/UserAccountSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Settings for user account that gets created on each on the nodes of a cluster."},"___publicIPsToAllow":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"List of source IP ranges to allow SSH connection from. The default value is '*' (all source IPs are allowed). Maximum number of IP ranges that can be specified is 400."}},"required":["userAccountSettings"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"SSH configuration."},"___dataDisks":{"oneOf":[{"$eref":{"description":"Data disks settings.","type":"object","properties":{"___storageAccountType":{"oneOf":[{"type":"string","enum":["Standard_LRS","Premium_LRS"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Type of storage account to be used on the disk. Possible values are: Standard_LRS or Premium_LRS. Premium storage account type can only be used with VM sizes supporting premium storage."},"___diskSizeInGB":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Disk size in GB for the blank data disks."},"___diskCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of data disks attached to the File Server. If multiple disks attached, they will be configured in RAID level 0."},"___cachingType":{"oneOf":[{"type":"string","enum":["none","readonly","readwrite"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Caching type for the disks. Available values are none (default), readonly, readwrite. Caching type can be set only for VM sizes supporting premium storage."}},"required":["diskCount","diskSizeInGB","storageAccountType"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Data disks settings."},"___subnet":{"oneOf":[{"$eref":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___vmSize":{"description":"The size of the virtual machine for the File Server. For information about available VM sizes from the Virtual Machines Marketplace, see Sizes for Virtual Machines (Linux).","type":"string"}},"required":["dataDisks","sshConfiguration","vmSize"]},"_88AzureStorageCredentialsInfo":{"description":"Azure storage account credentials.","type":"object","properties":{"___accountKey":{"description":"Storage account key. One of accountKey or accountKeySecretReference must be specified.","type":"string"},"___accountKeySecretReference":{"oneOf":[{"$eref":{"description":"Key Vault Secret reference.","type":"object","properties":{"___secretUrl":{"description":"The URL referencing a secret in the Key Vault.","type":"string"},"___sourceVault":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."}},"required":["secretUrl","sourceVault"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Key Vault Secret reference."}}},"_88TensorFlowSettings":{"description":"TensorFlow job settings.","type":"object","properties":{"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"},"___masterCommandLineArgs":{"description":"Command line arguments that need to be passed to the python script for the master task.","type":"string"},"___parameterServerCommandLineArgs":{"description":"Command line arguments that need to be passed to the python script for the parameter server. Optional for single process jobs.","type":"string"},"___parameterServerCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The number of parameter server tasks. If specified, the value must be less than or equal to nodeCount. If not specified, the default value is equal to 1 for distributed TensorFlow training. This property can be specified only for distributed TensorFlow training."},"___workerCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The number of worker tasks. If specified, the value must be less than or equal to (nodeCount * numberOfGPUs per VM). If not specified, the default value is equal to nodeCount. This property can be specified only for distributed TensorFlow training."},"___workerCommandLineArgs":{"description":"Command line arguments that need to be passed to the python script for the worker task. Optional for single process jobs.","type":"string"}},"required":["pythonScriptFilePath"]},"_88PerformanceCountersSettings":{"description":"Performance counters reporting settings.","type":"object","properties":{"___appInsightsReference":{"oneOf":[{"$eref":{"description":"Azure Application Insights information for performance counters reporting.","type":"object","properties":{"___instrumentationKeySecretReference":{"oneOf":[{"$ref":"#\/definitions\/KeyVaultSecretReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Key Vault Secret reference."},"___component":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___instrumentationKey":{"description":"Value of the Azure Application Insights instrumentation key.","type":"string"}},"required":["component"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Azure Application Insights information for performance counters reporting."}},"required":["appInsightsReference"]},"_88workspaces_fileServers_childResource":{"description":"Microsoft.BatchAI\/workspaces\/fileServers","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the file server within the specified resource group. File server names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["fileServers"]},"___properties":{"oneOf":[{"$eref":{"description":"The properties of a file server.","type":"object","properties":{"___sshConfiguration":{"oneOf":[{"$ref":"#\/definitions\/SshConfiguration"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"SSH configuration."},"___dataDisks":{"oneOf":[{"$ref":"#\/definitions\/DataDisks"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Data disks settings."},"___subnet":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___vmSize":{"description":"The size of the virtual machine for the File Server. For information about available VM sizes from the Virtual Machines Marketplace, see Sizes for Virtual Machines (Linux).","type":"string"}},"required":["dataDisks","sshConfiguration","vmSize"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The properties of a file server."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]},"_88InputDirectory":{"description":"Input directory for the job.","type":"object","properties":{"___id":{"description":"The ID for the input directory. The job can use AZ_BATCHAI_INPUT_<id> environment variable to find the directory path, where <id> is the value of id attribute.","type":"string"},"___path":{"description":"The path to the input directory.","type":"string"}},"required":["id","path"]},"_88PyTorchSettings":{"description":"pyTorch job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"},"___communicationBackend":{"description":"Type of the communication backend for distributed jobs. Valid values are 'TCP', 'Gloo' or 'MPI'. Not required for non-distributed jobs.","type":"string"}},"required":["pythonScriptFilePath"]},"_88CaffeSettings":{"description":"Caffe job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the Caffe job.","type":"string"},"___pythonScriptFilePath":{"description":"Python script to execute. This property cannot be specified if configFilePath is specified.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter. The property can be specified only if the pythonScriptFilePath is specified.","type":"string"},"___configFilePath":{"description":"Path of the config file for the job. This property cannot be specified if pythonScriptFilePath is specified.","type":"string"}}},"_88AzureBlobFileSystemReference":{"description":"Azure Blob Storage Container mounting configuration.","type":"object","properties":{"___mountOptions":{"description":"Mount options for mounting blobfuse file system.","type":"string"},"___relativeMountPath":{"description":"The relative path on the compute node where the Azure File container will be mounted. Note that all cluster level containers will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level containers will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"},"___containerName":{"description":"Name of the Azure Blob Storage container to mount on the cluster.","type":"string"},"___accountName":{"description":"Name of the Azure storage account.","type":"string"},"___credentials":{"oneOf":[{"$eref":{"description":"Azure storage account credentials.","type":"object","properties":{"___accountKey":{"description":"Storage account key. One of accountKey or accountKeySecretReference must be specified.","type":"string"},"___accountKeySecretReference":{"oneOf":[{"$ref":"#\/definitions\/KeyVaultSecretReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Key Vault Secret reference."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Azure storage account credentials."}},"required":["accountName","containerName","credentials","relativeMountPath"]},"_88SetupTask":{"description":"Specifies a setup task which can be used to customize the compute nodes of the cluster.","type":"object","properties":{"___secrets":{"oneOf":[{"type":"array","items":{"$eref":{"description":"An environment variable with secret value definition.","type":"object","properties":{"___name":{"description":"The name of the environment variable to store the secret value.","type":"string"},"___value":{"description":"The value of the environment variable. This value will never be reported back by Batch AI.","type":"string"},"___valueSecretReference":{"oneOf":[{"$ref":"#\/definitions\/KeyVaultSecretReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Key Vault Secret reference."}},"required":["name"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A collection of user defined environment variables with secret values to be set for the setup task. Server will never report values of these variables back."},"___stdOutErrPathPrefix":{"description":"The prefix of a path where the Batch AI service will upload the stdout, stderr and execution log of the setup task.","type":"string"},"___commandLine":{"description":"The command line to be executed on each cluster's node after it being allocated or rebooted. The command is executed in a bash subshell as a root.","type":"string"},"___environmentVariables":{"oneOf":[{"type":"array","items":{"$eref":{"description":"An environment variable definition.","type":"object","properties":{"___name":{"description":"The name of the environment variable.","type":"string"},"___value":{"description":"The value of the environment variable.","type":"string"}},"required":["name","value"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A collection of user defined environment variables to be set for setup task."}},"required":["commandLine","stdOutErrPathPrefix"]},"_88AzureFileShareReference":{"description":"Azure File Share mounting configuration.","type":"object","properties":{"___directoryMode":{"default":"0777","description":"File mode for directories on the mounted file share. Default value: 0777.","type":"string"},"___fileMode":{"default":"0777","description":"File mode for files on the mounted file share. Default value: 0777.","type":"string"},"___relativeMountPath":{"description":"The relative path on the compute node where the Azure File share will be mounted. Note that all cluster level file shares will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level file shares will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"},"___azureFileUrl":{"description":"URL to access the Azure File.","type":"string"},"___accountName":{"description":"Name of the Azure storage account.","type":"string"},"___credentials":{"oneOf":[{"$eref":{"description":"Azure storage account credentials.","type":"object","properties":{"___accountKey":{"description":"Storage account key. One of accountKey or accountKeySecretReference must be specified.","type":"string"},"___accountKeySecretReference":{"oneOf":[{"$ref":"#\/definitions\/KeyVaultSecretReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Key Vault Secret reference."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Azure storage account credentials."}},"required":["accountName","azureFileUrl","credentials","relativeMountPath"]},"_88workspaces_clusters_childResource":{"description":"Microsoft.BatchAI\/workspaces\/clusters","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the cluster within the specified resource group. Cluster names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["clusters"]},"___properties":{"oneOf":[{"$eref":{"description":"The properties of a Cluster.","type":"object","properties":{"___vmPriority":{"oneOf":[{"type":"string","enum":["dedicated","lowpriority"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"VM priority. Allowed values are: dedicated (default) and lowpriority."},"___virtualMachineConfiguration":{"oneOf":[{"$ref":"#\/definitions\/VirtualMachineConfiguration"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"VM configuration."},"___nodeSetup":{"oneOf":[{"$ref":"#\/definitions\/NodeSetup"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Node setup settings."},"___scaleSettings":{"oneOf":[{"$ref":"#\/definitions\/ScaleSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"At least one of manual or autoScale settings must be specified. Only one of manual or autoScale settings can be specified. If autoScale settings are specified, the system automatically scales the cluster up and down (within the supplied limits) based on the pending jobs on the cluster."},"___userAccountSettings":{"oneOf":[{"$ref":"#\/definitions\/UserAccountSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Settings for user account that gets created on each on the nodes of a cluster."},"___subnet":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___vmSize":{"description":"The size of the virtual machines in the cluster. All nodes in a cluster have the same VM size. For information about available VM sizes for clusters using images from the Virtual Machines Marketplace see Sizes for Virtual Machines (Linux). Batch AI service supports all Azure VM sizes except STANDARD_A0 and those with premium storage (STANDARD_GS, STANDARD_DS, and STANDARD_DSV2 series).","type":"string"}},"required":["userAccountSettings","vmSize"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The properties of a Cluster."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]},"_88PrivateRegistryCredentials":{"description":"Credentials to access a container image in a private repository.","type":"object","properties":{"___password":{"description":"User password to login to the docker repository. One of password or passwordSecretReference must be specified.","type":"string"},"___username":{"description":"User name to login to the repository.","type":"string"},"___passwordSecretReference":{"oneOf":[{"$eref":{"description":"Key Vault Secret reference.","type":"object","properties":{"___secretUrl":{"description":"The URL referencing a secret in the Key Vault.","type":"string"},"___sourceVault":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."}},"required":["secretUrl","sourceVault"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Key Vault Secret reference."}},"required":["username"]},"_88ResourceId":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]},"_88SshConfiguration":{"description":"SSH configuration.","type":"object","properties":{"___userAccountSettings":{"oneOf":[{"$eref":{"description":"Settings for user account that gets created on each on the nodes of a cluster.","type":"object","properties":{"___adminUserSshPublicKey":{"description":"SSH public key of the administrator user account.","type":"string"},"___adminUserName":{"description":"Name of the administrator user account which can be used to SSH to nodes.","type":"string"},"___adminUserPassword":{"description":"Password of the administrator user account.","type":"string"}},"required":["adminUserName"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Settings for user account that gets created on each on the nodes of a cluster."},"___publicIPsToAllow":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"List of source IP ranges to allow SSH connection from. The default value is '*' (all source IPs are allowed). Maximum number of IP ranges that can be specified is 400."}},"required":["userAccountSettings"]},"_88workspaces_experiments_childResource":{"description":"Microsoft.BatchAI\/workspaces\/experiments","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the experiment. Experiment names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["experiments"]},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","type"]},"_88MountVolumes":{"description":"Details of volumes to mount on the cluster.","type":"object","properties":{"___azureBlobFileSystems":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Azure Blob Storage Container mounting configuration.","type":"object","properties":{"___mountOptions":{"description":"Mount options for mounting blobfuse file system.","type":"string"},"___relativeMountPath":{"description":"The relative path on the compute node where the Azure File container will be mounted. Note that all cluster level containers will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level containers will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"},"___containerName":{"description":"Name of the Azure Blob Storage container to mount on the cluster.","type":"string"},"___accountName":{"description":"Name of the Azure storage account.","type":"string"},"___credentials":{"oneOf":[{"$ref":"#\/definitions\/AzureStorageCredentialsInfo"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Azure storage account credentials."}},"required":["accountName","containerName","credentials","relativeMountPath"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A collection of Azure Blob Containers that are to be mounted to the cluster nodes."},"___unmanagedFileSystems":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Unmanaged file system mounting configuration.","type":"object","properties":{"___mountCommand":{"description":"Mount command line. Note, Batch AI will append mount path to the command on its own.","type":"string"},"___relativeMountPath":{"description":"The relative path on the compute node where the unmanaged file system will be mounted. Note that all cluster level unmanaged file systems will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level unmanaged file systems will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"}},"required":["mountCommand","relativeMountPath"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A collection of unmanaged file systems that are to be mounted to the cluster nodes."},"___azureFileShares":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Azure File Share mounting configuration.","type":"object","properties":{"___directoryMode":{"default":"0777","description":"File mode for directories on the mounted file share. Default value: 0777.","type":"string"},"___fileMode":{"default":"0777","description":"File mode for files on the mounted file share. Default value: 0777.","type":"string"},"___relativeMountPath":{"description":"The relative path on the compute node where the Azure File share will be mounted. Note that all cluster level file shares will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level file shares will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"},"___azureFileUrl":{"description":"URL to access the Azure File.","type":"string"},"___accountName":{"description":"Name of the Azure storage account.","type":"string"},"___credentials":{"oneOf":[{"$ref":"#\/definitions\/AzureStorageCredentialsInfo"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Azure storage account credentials."}},"required":["accountName","azureFileUrl","credentials","relativeMountPath"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A collection of Azure File Shares that are to be mounted to the cluster nodes."},"___fileServers":{"oneOf":[{"type":"array","items":{"$eref":{"description":"File Server mounting configuration.","type":"object","properties":{"___sourceDirectory":{"description":"File Server directory that needs to be mounted. If this property is not specified, the entire File Server will be mounted.","type":"string"},"___mountOptions":{"description":"Mount options to be passed to mount command.","type":"string"},"___fileServer":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___relativeMountPath":{"description":"The relative path on the compute node where the File Server will be mounted. Note that all cluster level file servers will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level file servers will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"}},"required":["fileServer","relativeMountPath"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A collection of Batch AI File Servers that are to be mounted to the cluster nodes."}}},"_88EnvironmentVariable":{"description":"An environment variable definition.","type":"object","properties":{"___name":{"description":"The name of the environment variable.","type":"string"},"___value":{"description":"The value of the environment variable.","type":"string"}},"required":["name","value"]},"_88CustomMpiSettings":{"description":"Custom MPI job settings.","type":"object","properties":{"___processCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___commandLine":{"description":"The command line to be executed by mpi runtime on each compute node.","type":"string"}},"required":["commandLine"]},"_88CustomToolkitSettings":{"description":"Custom tool kit job settings.","type":"object","properties":{"___commandLine":{"description":"The command line to execute on the master node.","type":"string"}}},"_88HorovodSettings":{"description":"Specifies the settings for Horovod job.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"}},"required":["pythonScriptFilePath"]},"_88EnvironmentVariableWithSecretValue":{"description":"An environment variable with secret value definition.","type":"object","properties":{"___name":{"description":"The name of the environment variable to store the secret value.","type":"string"},"___value":{"description":"The value of the environment variable. This value will never be reported back by Batch AI.","type":"string"},"___valueSecretReference":{"oneOf":[{"$eref":{"description":"Key Vault Secret reference.","type":"object","properties":{"___secretUrl":{"description":"The URL referencing a secret in the Key Vault.","type":"string"},"___sourceVault":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."}},"required":["secretUrl","sourceVault"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Key Vault Secret reference."}},"required":["name"]},"_88VirtualMachineConfiguration":{"description":"VM configuration.","type":"object","properties":{"___imageReference":{"oneOf":[{"$eref":{"description":"The OS image reference.","type":"object","properties":{"___version":{"description":"Version of the image.","type":"string"},"___offer":{"description":"Offer of the image.","type":"string"},"___virtualMachineImageId":{"description":"The ARM resource identifier of the virtual machine image for the compute nodes. This is of the form \/subscriptions\/{subscriptionId}\/resourceGroups\/{resourceGroup}\/providers\/Microsoft.Compute\/images\/{imageName}. The virtual machine image must be in the same region and subscription as the cluster. For information about the firewall settings for the Batch node agent to communicate with the Batch service see https:\/\/docs.microsoft.com\/en-us\/azure\/batch\/batch-api-basics#virtual-network-vnet-and-firewall-configuration. Note, you need to provide publisher, offer and sku of the base OS image of which the custom image has been derived from.","type":"string"},"___sku":{"description":"SKU of the image.","type":"string"},"___publisher":{"description":"Publisher of the image.","type":"string"}},"required":["offer","publisher","sku"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The OS image reference."}}},"_88workspaces_experiments_jobs_childResource":{"description":"Microsoft.BatchAI\/workspaces\/experiments\/jobs","type":"object","properties":{"___name":{"oneOf":[{"minLength":1,"pattern":"^[-\\w_]+$","type":"string","maxLength":64},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the job within the specified resource group. Job names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long."},"___type":{"type":"string","enum":["jobs"]},"___properties":{"oneOf":[{"$eref":{"description":"The properties of a Batch AI Job.","type":"object","properties":{"___secrets":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/EnvironmentVariableWithSecretValue"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of user defined environment variables with secret values which will be setup for the job. Server will never report values of these variables back."},"___schedulingPriority":{"oneOf":[{"type":"string","enum":["low","normal","high"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Scheduling priority associated with the job. Possible values: low, normal, high."},"___constraints":{"oneOf":[{"$ref":"#\/definitions\/JobBasePropertiesConstraints"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Constraints associated with the Job."},"___outputDirectories":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/OutputDirectory"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of output directories for the job."},"___jobPreparation":{"oneOf":[{"$ref":"#\/definitions\/JobPreparation"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Job preparation settings."},"___inputDirectories":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/InputDirectory"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of input directories for the job."},"___chainerSettings":{"oneOf":[{"$ref":"#\/definitions\/ChainerSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Chainer job settings."},"___cluster":{"oneOf":[{"$ref":"#\/definitions\/ResourceId"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___nodeCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of compute nodes to run the job on. The job will be gang scheduled on that many compute nodes."},"___mountVolumes":{"oneOf":[{"$ref":"#\/definitions\/MountVolumes"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Details of volumes to mount on the cluster."},"___customToolkitSettings":{"oneOf":[{"$ref":"#\/definitions\/CustomToolkitSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Custom tool kit job settings."},"___caffe2Settings":{"oneOf":[{"$ref":"#\/definitions\/Caffe2Settings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Caffe2 job settings."},"___cntkSettings":{"oneOf":[{"$ref":"#\/definitions\/CNTKsettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"CNTK (aka Microsoft Cognitive Toolkit) job settings."},"___tensorFlowSettings":{"oneOf":[{"$ref":"#\/definitions\/TensorFlowSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"TensorFlow job settings."},"___stdOutErrPathPrefix":{"description":"The path where the Batch AI service will store stdout, stderror and execution log of the job.","type":"string"},"___pyTorchSettings":{"oneOf":[{"$ref":"#\/definitions\/PyTorchSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"pyTorch job settings."},"___customMpiSettings":{"oneOf":[{"$ref":"#\/definitions\/CustomMpiSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Custom MPI job settings."},"___horovodSettings":{"oneOf":[{"$ref":"#\/definitions\/HorovodSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Specifies the settings for Horovod job."},"___caffeSettings":{"oneOf":[{"$ref":"#\/definitions\/CaffeSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Caffe job settings."},"___environmentVariables":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/EnvironmentVariable"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A list of user defined environment variables which will be setup for the job."},"___containerSettings":{"oneOf":[{"$ref":"#\/definitions\/ContainerSettings"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Docker container settings."}},"required":["cluster","nodeCount","stdOutErrPathPrefix"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The properties of a Batch AI Job."},"___apiVersion":{"type":"string","enum":["2018-05-01"]}},"required":["apiVersion","name","properties","type"]},"_88Caffe2Settings":{"description":"Caffe2 job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"}},"required":["pythonScriptFilePath"]},"_88OutputDirectory":{"description":"Output directory for the job.","type":"object","properties":{"___pathPrefix":{"description":"The prefix path where the output directory will be created. Note, this is an absolute path to prefix. E.g. $AZ_BATCHAI_MOUNT_ROOT\/MyNFS\/MyLogs. The full path to the output directory by combining pathPrefix, jobOutputDirectoryPathSegment (reported by get job) and pathSuffix.","type":"string"},"___pathSuffix":{"description":"The suffix path where the output directory will be created. E.g. models. You can find the full path to the output directory by combining pathPrefix, jobOutputDirectoryPathSegment (reported by get job) and pathSuffix.","type":"string"},"___id":{"description":"The ID of the output directory. The job can use AZ_BATCHAI_OUTPUT_<id> environment variable to find the directory path, where <id> is the value of id attribute.","type":"string"}},"required":["id","pathPrefix"]},"_88AutoScaleSettings":{"description":"Auto-scale settings for the cluster. The system automatically scales the cluster up and down (within minimumNodeCount and maximumNodeCount) based on the number of queued and running jobs assigned to the cluster.","type":"object","properties":{"___initialNodeCount":{"oneOf":[{"default":"0","type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The number of compute nodes to allocate on cluster creation. Note that this value is used only during cluster creation. Default: 0."},"___minimumNodeCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The minimum number of compute nodes the Batch AI service will try to allocate for the cluster. Note, the actual number of nodes can be less than the specified value if the subscription has not enough quota to fulfill the request."},"___maximumNodeCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The maximum number of compute nodes the cluster can have."}},"required":["maximumNodeCount","minimumNodeCount"]},"_88UnmanagedFileSystemReference":{"description":"Unmanaged file system mounting configuration.","type":"object","properties":{"___mountCommand":{"description":"Mount command line. Note, Batch AI will append mount path to the command on its own.","type":"string"},"___relativeMountPath":{"description":"The relative path on the compute node where the unmanaged file system will be mounted. Note that all cluster level unmanaged file systems will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level unmanaged file systems will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"}},"required":["mountCommand","relativeMountPath"]},"_88JobBaseProperties":{"description":"The properties of a Batch AI Job.","type":"object","properties":{"___secrets":{"oneOf":[{"type":"array","items":{"$eref":{"description":"An environment variable with secret value definition.","type":"object","properties":{"___name":{"description":"The name of the environment variable to store the secret value.","type":"string"},"___value":{"description":"The value of the environment variable. This value will never be reported back by Batch AI.","type":"string"},"___valueSecretReference":{"oneOf":[{"$ref":"#\/definitions\/KeyVaultSecretReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Key Vault Secret reference."}},"required":["name"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A list of user defined environment variables with secret values which will be setup for the job. Server will never report values of these variables back."},"___schedulingPriority":{"oneOf":[{"type":"string","enum":["low","normal","high"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Scheduling priority associated with the job. Possible values: low, normal, high."},"___constraints":{"oneOf":[{"$eref":{"description":"Constraints associated with the Job.","type":"object","properties":{"___maxWallClockTime":{"default":"7.00:00:00","format":"duration","description":"Max time the job can run. Default value: 1 week.","type":"string"}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Constraints associated with the Job."},"___outputDirectories":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Output directory for the job.","type":"object","properties":{"___pathPrefix":{"description":"The prefix path where the output directory will be created. Note, this is an absolute path to prefix. E.g. $AZ_BATCHAI_MOUNT_ROOT\/MyNFS\/MyLogs. The full path to the output directory by combining pathPrefix, jobOutputDirectoryPathSegment (reported by get job) and pathSuffix.","type":"string"},"___pathSuffix":{"description":"The suffix path where the output directory will be created. E.g. models. You can find the full path to the output directory by combining pathPrefix, jobOutputDirectoryPathSegment (reported by get job) and pathSuffix.","type":"string"},"___id":{"description":"The ID of the output directory. The job can use AZ_BATCHAI_OUTPUT_<id> environment variable to find the directory path, where <id> is the value of id attribute.","type":"string"}},"required":["id","pathPrefix"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A list of output directories for the job."},"___jobPreparation":{"oneOf":[{"$eref":{"description":"Job preparation settings.","type":"object","properties":{"___commandLine":{"description":"The command line to execute. If containerSettings is specified on the job, this commandLine will be executed in the same container as job. Otherwise it will be executed on the node.","type":"string"}},"required":["commandLine"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Job preparation settings."},"___inputDirectories":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Input directory for the job.","type":"object","properties":{"___id":{"description":"The ID for the input directory. The job can use AZ_BATCHAI_INPUT_<id> environment variable to find the directory path, where <id> is the value of id attribute.","type":"string"},"___path":{"description":"The path to the input directory.","type":"string"}},"required":["id","path"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A list of input directories for the job."},"___chainerSettings":{"oneOf":[{"$eref":{"description":"Chainer job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"}},"required":["pythonScriptFilePath"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Chainer job settings."},"___cluster":{"oneOf":[{"$eref":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___nodeCount":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Number of compute nodes to run the job on. The job will be gang scheduled on that many compute nodes."},"___mountVolumes":{"oneOf":[{"$eref":{"description":"Details of volumes to mount on the cluster.","type":"object","properties":{"___azureBlobFileSystems":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/AzureBlobFileSystemReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of Azure Blob Containers that are to be mounted to the cluster nodes."},"___unmanagedFileSystems":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/UnmanagedFileSystemReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of unmanaged file systems that are to be mounted to the cluster nodes."},"___azureFileShares":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/AzureFileShareReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of Azure File Shares that are to be mounted to the cluster nodes."},"___fileServers":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/FileServerReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of Batch AI File Servers that are to be mounted to the cluster nodes."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Details of volumes to mount on the cluster."},"___customToolkitSettings":{"oneOf":[{"$eref":{"description":"Custom tool kit job settings.","type":"object","properties":{"___commandLine":{"description":"The command line to execute on the master node.","type":"string"}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Custom tool kit job settings."},"___caffe2Settings":{"oneOf":[{"$eref":{"description":"Caffe2 job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"}},"required":["pythonScriptFilePath"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Caffe2 job settings."},"___cntkSettings":{"oneOf":[{"$eref":{"description":"CNTK (aka Microsoft Cognitive Toolkit) job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script or cntk executable.","type":"string"},"___pythonScriptFilePath":{"description":"Python script to execute. This property can be specified only if the languageType is 'Python'.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter. This property can be specified only if the languageType is 'Python'.","type":"string"},"___configFilePath":{"description":"Specifies the path of the BrainScript config file. This property can be specified only if the languageType is 'BrainScript'.","type":"string"},"___languageType":{"description":"The language to use for launching CNTK (aka Microsoft Cognitive Toolkit) job. Valid values are 'BrainScript' or 'Python'.","type":"string"}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"CNTK (aka Microsoft Cognitive Toolkit) job settings."},"___tensorFlowSettings":{"oneOf":[{"$eref":{"description":"TensorFlow job settings.","type":"object","properties":{"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"},"___masterCommandLineArgs":{"description":"Command line arguments that need to be passed to the python script for the master task.","type":"string"},"___parameterServerCommandLineArgs":{"description":"Command line arguments that need to be passed to the python script for the parameter server. Optional for single process jobs.","type":"string"},"___parameterServerCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The number of parameter server tasks. If specified, the value must be less than or equal to nodeCount. If not specified, the default value is equal to 1 for distributed TensorFlow training. This property can be specified only for distributed TensorFlow training."},"___workerCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The number of worker tasks. If specified, the value must be less than or equal to (nodeCount * numberOfGPUs per VM). If not specified, the default value is equal to nodeCount. This property can be specified only for distributed TensorFlow training."},"___workerCommandLineArgs":{"description":"Command line arguments that need to be passed to the python script for the worker task. Optional for single process jobs.","type":"string"}},"required":["pythonScriptFilePath"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"TensorFlow job settings."},"___stdOutErrPathPrefix":{"description":"The path where the Batch AI service will store stdout, stderror and execution log of the job.","type":"string"},"___pyTorchSettings":{"oneOf":[{"$eref":{"description":"pyTorch job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"},"___communicationBackend":{"description":"Type of the communication backend for distributed jobs. Valid values are 'TCP', 'Gloo' or 'MPI'. Not required for non-distributed jobs.","type":"string"}},"required":["pythonScriptFilePath"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"pyTorch job settings."},"___customMpiSettings":{"oneOf":[{"$eref":{"description":"Custom MPI job settings.","type":"object","properties":{"___processCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___commandLine":{"description":"The command line to be executed by mpi runtime on each compute node.","type":"string"}},"required":["commandLine"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Custom MPI job settings."},"___horovodSettings":{"oneOf":[{"$eref":{"description":"Specifies the settings for Horovod job.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the python script.","type":"string"},"___pythonScriptFilePath":{"description":"The python script to execute.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter.","type":"string"}},"required":["pythonScriptFilePath"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Specifies the settings for Horovod job."},"___caffeSettings":{"oneOf":[{"$eref":{"description":"Caffe job settings.","type":"object","properties":{"___commandLineArgs":{"description":"Command line arguments that need to be passed to the Caffe job.","type":"string"},"___pythonScriptFilePath":{"description":"Python script to execute. This property cannot be specified if configFilePath is specified.","type":"string"},"___processCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Number of processes to launch for the job execution. The default value for this property is equal to nodeCount property"},"___pythonInterpreterPath":{"description":"The path to the Python interpreter. The property can be specified only if the pythonScriptFilePath is specified.","type":"string"},"___configFilePath":{"description":"Path of the config file for the job. This property cannot be specified if pythonScriptFilePath is specified.","type":"string"}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Caffe job settings."},"___environmentVariables":{"oneOf":[{"type":"array","items":{"$eref":{"description":"An environment variable definition.","type":"object","properties":{"___name":{"description":"The name of the environment variable.","type":"string"},"___value":{"description":"The value of the environment variable.","type":"string"}},"required":["name","value"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A list of user defined environment variables which will be setup for the job."},"___containerSettings":{"oneOf":[{"$eref":{"description":"Docker container settings.","type":"object","properties":{"___imageSourceRegistry":{"oneOf":[{"$ref":"#\/definitions\/ImageSourceRegistry"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Information about docker image for the job."},"___shmSize":{"description":"Size of \/dev\/shm. Please refer to docker documentation for supported argument formats.","type":"string"}},"required":["imageSourceRegistry"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Docker container settings."}},"required":["cluster","nodeCount","stdOutErrPathPrefix"]},"_88KeyVaultSecretReference":{"description":"Key Vault Secret reference.","type":"object","properties":{"___secretUrl":{"description":"The URL referencing a secret in the Key Vault.","type":"string"},"___sourceVault":{"oneOf":[{"$eref":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."}},"required":["secretUrl","sourceVault"]},"_88UserAccountSettings":{"description":"Settings for user account that gets created on each on the nodes of a cluster.","type":"object","properties":{"___adminUserSshPublicKey":{"description":"SSH public key of the administrator user account.","type":"string"},"___adminUserName":{"description":"Name of the administrator user account which can be used to SSH to nodes.","type":"string"},"___adminUserPassword":{"description":"Password of the administrator user account.","type":"string"}},"required":["adminUserName"]},"_88ContainerSettings":{"description":"Docker container settings.","type":"object","properties":{"___imageSourceRegistry":{"oneOf":[{"$eref":{"description":"Information about docker image for the job.","type":"object","properties":{"___image":{"description":"The name of the image in the image repository.","type":"string"},"___serverUrl":{"description":"URL for image repository.","type":"string"},"___credentials":{"oneOf":[{"$ref":"#\/definitions\/PrivateRegistryCredentials"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Credentials to access a container image in a private repository."}},"required":["image"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Information about docker image for the job."},"___shmSize":{"description":"Size of \/dev\/shm. Please refer to docker documentation for supported argument formats.","type":"string"}},"required":["imageSourceRegistry"]},"_88NodeSetup":{"description":"Node setup settings.","type":"object","properties":{"___performanceCountersSettings":{"oneOf":[{"$eref":{"description":"Performance counters reporting settings.","type":"object","properties":{"___appInsightsReference":{"oneOf":[{"$ref":"#\/definitions\/AppInsightsReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Azure Application Insights information for performance counters reporting."}},"required":["appInsightsReference"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Performance counters reporting settings."},"___mountVolumes":{"oneOf":[{"$eref":{"description":"Details of volumes to mount on the cluster.","type":"object","properties":{"___azureBlobFileSystems":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/AzureBlobFileSystemReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of Azure Blob Containers that are to be mounted to the cluster nodes."},"___unmanagedFileSystems":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/UnmanagedFileSystemReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of unmanaged file systems that are to be mounted to the cluster nodes."},"___azureFileShares":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/AzureFileShareReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of Azure File Shares that are to be mounted to the cluster nodes."},"___fileServers":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/FileServerReference"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of Batch AI File Servers that are to be mounted to the cluster nodes."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Details of volumes to mount on the cluster."},"___setupTask":{"oneOf":[{"$eref":{"description":"Specifies a setup task which can be used to customize the compute nodes of the cluster.","type":"object","properties":{"___secrets":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/EnvironmentVariableWithSecretValue"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of user defined environment variables with secret values to be set for the setup task. Server will never report values of these variables back."},"___stdOutErrPathPrefix":{"description":"The prefix of a path where the Batch AI service will upload the stdout, stderr and execution log of the setup task.","type":"string"},"___commandLine":{"description":"The command line to be executed on each cluster's node after it being allocated or rebooted. The command is executed in a bash subshell as a root.","type":"string"},"___environmentVariables":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/EnvironmentVariable"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A collection of user defined environment variables to be set for setup task."}},"required":["commandLine","stdOutErrPathPrefix"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Specifies a setup task which can be used to customize the compute nodes of the cluster."}}},"_88FileServerReference":{"description":"File Server mounting configuration.","type":"object","properties":{"___sourceDirectory":{"description":"File Server directory that needs to be mounted. If this property is not specified, the entire File Server will be mounted.","type":"string"},"___mountOptions":{"description":"Mount options to be passed to mount command.","type":"string"},"___fileServer":{"oneOf":[{"$eref":{"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet.","type":"object","properties":{"___id":{"description":"The ID of the resource","type":"string"}},"required":["id"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Represents a resource ID. For example, for a subnet, it is the resource URL for the subnet."},"___relativeMountPath":{"description":"The relative path on the compute node where the File Server will be mounted. Note that all cluster level file servers will be mounted under $AZ_BATCHAI_MOUNT_ROOT location and all job level file servers will be mounted under $AZ_BATCHAI_JOB_MOUNT_ROOT.","type":"string"}},"required":["fileServer","relativeMountPath"]},"_88JobPreparation":{"description":"Job preparation settings.","type":"object","properties":{"___commandLine":{"description":"The command line to execute. If containerSettings is specified on the job, this commandLine will be executed in the same container as job. Otherwise it will be executed on the node.","type":"string"}},"required":["commandLine"]},"_88JobBasePropertiesConstraints":{"description":"Constraints associated with the Job.","type":"object","properties":{"___maxWallClockTime":{"default":"7.00:00:00","format":"duration","description":"Max time the job can run. Default value: 1 week.","type":"string"}}},"_88ImageReference":{"description":"The OS image reference.","type":"object","properties":{"___version":{"description":"Version of the image.","type":"string"},"___offer":{"description":"Offer of the image.","type":"string"},"___virtualMachineImageId":{"description":"The ARM resource identifier of the virtual machine image for the compute nodes. This is of the form \/subscriptions\/{subscriptionId}\/resourceGroups\/{resourceGroup}\/providers\/Microsoft.Compute\/images\/{imageName}. The virtual machine image must be in the same region and subscription as the cluster. For information about the firewall settings for the Batch node agent to communicate with the Batch service see https:\/\/docs.microsoft.com\/en-us\/azure\/batch\/batch-api-basics#virtual-network-vnet-and-firewall-configuration. Note, you need to provide publisher, offer and sku of the base OS image of which the custom image has been derived from.","type":"string"},"___sku":{"description":"SKU of the image.","type":"string"},"___publisher":{"description":"Publisher of the image.","type":"string"}},"required":["offer","publisher","sku"]},"_88ScaleSettings":{"description":"At least one of manual or autoScale settings must be specified. Only one of manual or autoScale settings can be specified. If autoScale settings are specified, the system automatically scales the cluster up and down (within the supplied limits) based on the pending jobs on the cluster.","type":"object","properties":{"___manual":{"oneOf":[{"$eref":{"description":"Manual scale settings for the cluster.","type":"object","properties":{"___nodeDeallocationOption":{"oneOf":[{"type":"string","enum":["requeue","terminate","waitforjobcompletion"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"An action to be performed when the cluster size is decreasing. The default value is requeue."},"___targetNodeCount":{"oneOf":[{"default":"0","type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The desired number of compute nodes in the Cluster. Default is 0."}},"required":["targetNodeCount"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Manual scale settings for the cluster."},"___autoScale":{"oneOf":[{"$eref":{"description":"Auto-scale settings for the cluster. The system automatically scales the cluster up and down (within minimumNodeCount and maximumNodeCount) based on the number of queued and running jobs assigned to the cluster.","type":"object","properties":{"___initialNodeCount":{"oneOf":[{"default":"0","type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The number of compute nodes to allocate on cluster creation. Note that this value is used only during cluster creation. Default: 0."},"___minimumNodeCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The minimum number of compute nodes the Batch AI service will try to allocate for the cluster. Note, the actual number of nodes can be less than the specified value if the subscription has not enough quota to fulfill the request."},"___maximumNodeCount":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The maximum number of compute nodes the cluster can have."}},"required":["maximumNodeCount","minimumNodeCount"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Auto-scale settings for the cluster. The system automatically scales the cluster up and down (within minimumNodeCount and maximumNodeCount) based on the number of queued and running jobs assigned to the cluster."}}},"_88ImageSourceRegistry":{"description":"Information about docker image for the job.","type":"object","properties":{"___image":{"description":"The name of the image in the image repository.","type":"string"},"___serverUrl":{"description":"URL for image repository.","type":"string"},"___credentials":{"oneOf":[{"$eref":{"description":"Credentials to access a container image in a private repository.","type":"object","properties":{"___password":{"description":"User password to login to the docker repository. One of password or passwordSecretReference must be specified.","type":"string"},"___username":{"description":"User name to login to the repository.","type":"string"},"___passwordSecretReference":{"oneOf":[{"$ref":"#\/definitions\/KeyVaultSecretReference"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Key Vault Secret reference."}},"required":["username"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Credentials to access a container image in a private repository."}},"required":["image"]}}}