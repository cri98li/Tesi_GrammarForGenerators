{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"#job-config-evaluated-v1","additionalProperties":false,"title":"Schema for Evaluated Job Config","type":"object","definitions":{"_88environment":{"patternProperties":{"___.*":{"oneOf":[{"type":"string","maxLength":4096},{"$eref":{"additionalProperties":false,"type":"object","properties":{"___value":{"type":"string"},"___encrypted":{"default":false,"type":"boolean"}},"required":["value"]}}]}},"additionalProperties":false},"_88notification-hipchat":{"additionalProperties":false,"properties":{"___url":{"description":"Hipchat v2 api url","type":"string"},"___room":{"description":"Room to be used for notification","type":"string"},"___enabled":{"description":"Used for enabling\/disabling notification","type":"boolean"},"___level":{"description":"Min level for the message to activate this notifier","type":"number"},"___token":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___value":{"type":"string"},"___encrypted":{"default":false,"type":"boolean"}},"required":["value"]},"description":"Hipchat API v2 token (personal\/ room) for notification","type":"object"},"___colors":{"description":"Color mapping","type":"object"}}},"_88encrypted-type":{"additionalProperties":false,"type":"object","properties":{"___value":{"type":"string"},"___encrypted":{"default":false,"type":"boolean"}},"required":["value"]},"_88notification-github":{"additionalProperties":true,"properties":{"___url":{"description":"Github API url base","type":"string"},"___enabled":{"description":"Used for enabling\/disabling notification","type":"boolean"},"___token":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___value":{"type":"string"},"___encrypted":{"default":false,"type":"boolean"}},"required":["value"]},"description":"Github Oauth token","type":"object"},"___level":{"description":"Min level for the message to activate this notifier","type":"number"}}},"_88host":{"description":"Proxy Host definition","additionalProperties":false,"type":"object","properties":{"___hostname":{"pattern":"^[a-zA-Z0-9\\-.\\s,]*[a-zA-Z0-9\\s\\-,]$","description":"Hostname(s) to be registered with proxy. If multiple hosts need to be specified, separate them using comma or space","type":"string"},"___enabled":{"description":"Is host enabled?","type":"boolean"},"___locations":{"patternProperties":{"___.*":{"$eref":{"description":"Proxy location definition for a given proxy path","additionalProperties":false,"type":"object","properties":{"___denied-acls":{"description":"List of Denied proxy ACLs","type":"array","items":{"type":"string"}},"___force-ssl":{"default":false,"description":"If SSL needs to be forced at the given path","type":"boolean"},"___allowed-acls":{"description":"List of Allowed proxy ACLs","type":"array","items":{"type":"string"}},"___enabled":{"description":"Is location enabled?","type":"boolean"},"___port":{"description":"Internal container port for proxy.","type":"number"},"___path":{"description":"Path to be used for proxy","type":"string"}}}}},"description":"Locations for given proxy host."}}},"_88location":{"description":"Proxy location definition for a given proxy path","additionalProperties":false,"type":"object","properties":{"___denied-acls":{"description":"List of Denied proxy ACLs","type":"array","items":{"type":"string"}},"___force-ssl":{"default":false,"description":"If SSL needs to be forced at the given path","type":"boolean"},"___allowed-acls":{"description":"List of Allowed proxy ACLs","type":"array","items":{"type":"string"}},"___enabled":{"description":"Is location enabled?","type":"boolean"},"___port":{"description":"Internal container port for proxy.","type":"number"},"___path":{"description":"Path to be used for proxy","type":"string"}}},"_88hook-list":{"patternProperties":{"___.*":{"$eref":{"enabled":{"type":"boolean"}}}},"type":"object"},"_88health":{"description":"Health check definition for proxy upstream","additionalProperties":false,"type":"object","properties":{"___interval":{"description":"Interval to be used for health check. e.g.: 30s to run health check every 30 seconds.","type":"string"},"___timeout":{"description":"Health check timeout represented in terms of seconds or minutes. e.g: 20s for timeout of 20 seconds","type":"string"},"___uri":{"description":"Path to be used for health check. If empty or not specified, tcp based check is used.","type":"string"}}},"_88deployer":{"additionalProperties":false,"type":"object","properties":{"___templates":{"type":"object"},"___deployment":{"$eref":{"additionalProperties":false,"properties":{"___name":{"type":"string","maxLength":512},"___version":{"type":"string","maxLength":100},"___type":{"enum":["blue-green","red-green","a\/b","custom"]},"___check":{"$ref":"#\/definitions\/deployment-check"},"___nodes":{"maximum":12,"type":"number","minimum":1},"___stop":{"type":"object","$ref":"#\/definitions\/deployment-stop"}}},"description":"Deployment configuration."},"___url":{"description":"URL for the deployer","type":"string"},"___proxy":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___upstreams":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/upstream"}},"description":"Backends associated with the proxy"},"___hosts":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/host"}},"description":"Hosts associated with the proxy"},"___listeners":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/listener"}},"description":"TCP Listeners associated with proxy (for tcp based proxy)"}}}},"___endpoints":{"type":"object"},"___enabled":{"description":"Is deployer enabled?","type":"boolean"}}},"_88security":{"type":"object","properties":{"___profile":{"type":"string"}}},"_88hook-type":{"enabled":{"type":"boolean"}},"_88deployment-check":{"additionalProperties":false,"properties":{"___min-nodes":{"description":"Minimum number of nodes for deployment. (Used for deployment check)","type":"number","minimum":1},"___timeout":{"default":"5s","description":"Deployment check timeout represented in terms of seconds or minutes. e.g: 20s for timeout of 20 seconds","type":"string"},"___attempts":{"default":"10","description":"Maximum number of attempts for deployment check before marking deployment as failed.","type":"number"},"___port":{"description":"Application internal Port to be used for discover check (Value of 0 disable discover check)","type":"number","minimum":0},"___path":{"default":"","description":"Optional path to be used for performing deployment check. If null, empty or un-specified, only discover check is performed.","type":"string"}}},"_88notifications":{"patternProperties":{"___github":{"$eref":{"additionalProperties":true,"properties":{"___url":{"description":"Github API url base","type":"string"},"___enabled":{"description":"Used for enabling\/disabling notification","type":"boolean"},"___token":{"description":"Github Oauth token","type":"object","$ref":"#\/definitions\/encrypted-type"},"___level":{"description":"Min level for the message to activate this notifier","type":"number"}}}},"___hipchat":{"$eref":{"additionalProperties":false,"properties":{"___url":{"description":"Hipchat v2 api url","type":"string"},"___room":{"description":"Room to be used for notification","type":"string"},"___enabled":{"description":"Used for enabling\/disabling notification","type":"boolean"},"___level":{"description":"Min level for the message to activate this notifier","type":"number"},"___token":{"description":"Hipchat API v2 token (personal\/ room) for notification","type":"object","$ref":"#\/definitions\/encrypted-type"},"___colors":{"description":"Color mapping","type":"object"}}}},"___.*":{"$eref":{"additionalProperties":true,"properties":{"___enabled":{"description":"Used for enabling\/disabling notification","type":"boolean"},"___level":{"description":"Min level for the message to activate this notifier","type":"number"}}}}}},"_88deployment-stop":{"additionalProperties":false,"properties":{"___timeout":{"default":"30s","description":"Deployment stop timeout represented in terms of seconds or minutes. e.g: 30s for timeout of 30 seconds. The application will be sent SIGTERM signal and will have this time for its cleanup.","type":"string"},"___check-retries":{"default":"10","description":"Maximum no. of retries to be attempted to check if deployment is stopped.","type":"number"}}},"_88proxy":{"additionalProperties":false,"type":"object","properties":{"___upstreams":{"patternProperties":{"___.*":{"$eref":{"description":"Proxy Upstream (Backend) definition","additionalProperties":false,"type":"object","properties":{"___health":{"$ref":"#\/definitions\/health"},"___mode":{"default":"http","description":"Proxy mode (http or tcp)","enum":["http","tcp"]}}}}},"description":"Backends associated with the proxy"},"___hosts":{"patternProperties":{"___.*":{"$eref":{"description":"Proxy Host definition","additionalProperties":false,"type":"object","properties":{"___hostname":{"pattern":"^[a-zA-Z0-9\\-.\\s,]*[a-zA-Z0-9\\s\\-,]$","description":"Hostname(s) to be registered with proxy. If multiple hosts need to be specified, separate them using comma or space","type":"string"},"___enabled":{"description":"Is host enabled?","type":"boolean"},"___locations":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/location"}},"description":"Locations for given proxy host."}}}}},"description":"Hosts associated with the proxy"},"___listeners":{"patternProperties":{"___.*":{"$eref":{"description":"Proxy TCP Listener definition","type":"object"}}},"description":"TCP Listeners associated with proxy (for tcp based proxy)"}}},"_88listener":{"description":"Proxy TCP Listener definition","type":"object"},"_88hooks":{"additionalProperties":false,"type":"object","properties":{"___ci":{"$eref":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/hook-type"}},"type":"object"}},"___builder":{"$eref":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/hook-type"}},"type":"object"}},"___scm-create":{"$eref":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/hook-type"}},"type":"object"}},"___scm-push":{"$eref":{"patternProperties":{"___.*":{"$ref":"#\/definitions\/hook-type"}},"type":"object"}}}},"_88deployment":{"additionalProperties":false,"properties":{"___name":{"type":"string","maxLength":512},"___version":{"type":"string","maxLength":100},"___type":{"enum":["blue-green","red-green","a\/b","custom"]},"___check":{"$eref":{"additionalProperties":false,"properties":{"___min-nodes":{"description":"Minimum number of nodes for deployment. (Used for deployment check)","type":"number","minimum":1},"___timeout":{"default":"5s","description":"Deployment check timeout represented in terms of seconds or minutes. e.g: 20s for timeout of 20 seconds","type":"string"},"___attempts":{"default":"10","description":"Maximum number of attempts for deployment check before marking deployment as failed.","type":"number"},"___port":{"description":"Application internal Port to be used for discover check (Value of 0 disable discover check)","type":"number","minimum":0},"___path":{"default":"","description":"Optional path to be used for performing deployment check. If null, empty or un-specified, only discover check is performed.","type":"string"}}}},"___nodes":{"maximum":12,"type":"number","minimum":1},"___stop":{"$eref":{"additionalProperties":false,"properties":{"___timeout":{"default":"30s","description":"Deployment stop timeout represented in terms of seconds or minutes. e.g: 30s for timeout of 30 seconds. The application will be sent SIGTERM signal and will have this time for its cleanup.","type":"string"},"___check-retries":{"default":"10","description":"Maximum no. of retries to be attempted to check if deployment is stopped.","type":"number"}}},"type":"object"}}},"_88upstream":{"description":"Proxy Upstream (Backend) definition","additionalProperties":false,"type":"object","properties":{"___health":{"$eref":{"description":"Health check definition for proxy upstream","additionalProperties":false,"type":"object","properties":{"___interval":{"description":"Interval to be used for health check. e.g.: 30s to run health check every 30 seconds.","type":"string"},"___timeout":{"description":"Health check timeout represented in terms of seconds or minutes. e.g: 20s for timeout of 20 seconds","type":"string"},"___uri":{"description":"Path to be used for health check. If empty or not specified, tcp based check is used.","type":"string"}}}},"___mode":{"default":"http","description":"Proxy mode (http or tcp)","enum":["http","tcp"]}}},"_88notification":{"additionalProperties":true,"properties":{"___enabled":{"description":"Used for enabling\/disabling notification","type":"boolean"},"___level":{"description":"Min level for the message to activate this notifier","type":"number"}}}},"properties":{"___deployers":{"patternProperties":{"___.*":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___templates":{"type":"object"},"___deployment":{"description":"Deployment configuration.","$ref":"#\/definitions\/deployment"},"___url":{"description":"URL for the deployer","type":"string"},"___proxy":{"$ref":"#\/definitions\/proxy"},"___endpoints":{"type":"object"},"___enabled":{"description":"Is deployer enabled?","type":"boolean"}}}}}},"___enabled":{"type":"boolean"},"___hooks":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___ci":{"$ref":"#\/definitions\/hook-list"},"___builder":{"$ref":"#\/definitions\/hook-list"},"___scm-create":{"$ref":"#\/definitions\/hook-list"},"___scm-push":{"$ref":"#\/definitions\/hook-list"}}}},"___security":{"$eref":{"type":"object","properties":{"___profile":{"type":"string"}}},"type":"object"},"___scm":{"type":"object"},"___notifications":{"$eref":{"patternProperties":{"___github":{"$ref":"#\/definitions\/notification-github"},"___hipchat":{"$ref":"#\/definitions\/notification-hipchat"},"___.*":{"$ref":"#\/definitions\/notification"}}}},"___schedule":{"description":"Run this deployment as scheduled job.","type":"string"},"___environment":{"$eref":{"patternProperties":{"___.*":{"oneOf":[{"type":"string","maxLength":4096},{"$ref":"#\/definitions\/encrypted-type"}]}},"additionalProperties":false},"description":"Defines top level environment (key, value) support","type":"object"}},"required":["enabled"]}