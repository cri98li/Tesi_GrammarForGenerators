{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Microsoft Insights Resource Types","id":"https:\/\/schema.management.azure.com\/schemas\/2018-04-16\/Microsoft.Insights.json#","title":"Microsoft.Insights","resourceDefinitions":{"scheduledQueryRules":{"description":"Microsoft.Insights\/scheduledQueryRules","type":"object","properties":{"___location":{"description":"Resource location","type":"string"},"___name":{"description":"The name of the rule.","type":"string"},"___type":{"type":"string","enum":["Microsoft.Insights\/scheduledQueryRules"]},"___tags":{"oneOf":[{"additionalProperties":{"type":"string"},"type":"object","properties":{}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Resource tags"},"___properties":{"oneOf":[{"$eref":{"description":"Log Search Rule Definition","type":"object","properties":{"___action":{"oneOf":[{"$ref":"#\/definitions\/Action"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Action descriptor."},"___description":{"description":"The description of the Log Search rule.","type":"string"},"___enabled":{"oneOf":[{"type":"string","enum":["true","false"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The flag which indicates whether the Log Search rule is enabled. Value should be true or false."},"___schedule":{"oneOf":[{"$ref":"#\/definitions\/Schedule"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Defines how often to run the search and the time interval."},"___source":{"oneOf":[{"$ref":"#\/definitions\/Source"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Specifies the log search query."}},"required":["action","source"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Log Search Rule Definition"},"___apiVersion":{"type":"string","enum":["2018-04-16"]}},"required":["apiVersion","location","name","properties","type"]}},"definitions":{"_88TriggerCondition":{"description":"The condition that results in the Log Search rule.","type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Result or count threshold based on which rule should be triggered."},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Evaluation operation for rule - 'GreaterThan' or 'LessThan."},"___metricTrigger":{"oneOf":[{"$eref":{"description":"A log metrics trigger descriptor.","type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The threshold of the metric trigger."},"___metricColumn":{"description":"Evaluation of metric on a particular column","type":"string"},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Evaluation operation for Metric -'GreaterThan' or 'LessThan' or 'Equal'."},"___metricTriggerType":{"oneOf":[{"type":"string","enum":["Consecutive","Total"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Metric Trigger Type - 'Consecutive' or 'Total'."}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"A log metrics trigger descriptor."}},"required":["threshold","thresholdOperator"]},"_88Source":{"description":"Specifies the log search query.","type":"object","properties":{"___query":{"description":"Log search query. Required for action type - AlertingAction","type":"string"},"___dataSourceId":{"description":"The resource uri over which log search query is to be run.","type":"string"},"___authorizedResources":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"List of  Resource referred into query"},"___queryType":{"oneOf":[{"type":"string","enum":["ResultCount"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Set value to 'ResultCount'."}},"required":["dataSourceId"]},"_88LogSearchRule":{"description":"Log Search Rule Definition","type":"object","properties":{"___action":{"oneOf":[{"$eref":{"oneOf":[{"$ref":"#\/definitions\/AlertingAction"},{"$ref":"#\/definitions\/LogToMetricAction"}],"description":"Action descriptor.","type":"object","properties":{}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Action descriptor."},"___description":{"description":"The description of the Log Search rule.","type":"string"},"___enabled":{"oneOf":[{"type":"string","enum":["true","false"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The flag which indicates whether the Log Search rule is enabled. Value should be true or false."},"___schedule":{"oneOf":[{"$eref":{"description":"Defines how often to run the search and the time interval.","type":"object","properties":{"___frequencyInMinutes":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"frequency (in minutes) at which rule condition should be evaluated."},"___timeWindowInMinutes":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Time window for which data needs to be fetched for query (should be greater than or equal to frequencyInMinutes)."}},"required":["frequencyInMinutes","timeWindowInMinutes"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Defines how often to run the search and the time interval."},"___source":{"oneOf":[{"$eref":{"description":"Specifies the log search query.","type":"object","properties":{"___query":{"description":"Log search query. Required for action type - AlertingAction","type":"string"},"___dataSourceId":{"description":"The resource uri over which log search query is to be run.","type":"string"},"___authorizedResources":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"List of  Resource referred into query"},"___queryType":{"oneOf":[{"type":"string","enum":["ResultCount"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Set value to 'ResultCount'."}},"required":["dataSourceId"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Specifies the log search query."}},"required":["action","source"]},"_88Criteria":{"description":"Specifies the criteria for converting log to metric.","type":"object","properties":{"___dimensions":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Specifies the criteria for converting log to metric.","type":"object","properties":{"___name":{"description":"Name of the dimension","type":"string"},"___values":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"List of dimension values"},"___operator":{"oneOf":[{"type":"string","enum":["Include"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Operator for dimension values"}},"required":["name","operator","values"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"List of Dimensions for creating metric"},"___metricName":{"description":"Name of the metric","type":"string"}},"required":["metricName"]},"_88Dimension":{"description":"Specifies the criteria for converting log to metric.","type":"object","properties":{"___name":{"description":"Name of the dimension","type":"string"},"___values":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"List of dimension values"},"___operator":{"oneOf":[{"type":"string","enum":["Include"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Operator for dimension values"}},"required":["name","operator","values"]},"_88LogToMetricAction":{"description":"Specify action need to be taken when rule type is converting log to metric","type":"object","properties":{"___criteria":{"oneOf":[{"type":"array","items":{"$eref":{"description":"Specifies the criteria for converting log to metric.","type":"object","properties":{"___dimensions":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/Dimension"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"List of Dimensions for creating metric"},"___metricName":{"description":"Name of the metric","type":"string"}},"required":["metricName"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Criteria of Metric"},"___odata.type":{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.LogToMetricAction"]}},"required":["criteria","odata.type"]},"_88LogMetricTrigger":{"description":"A log metrics trigger descriptor.","type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The threshold of the metric trigger."},"___metricColumn":{"description":"Evaluation of metric on a particular column","type":"string"},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Evaluation operation for Metric -'GreaterThan' or 'LessThan' or 'Equal'."},"___metricTriggerType":{"oneOf":[{"type":"string","enum":["Consecutive","Total"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Metric Trigger Type - 'Consecutive' or 'Total'."}}},"_88AzNsActionGroup":{"description":"Azure action group","type":"object","properties":{"___actionGroup":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Azure Action Group reference."},"___emailSubject":{"description":"Custom subject override for all email ids in Azure action group","type":"string"},"___customWebhookPayload":{"description":"Custom payload to be sent for all webhook URI in Azure action group","type":"string"}}},"_88Action":{"oneOf":[{"$eref":{"description":"Specify action need to be taken when rule type is Alert","type":"object","properties":{"___trigger":{"oneOf":[{"$ref":"#\/definitions\/TriggerCondition"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The condition that results in the Log Search rule."},"___throttlingInMin":{"oneOf":[{"type":"integer"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"time (in minutes) for which Alerts should be throttled or suppressed."},"___odata.type":{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction"]},"___severity":{"oneOf":[{"type":"string","enum":["0","1","2","3","4"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Severity of the alert."},"___aznsAction":{"oneOf":[{"$ref":"#\/definitions\/AzNsActionGroup"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Azure action group"}},"required":["odata.type","severity","trigger"]}},{"$eref":{"description":"Specify action need to be taken when rule type is converting log to metric","type":"object","properties":{"___criteria":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/Criteria"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Criteria of Metric"},"___odata.type":{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.LogToMetricAction"]}},"required":["criteria","odata.type"]}}],"description":"Action descriptor.","type":"object","properties":{}},"_88AlertingAction":{"description":"Specify action need to be taken when rule type is Alert","type":"object","properties":{"___trigger":{"oneOf":[{"$eref":{"description":"The condition that results in the Log Search rule.","type":"object","properties":{"___threshold":{"oneOf":[{"type":"number"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Result or count threshold based on which rule should be triggered."},"___thresholdOperator":{"oneOf":[{"type":"string","enum":["GreaterThan","LessThan","Equal"]},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Evaluation operation for rule - 'GreaterThan' or 'LessThan."},"___metricTrigger":{"oneOf":[{"$ref":"#\/definitions\/LogMetricTrigger"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"A log metrics trigger descriptor."}},"required":["threshold","thresholdOperator"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The condition that results in the Log Search rule."},"___throttlingInMin":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"time (in minutes) for which Alerts should be throttled or suppressed."},"___odata.type":{"type":"string","enum":["Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction"]},"___severity":{"oneOf":[{"type":"string","enum":["0","1","2","3","4"]},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Severity of the alert."},"___aznsAction":{"oneOf":[{"$eref":{"description":"Azure action group","type":"object","properties":{"___actionGroup":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Azure Action Group reference."},"___emailSubject":{"description":"Custom subject override for all email ids in Azure action group","type":"string"},"___customWebhookPayload":{"description":"Custom payload to be sent for all webhook URI in Azure action group","type":"string"}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Azure action group"}},"required":["odata.type","severity","trigger"]},"_88Schedule":{"description":"Defines how often to run the search and the time interval.","type":"object","properties":{"___frequencyInMinutes":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"frequency (in minutes) at which rule condition should be evaluated."},"___timeWindowInMinutes":{"oneOf":[{"type":"integer"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Time window for which data needs to be fetched for query (should be greater than or equal to frequencyInMinutes)."}},"required":["frequencyInMinutes","timeWindowInMinutes"]}}}