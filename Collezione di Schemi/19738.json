{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"deployment.json","description":"Describes the deployment of one or more Kubernetes clusters.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/deployment.json","additionalProperties":false,"title":"A Kubernetes deployment","type":"object","properties":{"___clusters":{"minItems":1,"maxItems":1,"description":"A list of cluster configurations.","type":"array","items":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"cluster.json","description":"A set of one or more nodePools, along with any shared configuration between them.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/cluster.json","additionalProperties":false,"title":"A single cluster configuration","type":"object","properties":{"___name":{"minLength":1,"pattern":"^[A-Za-z0-9-]+$","description":"Name of this cluster.","type":"string","maxLength":21},"___kubeAuth":{"description":"AAA (Authentication, Authorization and Accounting) settings for the cluster.","$ref":"kubeAuthConfig.json"},"___dnsConfig":{"description":"DNS Configuration for the cluster.","$ref":"dnsConfig.json"},"___helmConfig":{"description":"Helm config for installing kubernetes resources.","$ref":"helmConfig.json"},"___helmOverride":{"description":"Set to true when using your own helm version.","type":["boolean","string","null"]},"___providerConfig":{"description":"Provider (e.g. AWS, GKE, etc.) configuration.","$ref":"providerConfig.json"},"___network":{"format":"cidr","description":"Internal IP address range (CIDR) for services.","type":"string"},"___dns":{"format":"ipv4","description":"Internal IP address of the DNS service.","type":"string"},"___domain":{"format":"hostname","description":"Domain name for cluster (internal resolution).","type":"string"},"___customApiDns":{"description":"Custom domain name for API server ELB.","type":"string"},"___fabricConfig":{"description":"Fabric config for the kubernetes overlay network.","$ref":"fabricConfig.json"},"___nodePools":{"minItems":1,"description":"A list of nodePools.","type":"array","items":{"$ref":"nodePool.json"}}},"required":["name","network","dns","domain","providerConfig","nodePools","fabricConfig","kubeAuth","helmConfig","dnsConfig"]}}},"___readiness":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"readiness.json","description":"Options to determine when a cluster is ready.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/readiness.json","additionalProperties":false,"title":"Cluster Readiness Configuration","type":"object","properties":{"___type":{"description":"The type of test that should be used to determine if a cluster is ready.","type":"string"},"___value":{"description":"The value for the test.","type":"number"},"___wait":{"description":"The number of seconds to wait for the test to complete.","type":"number"}},"required":["type","value","wait"]}}},"required":["clusters"]}