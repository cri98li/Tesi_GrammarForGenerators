{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"coreOsLocksmithConfig.json","description":"Describes the configuration of CoreOS Locksmith (used to manage [updates](https:\/\/coreos.com\/os\/docs\/latest\/update-strategies.html).","id":"http:\/\/judkins.house\/apis\/k2\/v1\/coreOsLocksmithConfig.json","additionalProperties":false,"title":"CoreOS Locksmith Configuration","type":"object","properties":{"___etcdKeyfile":{"default":"\/etc\/etcd\/ssl\/client-key.pem","description":"Path to private key file used for TLS communication with etcd.","type":"string"},"___windowStart":{"default":"04:00","description":"Optional day of the week (e.g. Sun, Mon, ...) and the time of day (specified in 24-hours). For example, 'Sat 04:00', or '18:00'.","type":"string"},"___setMax":{"default":1,"description":"Maximum number of nodes allowed to reboot at the same time. Should be one less than the number of failures the cluster can tolerate.","type":"number"},"___windowLength":{"default":"2h","description":"Length of time after window-start during which reboots are allowed. For example, '2h', or '13h'. Duration will be parsed by https:\/\/godoc.org\/time#ParseDuration","type":"string"},"___etcdConfig":{"etcdConfig":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","$$target":"etcdConfig.json","description":"Describes the configuration of etcd.","id":"http:\/\/judkins.house\/apis\/k2\/v1\/etcdConfig.json","additionalProperties":false,"title":"etcd Configuration","type":"object","properties":{"___name":{"description":"Name of etcd configuration","type":"string"},"___clientPorts":{"minItems":1,"default":[2379,4001],"description":"Ports used to listen for client requests.","type":"array","items":{"type":"number"}},"___version":{"description":"Version of etcd container which will be run","type":"string"},"___type":{"description":"Type of kvStore","type":"string","enum":["etcd"]},"___ssl":{"description":"Whether or not SSL is used for etcd traffic","type":"boolean"},"___kind":{"description":"Type of etcdConfig","type":"string","enum":["kvStore"]},"___peerPorts":{"minItems":1,"default":[2380],"description":"Ports used for peer to peer communication","type":"array","items":{"type":"number"}},"___uuidToken":{"default":true,"description":"If true, uuidgen will be used to generate a unique token for each etcd cluster. uuidToken takes precedence over clusterToken, and if neither are specified then the etcd defaults are used.","type":"boolean"},"___clusterToken":{"default":"espouse-monger-rarely","description":"Token used during etcd cluster formation. This may be unsafe if an etcd cluster formation has to be restarted, or multiple clusters are created within the same VPC. It is highly recommended that the uuidToken option be used instead.","type":"string"}},"required":["type","clientPorts","peerPorts","ssl","version"]}},"description":"If rebootStrategy is 'etcd-lock', then etcdConfig is the configuration of the kraken etcd cluster which will be used by locksmithd to coordinate upgrade for nodes within the same nodePool. Usually this is one of the kubernetes etcd clusters."},"___group":{"description":"Name of the reboot group in which this instance belongs. If not specified then it is the name of the nodePool, which is the default.","type":"string"},"___etcdCafile":{"default":"\/etc\/etcd\/ssl\/client-ca.pem","description":"Path to CA file used for TLS communication with etcd.","type":"string"},"___etcdCertfile":{"default":"\/etc\/etcd\/ssl\/client.pem","description":"Path to certificate file used for TLS communication with etcd.","type":"string"},"___endpoint":{"description":"Comma separated list of etcd endpoints.","type":"string"}},"required":[]}