{"copyright":["Copyright 2013 Red Hat, Inc. and\/or its affiliates.","This file is part of lightblue.","This program is free software: you can redistribute it and\/or modify","it under the terms of the GNU General Public License as published by","the Free Software Foundation, either version 3 of the License, or","(at your option) any later version.","This program is distributed in the hope that it will be useful,","but WITHOUT ANY WARRANTY; without even the implied warranty of","MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","GNU General Public License for more details.","You should have received a copy of the GNU General Public License","along with this program.  If not, see <http:\/\/www.gnu.org\/licenses\/>."],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"type":"object","properties":{"___entityInfo":{"$eref":{"copyright":["Copyright 2013 Red Hat, Inc. and\/or its affiliates.","This file is part of lightblue.","This program is free software: you can redistribute it and\/or modify","it under the terms of the GNU General Public License as published by","the Free Software Foundation, either version 3 of the License, or","(at your option) any later version.","This program is distributed in the hope that it will be useful,","but WITHOUT ANY WARRANTY; without even the implied warranty of","MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","GNU General Public License for more details.","You should have received a copy of the GNU General Public License","along with this program.  If not, see <http:\/\/www.gnu.org\/licenses\/>."],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"type":"object","properties":{"___name":{"description":"The name of the entity.","type":"string"},"___controllerConfiguration":{"description":"Definition of the backend in which data is persisted.  Note that credentials are not stored here.  Pointers to credientials could be saved, such as env variables.  This entity is wide open on purpose to allow individual backend implementations to deal with parsing and validating this structure.","additionalProperties":true,"type":"object"},"___description":{"description":"A description of the entity.","type":"string"},"___datastore":{"description":"Definition of the backend in which data is persisted.  Note that credentials are not stored here.  Pointers to credientials could be saved, such as env variables.  This entity is wide open on purpose to allow individual backend implementations to deal with parsing and validating this structure.","additionalProperties":true,"type":"object"},"___defaultVersion":{"description":"Default version of the entity used unless a version is explicitly provided in the request.","type":"string"},"___hooks":{"description":"Definition of all hooks for use within field data.","type":"array","items":{"additionalProperties":false,"properties":{"___name":{"description":"The name of the hook, maps to a hook implementation class.","type":"string"},"___projection":{"description":"If specified, is applied against the request and response before submitting to hook implementation.","$ref":"\/json-schema\/projection\/choice.json#\/definitions\/projection"},"___configuration":{"description":"Any configuration needed by the hook implementation.","additionalProperties":true,"type":"object"},"___actions":{"minItems":1,"type":"array","items":{"enum":["insert","update","find","delete"]}}},"required":["name","actions"]}},"___indexes":{"minItems":1,"description":"Container for all indexes.  Each child is an array of fields.  Each child array becomes a single index.","type":"array","items":{"additionalProperties":false,"type":"object","properties":{"___name":{"description":"Optional name of the index.","type":"string"},"___fields":{"minItems":1,"description":"Fields that are part of the index.","type":"array","items":{"type":"object","properties":{"___field":{"description":"Index field","type":"string"},"___dir":{"description":"$asc or $desc","type":"string"}},"required":["field"]}},"___unique":{"description":"If true, the index is a unique constraint.  If not specified, value is 'false'.","type":"boolean"}},"required":["fields"]}},"___enums":{"description":"Array of defined enums that can be referenced by name from fields.","type":"array","items":{"properties":{"___name":{"description":"The name of the enum.  Must be unique per entity. TODO enforce uniqueness in the json schema.","type":"string"},"___annotatedValues":{"minItems":1,"description":"The values with descriptions that can be used for the enum. Replaces values","type":"array","items":{"properties":{"___name":{"description":"The name of the values that can be used for the enum","type":"string"},"___description":{"description":"description of the enum value","type":"string"}}}},"___values":{"minItems":1,"description":"The values that can be used for the enum. Deprecated in favor of annotatedValues","type":"array","items":{"type":"string"}}},"required":["name"]}}},"required":["name","datastore"]}},"___schema":{"$eref":{"copyright":["Copyright 2013 Red Hat, Inc. and\/or its affiliates.","This file is part of lightblue.","This program is free software: you can redistribute it and\/or modify","it under the terms of the GNU General Public License as published by","the Free Software Foundation, either version 3 of the License, or","(at your option) any later version.","This program is distributed in the hope that it will be useful,","but WITHOUT ANY WARRANTY; without even the implied warranty of","MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","GNU General Public License for more details.","You should have received a copy of the GNU General Public License","along with this program.  If not, see <http:\/\/www.gnu.org\/licenses\/>."],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"type":"object","definitions":{"_88status":{"type":"object","properties":{"___log":{"description":"History of status changes over time.","type":"array","items":{"properties":{"___value":{"$ref":"#\/definitions\/status\/properties\/value"},"___date":{"type":"string"},"___comment":{"type":"string"}},"required":["date","value","comment"]}},"___value":{"description":"active=usable and not expected to go away anytime soon, deprecated=can be used but is expected to go away in near future, disabled=cannot be used","enum":["active","deprecated","disabled"]}},"required":["value"]},"_88fieldConstraint":{"properties":{"___matches":{"description":"Requires string field to match regular expression","type":"string"},"___minProperties":{"$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/minProperties"},"___uniqueItems":{"$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/uniqueItems"},"___minimum":{"description":"Minimum numeric value for fields of numeric type.","$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/minimum"},"___reference":{"$ref":"common.json#\/definitions\/reference"},"___required":{"description":"Indicates if the field is required.  Defaults to 'false'.","type":"boolean"},"___maximum":{"description":"Maximum numeric value for fields of numeric type.","$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/maximum"},"___minItems":{"description":"Minimum number of items in an array field.","$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/minItems"},"___maxProperties":{"$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/maxProperties"},"___minLength":{"description":"Minimum length of a string field.","$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/minLength"},"___maxLength":{"description":"Maximum length of a string field.","$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/maxLength"},"___enum":{"description":"Should set type of 'string' when using enum.  Value is a reference to an enum name in entityInfo.","type":"string"},"___maxItems":{"description":"Maximum number of items in an array field.","$ref":"http:\/\/json-schema.org\/draft-04\/schema#\/properties\/maxItems"}}},"_88accessField":{"description":"Defines what roles are required for specific operations on this field.","additionalProperties":false,"type":"object","properties":{"___update":{"description":"Roles that can perform write update\/save on this field.","$ref":"common.json#\/definitions\/roleArray"},"___find":{"description":"Roles that can perform find operations on this field.","$ref":"common.json#\/definitions\/roleArray"}}},"_88typesAny":{"oneOf":[{"$ref":"#\/definitions\/typesComplex"},{"$ref":"#\/definitions\/typesSimple"}]},"_88typesSimple":{"enum":["boolean","integer","string","double","biginteger","bigdecimal","date","binary","uid"]},"_88version":{"$ref":"common.json#\/definitions\/version"},"_88typesReference":{"enum":["reference"]},"_88typesObject":{"enum":["object"]},"_88typesArray":{"enum":["array"]},"_88fieldSingle":{"patternProperties":{"___.*":{"oneOf":[{"description":"Simple field","additionalProperties":false,"properties":{"___constraints":{"$ref":"#\/definitions\/fieldConstraint"},"___description":{"type":"string"},"___type":{"$ref":"#\/definitions\/typesSimple"},"___valueGenerator":{"type":"object","properties":{"___type":{"description":"The type of the value generator.","type":"string"},"___configuration":{"description":"Properties for the value generator.","type":"object"},"___overwrite":{"description":"Whether to overwrite field value","type":"boolean"}},"required":["type"]},"___access":{"$ref":"#\/definitions\/accessField"}},"required":["type"]},{"description":"Object field","additionalProperties":false,"properties":{"___constraints":{"$ref":"#\/definitions\/fieldConstraint"},"___fields":{"$ref":"#\/definitions\/fieldSingle"},"___description":{"type":"string"},"___type":{"$ref":"#\/definitions\/typesObject"},"___access":{"$ref":"#\/definitions\/accessField"}},"required":["type","fields"]},{"description":"Array field","additionalProperties":false,"properties":{"___constraints":{"$ref":"#\/definitions\/fieldConstraint"},"___description":{"type":"string"},"___type":{"$ref":"#\/definitions\/typesArray"},"___items":{"oneOf":[{"description":"Array items can be simple types.","additionalProperties":false,"properties":{"___constraints":{"$ref":"#\/definitions\/fieldConstraint"},"___type":{"$ref":"#\/definitions\/typesSimple"}},"required":["type"]},{"description":"Support for object items.","properties":{"___fields":{"$ref":"#\/definitions\/fieldSingle"},"___type":{"enum":["object"]}},"required":["type","fields"]}]},"___access":{"$ref":"#\/definitions\/accessField"}},"required":["type","items"]},{"description":"Reference field","additionalProperties":false,"properties":{"___sort":{"$ref":"\/json-schema\/sort\/choice.json#\/definitions\/sort"},"___projection":{"$ref":"\/json-schema\/projection\/choice.json#\/definitions\/projection"},"___entity":{"description":"The name of the referenced entity","type":"string"},"___constraints":{"$ref":"#\/definitions\/fieldConstraint"},"___query":{"$ref":"\/json-schema\/query\/choice.json#\/definitions\/query"},"___type":{"$ref":"#\/definitions\/typesReference"},"___versionValue":{"description":"The version of the entity","type":"string"},"___access":{"$ref":"#\/definitions\/accessField"}},"required":["type","entity","versionValue"]}]}},"description":"Control non-fields objects","type":"object"},"_88typesComplex":{"enum":["object","array","reference"]}},"properties":{"___name":{"description":"The name of the entity.","type":"string"},"___fields":{"$ref":"#\/definitions\/fieldSingle"},"___status":{"$ref":"#\/definitions\/status"},"___version":{"$ref":"#\/definitions\/version"},"___access":{"description":"Defines what roles are required for specific operations on this entity.","type":"object","properties":{"___delete":{"description":"Roles that can perform delete on this object.","$ref":"common.json#\/definitions\/roleArray"},"___insert":{"description":"Roles that can perform insert on this object.","$ref":"common.json#\/definitions\/roleArray"},"___update":{"description":"Roles that can perform update or save on this object.","$ref":"common.json#\/definitions\/roleArray"},"___find":{"description":"Roles that can perform find on this object.","$ref":"common.json#\/definitions\/roleArray"}}}},"required":["name","version","status","fields"]}}},"required":["entityInfo","schema"]}