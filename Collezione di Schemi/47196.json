{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"https:\/\/github.com\/ibm-watson-iot\/blockchain-samples\/contracts\/platform\/iotcontractminimalsample\/minimal.json","definitions":{"_88API":{"readAssetSchemas":{"description":"Returns the API for this contract for the use of self-configuring applications; is MANDATORY for integration with the Watson IoT Platform","type":"object","properties":{"___function":{"type":"string","enum":["readAssetSchemas"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"query","___result":{"type":"object","properties":{}}}},"readAsset":{"description":"Returns the state an asset","type":"object","properties":{"___function":{"type":"string","enum":["readAsset"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___$ref":"#\/definitions\/Model\/assetKey"}}},"___method":"query","___result":{"$eref":{"description":"A asset's complete state","type":"object","properties":{"___txnid":{"description":"Transaction UUID matching the blockchain","type":"string"},"___compliant":{"description":"This asset has no active alerts","type":"boolean"},"___state":{"description":"Properties that have been received or calculated for this asset","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/asset"}}},"___class":{"$ref":"#\/definitions\/Model\/assetClass"},"___alerts":{"$ref":"#\/definitions\/Model\/alertNameArray"},"___eventin":{"description":"The contract event that created this state, for example updateAsset","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/asset"}}},"___eventout":{"description":"The chaincode event emitted on invoke exit, if any","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/eventIOTContractPlatformInvokeResult"}}},"___txnts":{"description":"Transaction timestamp matching the blockchain","type":"string"},"___assetID":{"description":"This asset's world state asset ID","type":"string"}}}}}},"readAssetStateHistory":{"description":"Returns history for an asset","type":"object","properties":{"___function":{"type":"string","enum":["readAssetStateHistory"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___$ref":"#\/definitions\/Model\/assetKey","___daterange":{"$eref":{"description":"if specified, dates must fall in between these values, inclusive","type":"object","properties":{"___begin":{"format":"date-time","description":"timestamp formatted yyyy-mm-dd hh:mm:ss","type":"string","sample":"yyyy-mm-dd hh:mm:ss"},"___end":{"format":"date-time","description":"timestamp formatted yyyy-mm-dd hh:mm:ss","type":"string","sample":"yyyy-mm-dd hh:mm:ss"}}}},"___filter":{"$eref":{"description":"Filter asset states","type":"object","properties":{"___match":{"description":"Defines how to match properties, missing property always fails match","type":"string","enum":["n\/a","all","any","none"]},"___select":{"description":"Qualified property names and values match","type":"array","items":{"type":"object","properties":{"___value":{"description":"Value to be compared","type":"string"},"___qprop":{"description":"Qualified property to compare, for example 'asset.assetID'","type":"string"}}}}}}}}}},"___method":"query","___result":{"$eref":{"minItems":0,"description":"Array of asset states, can mix asset classes","type":"array","items":{"$ref":"#\/definitions\/Model\/assetstate"}}}}},"replaceAsset":{"description":"Replaces an asset's state (e.g. put existing)","type":"object","properties":{"___function":{"type":"string","enum":["replaceAsset"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___asset":{"$eref":{"description":"The changeable properties for an asset, also considered its 'event' as a partial state","type":"object","properties":{"___temperature":{"description":"Temperature of an asset's contents in degrees Celsuis","type":"number"},"___carrier":{"description":"The carrier in possession of this asset","type":"string"},"___common":{"$ref":"#\/definitions\/Model\/ioteventcommon"},"___assetID":{"$ref":"#\/definitions\/Model\/assetID"}},"required":["assetID"]}}}}},"___method":"invoke"}},"readContractState":{"description":"Returns this contract instance's version and nickname","type":"object","properties":{"___function":{"type":"string","enum":["readContractState"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"query","___result":{"$eref":{"type":"object","properties":{"___version":{"$ref":"#\/definitions\/Model\/version"},"___nickname":{"$ref":"#\/definitions\/Model\/nickname"}}}}}},"deletePropertiesFromAsset":{"description":"Delete one or more properties from an asset's state","type":"object","properties":{"___function":{"type":"string","enum":["deletePropertiesFromAsset"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___qprops":{"description":"Qualified property names such as common.location","type":"array","items":{"type":"string"}},"___$ref":"#\/definitions\/Model\/assetKey"}}},"___method":"invoke"}},"updateAsset":{"description":"Update an asset's state with one or more property changes","type":"object","properties":{"___function":{"type":"string","enum":["updateAsset"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___asset":{"$eref":{"description":"The changeable properties for an asset, also considered its 'event' as a partial state","type":"object","properties":{"___temperature":{"description":"Temperature of an asset's contents in degrees Celsuis","type":"number"},"___carrier":{"description":"The carrier in possession of this asset","type":"string"},"___common":{"$ref":"#\/definitions\/Model\/ioteventcommon"},"___assetID":{"$ref":"#\/definitions\/Model\/assetID"}},"required":["assetID"]}}}}},"___method":"invoke"}},"initContract":{"description":"Sets contract version and nickname","type":"object","properties":{"___function":{"type":"string","enum":["initContract"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___version":{"$eref":{"description":"The version number of the current contract instance","type":"string"}},"___nickname":{"$eref":{"default":"IOT Contract Platform","description":"The nickname of the current contract instance","type":"string"}}}}},"___method":"deploy"}},"setLoggingLevel":{"description":"Sets the logging level for the contract","type":"object","properties":{"___function":{"type":"string","enum":["setLoggingLevel"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___logLevel":{"type":"string","enum":["CRITICAL","ERROR","WARNING","NOTICE","INFO","DEBUG"]}}}},"___method":"invoke"}},"readAllAssets":{"description":"Returns the state of all assets, supports filters","type":"object","properties":{"___function":{"type":"string","enum":["readAllAssets"]},"___args":{"minItems":0,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___filter":{"$eref":{"description":"Filter asset states","type":"object","properties":{"___match":{"description":"Defines how to match properties, missing property always fails match","type":"string","enum":["n\/a","all","any","none"]},"___select":{"description":"Qualified property names and values match","type":"array","items":{"type":"object","properties":{"___value":{"description":"Value to be compared","type":"string"},"___qprop":{"description":"Qualified property to compare, for example 'asset.assetID'","type":"string"}}}}}}}}}},"___method":"query","___result":{"$eref":{"minItems":0,"description":"Array of asset states, can mix asset classes","type":"array","items":{"$ref":"#\/definitions\/Model\/assetstate"}}}}},"readAllRoutes":{"description":"Returns an array of registered API calls by function (debugging)","type":"object","properties":{"___function":{"type":"string","enum":["readAllRoutes"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"query","___result":{"$eref":{"minItems":0,"description":"An array of routes","type":"object","items":{"$ref":"#\/definitions\/Model\/route"}}}}},"readAllRules":{"description":"Returns an array of registered rules by class (debugging)","type":"object","properties":{"___function":{"type":"string","enum":["readAllRules"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"query","___result":{"$eref":{"minItems":0,"description":"An array of rules","type":"object","items":{"$ref":"#\/definitions\/Model\/rule"}}}}},"readAssetSamples":{"description":"Returns samples of selected contract objects","type":"object","properties":{"___function":{"type":"string","enum":["readAssetSamples"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"query","___result":{"type":"object","properties":{}}}},"deleteAssetStateHistory":{"description":"Delete an asset's history from world state, transactions remain on the blockchain","type":"object","properties":{"___function":{"type":"string","enum":["deleteAssetStateHistory"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___$ref":"#\/definitions\/Model\/assetKey"}}},"___method":"invoke"}},"deleteWorldState":{"description":"**** WARNING *** Clears the entire contents of world state, redeploy the contract after using this, in debugging mode, will require a restart","type":"object","properties":{"___function":{"type":"string","enum":["deleteWorldState"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"invoke"}},"setCreateOnFirstUpdate":{"description":"Allow updateAsset to create an asset upon receipt of its first event","type":"object","properties":{"___function":{"type":"string","enum":["setCreateOnFirstUpdate"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___setCreateOnFirstUpdate":{"description":"Allows updates to create missing assets on first event","type":"boolean"}}}},"___method":"invoke"}},"createAsset":{"description":"Creates a new asset by class","type":"object","properties":{"___function":{"type":"string","enum":["createAsset"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___asset":{"$eref":{"description":"The changeable properties for an asset, also considered its 'event' as a partial state","type":"object","properties":{"___temperature":{"description":"Temperature of an asset's contents in degrees Celsuis","type":"number"},"___carrier":{"description":"The carrier in possession of this asset","type":"string"},"___common":{"$ref":"#\/definitions\/Model\/ioteventcommon"},"___assetID":{"$ref":"#\/definitions\/Model\/assetID"}},"required":["assetID"]}}}}},"___method":"invoke"}},"deleteAllAssets":{"description":"Delete all assets from world state, supports filters","type":"object","properties":{"___function":{"type":"string","enum":["deleteAllAssets"]},"___args":{"minItems":0,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___filter":{"$eref":{"description":"Filter asset states","type":"object","properties":{"___match":{"description":"Defines how to match properties, missing property always fails match","type":"string","enum":["n\/a","all","any","none"]},"___select":{"description":"Qualified property names and values match","type":"array","items":{"type":"object","properties":{"___value":{"description":"Value to be compared","type":"string"},"___qprop":{"description":"Qualified property to compare, for example 'asset.assetID'","type":"string"}}}}}}}}}},"___method":"invoke"}},"readWorldState":{"description":"Returns the entire contents of world state","type":"object","properties":{"___function":{"type":"string","enum":["readWorldState"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{}},"___method":"query","___result":{"type":"object","properties":{}}}},"deleteAsset":{"description":"Delete an asset from world state, transactions remain on the blockchain","type":"object","properties":{"___function":{"type":"string","enum":["deleteAsset"]},"___args":{"minItems":1,"maxItems":1,"type":"array","items":{"type":"object","properties":{"___$ref":"#\/definitions\/Model\/assetKey"}}},"___method":"invoke"}},"readRecentStates":{"description":"Returns the state of recently updated assets","type":"object","properties":{"___function":{"type":"string","enum":["readRecentStates"]},"___args":{"minItems":0,"maxItems":0,"type":"array","items":{"type":"object","properties":{"___begin":{"description":"zero based beginning of range","type":"integer"},"___end":{"description":"zero based end of range, absence means to end","type":"integer"}}}},"___method":"query","___result":{"$eref":{"minItems":0,"description":"Array of asset states, can mix asset classes","type":"array","items":{"$ref":"#\/definitions\/Model\/assetstate"}}}}}},"_88Model":{"assetstateexternal":{"patternProperties":{"___^DEF":{"$eref":{"description":"A asset's complete state","type":"object","properties":{"___txnid":{"description":"Transaction UUID matching the blockchain","type":"string"},"___compliant":{"description":"This asset has no active alerts","type":"boolean"},"___state":{"description":"Properties that have been received or calculated for this asset","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/asset"}}},"___class":{"$ref":"#\/definitions\/Model\/assetClass"},"___alerts":{"$ref":"#\/definitions\/Model\/alertNameArray"},"___eventin":{"description":"The contract event that created this state, for example updateAsset","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/asset"}}},"___eventout":{"description":"The chaincode event emitted on invoke exit, if any","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/eventIOTContractPlatformInvokeResult"}}},"___txnts":{"description":"Transaction timestamp matching the blockchain","type":"string"},"___assetID":{"description":"This asset's world state asset ID","type":"string"}}},"description":"The external state of one asset asset, named by its world state ID","type":"object"}},"description":"(deprecated)","type":"object"},"dateRange":{"description":"if specified, dates must fall in between these values, inclusive","type":"object","properties":{"___begin":{"format":"date-time","description":"timestamp formatted yyyy-mm-dd hh:mm:ss","type":"string","sample":"yyyy-mm-dd hh:mm:ss"},"___end":{"format":"date-time","description":"timestamp formatted yyyy-mm-dd hh:mm:ss","type":"string","sample":"yyyy-mm-dd hh:mm:ss"}}},"rule":{"description":"A rule defines a behavior that is applied to every new asset state just before writing to world state, often raises or clears alerts","type":"object","properties":{"___rulename":{"type":"string"},"___class":{"$eref":{"description":"An asset's classifier definition","type":"object","properties":{"___name":"An asset's class name","___prefix":"An asset's world state prefix, used to allow iteration over all assets of a class","___assetidpath":"An asset's primary key, expressed as a qualified property path (see example contracts)"}}},"___alerts":{"$eref":{"description":"An array of alert names","type":"array","items":{"$ref":"#\/definitions\/Model\/alertName"}}}}},"alertNameArray":{"description":"An array of alert names","type":"array","items":{"$eref":{"description":"An alert name","type":"string"}}},"assetstate":{"description":"A asset's complete state","type":"object","properties":{"___txnid":{"description":"Transaction UUID matching the blockchain","type":"string"},"___compliant":{"description":"This asset has no active alerts","type":"boolean"},"___state":{"description":"Properties that have been received or calculated for this asset","type":"object","properties":{"___asset":{"$eref":{"description":"The changeable properties for an asset, also considered its 'event' as a partial state","type":"object","properties":{"___temperature":{"description":"Temperature of an asset's contents in degrees Celsuis","type":"number"},"___carrier":{"description":"The carrier in possession of this asset","type":"string"},"___common":{"$ref":"#\/definitions\/Model\/ioteventcommon"},"___assetID":{"$ref":"#\/definitions\/Model\/assetID"}},"required":["assetID"]}}}},"___class":{"$eref":{"description":"An asset's classifier definition","type":"object","properties":{"___name":"An asset's class name","___prefix":"An asset's world state prefix, used to allow iteration over all assets of a class","___assetidpath":"An asset's primary key, expressed as a qualified property path (see example contracts)"}}},"___alerts":{"$eref":{"description":"An array of alert names","type":"array","items":{"$ref":"#\/definitions\/Model\/alertName"}}},"___eventin":{"description":"The contract event that created this state, for example updateAsset","type":"object","properties":{"___asset":{"$eref":{"description":"The changeable properties for an asset, also considered its 'event' as a partial state","type":"object","properties":{"___temperature":{"description":"Temperature of an asset's contents in degrees Celsuis","type":"number"},"___carrier":{"description":"The carrier in possession of this asset","type":"string"},"___common":{"$ref":"#\/definitions\/Model\/ioteventcommon"},"___assetID":{"$ref":"#\/definitions\/Model\/assetID"}},"required":["assetID"]}}}},"___eventout":{"description":"The chaincode event emitted on invoke exit, if any","type":"object","properties":{"___asset":{"$eref":{"description":"A chaincode event defining the standard platform-generated result event for a contract invoke, contains an array of contributed results","type":"object","properties":{"___name":{"default":"EVT.IOTCP.INVOKE.RESULT","type":"string","enum":["EVT.IOTCP.INVOKE.RESULT"]},"___payload":{"description":"A map of contributed results","type":"object","properties":{"___$ref":"#\/definitions\/Model\/eventIOTContractPlatformStatus"}}}}}}},"___txnts":{"description":"Transaction timestamp matching the blockchain","type":"string"},"___assetID":{"description":"This asset's world state asset ID","type":"string"}}},"assetClass":{"description":"An asset's classifier definition","type":"object","properties":{"___name":"An asset's class name","___prefix":"An asset's world state prefix, used to allow iteration over all assets of a class","___assetidpath":"An asset's primary key, expressed as a qualified property path (see example contracts)"}},"version":{"description":"The version number of the current contract instance","type":"string"},"assetKey":{"asset":{"type":"object","properties":{"___assetID":{"$eref":{"description":"An asset's unique ID, e.g. barcode, VIN, etc.","type":"string"}}}}},"routeArray":{"minItems":0,"description":"An array of routes","type":"object","items":{"$eref":{"description":"A route defines a contract API that can be called to perform a service","type":"object","properties":{"___class":{"$ref":"#\/definitions\/Model\/assetClass"},"___method":{"type":"string"},"___functionname":{"type":"string"}}}}},"geo":{"description":"A geographical coordinate","type":"object","properties":{"___latitude":{"type":"number"},"___longitude":{"type":"number"}}},"contractState":{"type":"object","properties":{"___version":{"$eref":{"description":"The version number of the current contract instance","type":"string"}},"___nickname":{"$eref":{"default":"IOT Contract Platform","description":"The nickname of the current contract instance","type":"string"}}}},"route":{"description":"A route defines a contract API that can be called to perform a service","type":"object","properties":{"___class":{"$eref":{"description":"An asset's classifier definition","type":"object","properties":{"___name":"An asset's class name","___prefix":"An asset's world state prefix, used to allow iteration over all assets of a class","___assetidpath":"An asset's primary key, expressed as a qualified property path (see example contracts)"}}},"___method":{"type":"string"},"___functionname":{"type":"string"}}},"stateFilter":{"description":"Filter asset states","type":"object","properties":{"___match":{"description":"Defines how to match properties, missing property always fails match","type":"string","enum":["n\/a","all","any","none"]},"___select":{"description":"Qualified property names and values match","type":"array","items":{"type":"object","properties":{"___value":{"description":"Value to be compared","type":"string"},"___qprop":{"description":"Qualified property to compare, for example 'asset.assetID'","type":"string"}}}}}},"alertName":{"description":"An alert name","type":"string"},"assetID":{"description":"An asset's unique ID, e.g. barcode, VIN, etc.","type":"string"},"nickname":{"default":"IOT Contract Platform","description":"The nickname of the current contract instance","type":"string"},"ioteventcommon":{"description":"Common properties for all assets","type":"object","properties":{"___location":{"$eref":{"description":"A geographical coordinate","type":"object","properties":{"___latitude":{"type":"number"},"___longitude":{"type":"number"}}}},"___deviceID":{"description":"A unique identifier for the device that sent the current event","type":"string"},"___appdata":{"minItems":0,"description":"Application managed information as an array of key:value pairs","type":"array","items":{"type":"object","properties":{"___K":{"type":"string"},"___V":{"type":"string"}}}},"___devicetimestamp":{"description":"A timestamp recoded by the device that sent the current event","type":"string"}}},"assetstatearray":{"minItems":0,"description":"Array of asset states, can mix asset classes","type":"array","items":{"$eref":{"description":"A asset's complete state","type":"object","properties":{"___txnid":{"description":"Transaction UUID matching the blockchain","type":"string"},"___compliant":{"description":"This asset has no active alerts","type":"boolean"},"___state":{"description":"Properties that have been received or calculated for this asset","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/asset"}}},"___class":{"$ref":"#\/definitions\/Model\/assetClass"},"___alerts":{"$ref":"#\/definitions\/Model\/alertNameArray"},"___eventin":{"description":"The contract event that created this state, for example updateAsset","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/asset"}}},"___eventout":{"description":"The chaincode event emitted on invoke exit, if any","type":"object","properties":{"___asset":{"$ref":"#\/definitions\/Model\/eventIOTContractPlatformInvokeResult"}}},"___txnts":{"description":"Transaction timestamp matching the blockchain","type":"string"},"___assetID":{"description":"This asset's world state asset ID","type":"string"}}}}},"eventIOTContractPlatformStatus":{"description":"the overall status of the invoke result, defined by err","type":"object","properties":{"___activeAlerts":{"$eref":{"description":"An array of alert names","type":"array","items":{"$ref":"#\/definitions\/Model\/alertName"}}},"___alertsCleared":{"$eref":{"description":"An array of alert names","type":"array","items":{"$ref":"#\/definitions\/Model\/alertName"}}},"___invokeresult":{"description":"status: OK==txn succeeded, ERROR==txn failed","type":"object","properties":{"___status":{"type":"string","enum":["OK","ERROR"]},"___message":{"type":"string"}}},"___alertsRaised":{"$eref":{"description":"An array of alert names","type":"array","items":{"$ref":"#\/definitions\/Model\/alertName"}}}}},"ruleArray":{"minItems":0,"description":"An array of rules","type":"object","items":{"$eref":{"description":"A rule defines a behavior that is applied to every new asset state just before writing to world state, often raises or clears alerts","type":"object","properties":{"___rulename":{"type":"string"},"___class":{"$ref":"#\/definitions\/Model\/assetClass"},"___alerts":{"$ref":"#\/definitions\/Model\/alertNameArray"}}}}},"asset":{"description":"The changeable properties for an asset, also considered its 'event' as a partial state","type":"object","properties":{"___temperature":{"description":"Temperature of an asset's contents in degrees Celsuis","type":"number"},"___carrier":{"description":"The carrier in possession of this asset","type":"string"},"___common":{"$eref":{"description":"Common properties for all assets","type":"object","properties":{"___location":{"$ref":"#\/definitions\/Model\/geo"},"___deviceID":{"description":"A unique identifier for the device that sent the current event","type":"string"},"___appdata":{"minItems":0,"description":"Application managed information as an array of key:value pairs","type":"array","items":{"type":"object","properties":{"___K":{"type":"string"},"___V":{"type":"string"}}}},"___devicetimestamp":{"description":"A timestamp recoded by the device that sent the current event","type":"string"}}}},"___assetID":{"$eref":{"description":"An asset's unique ID, e.g. barcode, VIN, etc.","type":"string"}}},"required":["assetID"]},"eventIOTContractPlatformInvokeResult":{"description":"A chaincode event defining the standard platform-generated result event for a contract invoke, contains an array of contributed results","type":"object","properties":{"___name":{"default":"EVT.IOTCP.INVOKE.RESULT","type":"string","enum":["EVT.IOTCP.INVOKE.RESULT"]},"___payload":{"description":"A map of contributed results","type":"object","properties":{"___$ref":"#\/definitions\/Model\/eventIOTContractPlatformStatus"}}}}}}}