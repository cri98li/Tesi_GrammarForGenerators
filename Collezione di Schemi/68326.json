{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","anyOf":[{"additionalProperties":false,"properties":{"___go":{"additionalProperties":false,"type":"object","properties":{"___modules":{"type":["array","null"],"items":{"additionalProperties":false,"type":"object","properties":{"___module":{"examples":["example.com\/go\/packagename","example.com\/go\/anotherpackage"],"description":"Top-level Go module (package) name which will be built","type":"string"},"___archive":{"examples":["anotherpackage.tar.gz"],"description":"Possibly-compressed archive containing full source code including dependencies","type":"string"},"___path":{"examples":["anotherpackage-v0.54.1"],"description":"Path to directory containing source code (or its parent), possibly within archive","type":"string"}},"required":["module"]}}}},"___version":{"$eref":{"default":1,"description":"Deprecated option kept for backwards compatibility. Should not be used","type":"integer","minimum":1}},"___tags":{"$eref":{"examples":["latest","1.0","demo"],"description":"Tags to apply to the built image","type":"array"}},"___image_build_method":{"$eref":{"description":"build-step plugin to be used","enum":["docker_api","imagebuilder","buildah_bud"]}},"___flatpak":{"$eref":{"description":"Information used to build a Flatpak","type":["object","null"]}},"___platforms":{"$eref":{"additionalProperties":false,"type":["object","null"],"properties":{"___only":{"description":"Platform(s) to build image for","$ref":"#\/definitions\/platforms"},"___not":{"description":"Platform(s) not to build image for","$ref":"#\/definitions\/platforms"}}}},"___compose":{"$eref":{"additionalProperties":false,"type":["object","null"],"properties":{"___include_unpublished_pulp_repos":{"description":"include unpublished repos in pulp input content-sets","type":"boolean"},"___signing_intent":{"examples":["release","unsigned"],"description":"Name of ODCS signing intent used to verify package signatures","type":"string"},"___multilib_method":{"description":"list of options to decide if a package is multilib","type":["array","null"],"items":{"enum":["none","iso","runtime","devel","all"]}},"___modules":{"description":"names of modules to include","type":["array","null"],"items":{"examples":["module_name1:stream1","module_name2:stream1"],"type":"string"}},"___pulp_repos":{"description":"whether to build pulp composes","type":"boolean"},"___packages":{"description":"names of RPMs to include","type":["array","null"],"items":{"examples":["httpd","httpd-devel"],"type":"string"}},"___multilib_arches":{"description":"list of arches which will get multilib composes","type":["array","null"],"items":{"examples":["x86_64","ppc64le"],"type":"string"}},"___modular_koji_tags":{"description":"tags of modular Koji content to include in the build","type":["array","null"],"items":{"examples":["f30-modules","rhel-8.2.1-modules"],"type":"string"}},"___inherit":{"description":"enable inheritance of yum repourls and composes from baseimage build (disabled by default)","type":"boolean"}}}},"___autorebuild":{"$eref":{"additionalProperties":false,"type":["object","null"],"properties":{"___add_timestamp_to_release":{"description":"Whether to append timestamp to explicitly specified release for autorebuilds","type":"boolean"},"___from_latest":{"description":"Whether to rebuild from the latest commit","type":"boolean"}}}},"___set_release_env":{"$eref":{"examples":["CONTAINER_RELEASE_NVR","IMAGE_RELEASE","OS_BUILD"],"description":"Name of an environment variable to set in the Dockerfile file with the release number","type":"string"}}}},{"additionalProperties":false,"properties":{"___version":{"$eref":{"default":1,"description":"Deprecated option kept for backwards compatibility. Should not be used","type":"integer","minimum":1}},"___tags":{"$eref":{"examples":["latest","1.0","demo"],"description":"Tags to apply to the built image","type":"array"}},"___image_build_method":{"$eref":{"description":"build-step plugin to be used","enum":["docker_api","imagebuilder","buildah_bud"]}},"___flatpak":{"$eref":{"description":"Information used to build a Flatpak","type":["object","null"]}},"___remote_source":{"additionalProperties":false,"type":["object","null"],"properties":{"___ref":{"examples":["b55c00f45ec3dfee0c766cea3d395d6e21cc2e5a","651abc41170e52866148cc0c99c3671a2ace7002"],"pattern":"^[0-9a-z]{40}$","description":"SCM reference to fetch from repository","type":"string"},"___flags":{"description":"list of flags to pass to the Cachito request","type":["array","null"],"items":{"examples":["enable-confeti","enable-party-popper"],"type":"string"}},"___pkg_managers":{"description":"list of package managers to be used for resolving dependencies","type":["array","null"],"items":{"examples":["gomod"],"type":"string"}},"___repo":{"examples":["https:\/\/git.example.com\/team\/repo.git","https:\/\/git.example.com\/another-repo.git"],"description":"URL to the SCM repository","type":"string"}},"required":["repo","ref"]},"___platforms":{"$eref":{"additionalProperties":false,"type":["object","null"],"properties":{"___only":{"description":"Platform(s) to build image for","$ref":"#\/definitions\/platforms"},"___not":{"description":"Platform(s) not to build image for","$ref":"#\/definitions\/platforms"}}}},"___compose":{"$eref":{"additionalProperties":false,"type":["object","null"],"properties":{"___include_unpublished_pulp_repos":{"description":"include unpublished repos in pulp input content-sets","type":"boolean"},"___signing_intent":{"examples":["release","unsigned"],"description":"Name of ODCS signing intent used to verify package signatures","type":"string"},"___multilib_method":{"description":"list of options to decide if a package is multilib","type":["array","null"],"items":{"enum":["none","iso","runtime","devel","all"]}},"___modules":{"description":"names of modules to include","type":["array","null"],"items":{"examples":["module_name1:stream1","module_name2:stream1"],"type":"string"}},"___pulp_repos":{"description":"whether to build pulp composes","type":"boolean"},"___packages":{"description":"names of RPMs to include","type":["array","null"],"items":{"examples":["httpd","httpd-devel"],"type":"string"}},"___multilib_arches":{"description":"list of arches which will get multilib composes","type":["array","null"],"items":{"examples":["x86_64","ppc64le"],"type":"string"}},"___modular_koji_tags":{"description":"tags of modular Koji content to include in the build","type":["array","null"],"items":{"examples":["f30-modules","rhel-8.2.1-modules"],"type":"string"}},"___inherit":{"description":"enable inheritance of yum repourls and composes from baseimage build (disabled by default)","type":"boolean"}}}},"___autorebuild":{"$eref":{"additionalProperties":false,"type":["object","null"],"properties":{"___add_timestamp_to_release":{"description":"Whether to append timestamp to explicitly specified release for autorebuilds","type":"boolean"},"___from_latest":{"description":"Whether to rebuild from the latest commit","type":"boolean"}}}},"___set_release_env":{"$eref":{"examples":["CONTAINER_RELEASE_NVR","IMAGE_RELEASE","OS_BUILD"],"description":"Name of an environment variable to set in the Dockerfile file with the release number","type":"string"}}}}],"title":"container image build configuration","type":["object","null"],"definitions":{"_88image_build_method":{"description":"build-step plugin to be used","enum":["docker_api","imagebuilder","buildah_bud"]},"_88compose":{"additionalProperties":false,"type":["object","null"],"properties":{"___include_unpublished_pulp_repos":{"description":"include unpublished repos in pulp input content-sets","type":"boolean"},"___signing_intent":{"examples":["release","unsigned"],"description":"Name of ODCS signing intent used to verify package signatures","type":"string"},"___multilib_method":{"description":"list of options to decide if a package is multilib","type":["array","null"],"items":{"enum":["none","iso","runtime","devel","all"]}},"___modules":{"description":"names of modules to include","type":["array","null"],"items":{"examples":["module_name1:stream1","module_name2:stream1"],"type":"string"}},"___pulp_repos":{"description":"whether to build pulp composes","type":"boolean"},"___packages":{"description":"names of RPMs to include","type":["array","null"],"items":{"examples":["httpd","httpd-devel"],"type":"string"}},"___multilib_arches":{"description":"list of arches which will get multilib composes","type":["array","null"],"items":{"examples":["x86_64","ppc64le"],"type":"string"}},"___modular_koji_tags":{"description":"tags of modular Koji content to include in the build","type":["array","null"],"items":{"examples":["f30-modules","rhel-8.2.1-modules"],"type":"string"}},"___inherit":{"description":"enable inheritance of yum repourls and composes from baseimage build (disabled by default)","type":"boolean"}}},"_88autorebuild":{"additionalProperties":false,"type":["object","null"],"properties":{"___add_timestamp_to_release":{"description":"Whether to append timestamp to explicitly specified release for autorebuilds","type":"boolean"},"___from_latest":{"description":"Whether to rebuild from the latest commit","type":"boolean"}}},"_88tags":{"examples":["latest","1.0","demo"],"description":"Tags to apply to the built image","type":"array"},"_88platforms":{"oneOf":[{"$eref":{"examples":["x86_64","ppc64le","armhfp"],"description":"Platform name","type":"string"}},{"type":"array","items":{"$eref":{"examples":["x86_64","ppc64le","armhfp"],"description":"Platform name","type":"string"}}}]},"_88set_release_env":{"examples":["CONTAINER_RELEASE_NVR","IMAGE_RELEASE","OS_BUILD"],"description":"Name of an environment variable to set in the Dockerfile file with the release number","type":"string"},"_88all_platforms":{"additionalProperties":false,"type":["object","null"],"properties":{"___only":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/platform"},{"type":"array","items":{"$ref":"#\/definitions\/platform"}}]},"description":"Platform(s) to build image for"},"___not":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/platform"},{"type":"array","items":{"$ref":"#\/definitions\/platform"}}]},"description":"Platform(s) not to build image for"}}},"_88platform":{"examples":["x86_64","ppc64le","armhfp"],"description":"Platform name","type":"string"},"_88version":{"default":1,"description":"Deprecated option kept for backwards compatibility. Should not be used","type":"integer","minimum":1},"_88flatpak":{"description":"Information used to build a Flatpak","type":["object","null"]}}}