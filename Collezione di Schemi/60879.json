{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/cachemanager.michaco.net\/schemas\/cachemanager.json","title":"JSON schema for CacheManager configuration files","type":"object","definitions":{"_88redisConnectionString":{"description":"A connection string based redis configuration.","additionalProperties":false,"type":"object","properties":{"___strictCompatibilityModeVersion":{"minLength":1,"description":"Set an explicit version to restrict features available to CacheManager. Set this to 2.4 for example to disallow LUA scripting.","type":"string"},"___key":{"$eref":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"}},"___twemproxyEnabled":{"description":"Set this to true only if you are using Twemproxy.","type":"boolean"},"___database":{"description":"The database to be used on the redis instance.","type":"integer","minimum":0},"___connectionString":{"minLength":1,"description":"The StackExchange.Redis connection string, see https:\/\/github.com\/StackExchange\/StackExchange.Redis\/blob\/master\/Docs\/Configuration.md.","type":"string"}},"required":["key","connectionString"]},"_88knownLoggerFactory":{"additionalProperties":false,"type":"object","properties":{"___knownType":{"description":"Choose one of the known logger factories instead of typing the full type name. The corresponding package for the logger factory must be installed.","type":"string","enum":["Microsoft"]}},"required":["knownType"]},"_88handle":{"oneOf":[{"$eref":{"type":"object","properties":{"___knownType":{"description":"Shortcut to the known cache handle types. This requires the corresponding packages are installed.","type":"string","enum":["SystemRuntime","Dictionary","SystemWeb","MsMemory"]}},"required":["knownType"]}},{"$eref":{"type":"object","properties":{"___key":{"$ref":"#\/definitions\/configurationKey"},"___knownType":{"description":"Shortcut to the known cache handle types. This requires the corresponding packages are installed.","type":"string","enum":["Redis","Couchbase","Memcached"]}},"required":["knownType","key"]}},{"$eref":{"type":"object","properties":{"___key":{"$ref":"#\/definitions\/configurationKey"},"___type":{"minLength":1,"description":"The clr type of the cache handle. Must be an open generic type definition.","type":"string"}},"required":["type"]}}],"uniqueItems":true,"type":"object","properties":{"___name":{"description":"The name of the cache handle.","type":"string"},"___enableStatistics":{"description":"Defines if statistics should be captured.","type":"boolean"},"___expirationTimeout":{"$eref":{"minLength":1,"format":"regex","pattern":"^((?:-?0*\\d+\\.)?(?:0*)(?:2[0-3]|1[0-9]|[0-9]))(?::0*([0-5]?[0-9]))?(?::0*((?:[0-5]?[0-9])(?:\\.\\d{0,7})?))?$","description":"The expiration timeout in milliseconds (only required if expirationMode is not None)","type":"string"}},"___enablePerformanceCounters":{"description":"Defines if windows performance counters should be enabled or not.","type":"boolean"},"___expirationMode":{"$eref":{"description":"The expiration mode for the current configuration element","type":"string","enum":["None","Absolute","Sliding"]}},"___isBackplaneSource":{"description":"Determines if the cache handle is the backplane's source. (optional; if no backplane is defined, this can stay empty. If a backplane is defined, at least one handle must be flagged.)","type":"boolean"}}},"_88redisConfiguration":{"description":"A redis configuration.","additionalProperties":false,"type":"object","properties":{"___strictCompatibilityModeVersion":{"minLength":1,"description":"Set an explicit version to restrict features available to CacheManager. Set this to 2.4 for example to disallow LUA scripting.","type":"string"},"___sslHost":{"$eref":{"oneOf":[{"format":"hostname"},{"format":"ipv4"},{"format":"ipv6"}],"description":"The host name or IP address.","type":"string"},"description":"The ssl host to be used in conjunction with the ssl flag."},"___key":{"$eref":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"}},"___password":{"minLength":1,"description":"The server password.","type":"string"},"___allowAdmin":{"description":"If set to true, enables certain commands which might be time intensive, e.g. FLUSHDB.","type":"boolean"},"___twemproxyEnabled":{"description":"Set this to true only if you are using Twemproxy.","type":"boolean"},"___endpoints":{"minItems":1,"description":"The collection of redis hosts.","type":"array","items":{"type":"object","properties":{"___port":{"maximum":65535,"description":"The port number of the redis host.","type":"integer","minimum":0},"___host":{"$eref":{"oneOf":[{"format":"hostname"},{"format":"ipv4"},{"format":"ipv6"}],"description":"The host name or IP address.","type":"string"}}},"required":["host","port"]}},"___database":{"description":"The database to be used on the redis instance.","type":"integer","minimum":0},"___isSsl":{"description":"Defines if an ssl connection should be used.","type":"boolean"},"___keyspaceNotificationsEnabled":{"description":"If set to true, CacheManager will listen to evicted and expired keyevent notifications. In redis, notify-keyspace-events must be set to at least Exe, otherwise the feature will not work.","type":"boolean"},"___connectionTimeout":{"description":"The time in milliseconds before the connection attempt gets timed out.","type":"integer","minimum":0}},"required":["key","endpoints"]},"_88host":{"oneOf":[{"format":"hostname"},{"format":"ipv4"},{"format":"ipv6"}],"description":"The host name or IP address.","type":"string"},"_88expirationTimeout":{"minLength":1,"format":"regex","pattern":"^((?:-?0*\\d+\\.)?(?:0*)(?:2[0-3]|1[0-9]|[0-9]))(?::0*([0-5]?[0-9]))?(?::0*((?:[0-5]?[0-9])(?:\\.\\d{0,7})?))?$","description":"The expiration timeout in milliseconds (only required if expirationMode is not None)","type":"string"},"_88channelName":{"minLength":1,"description":"If specified, this name will be used for communication channels, if applicable","type":"string"},"_88expirationMode":{"description":"The expiration mode for the current configuration element","type":"string","enum":["None","Absolute","Sliding"]},"_88knownHandle":{"type":"object","properties":{"___knownType":{"description":"Shortcut to the known cache handle types. This requires the corresponding packages are installed.","type":"string","enum":["SystemRuntime","Dictionary","SystemWeb","MsMemory"]}},"required":["knownType"]},"_88manager":{"default":{"_8_handles":[]},"description":"The configuration for one CacheManager instance.","additionalProperties":false,"type":"object","properties":{"___name":{"description":"The name of the cache manager instance.","type":"string"},"___serializer":{"oneOf":[{"$eref":{"additionalProperties":false,"type":"object","properties":{"___knownType":{"description":"Define a known serializer type instead of setting 'serializerType'. The respective library has to be installed. The default 'binary' might not be available on all platforms.","type":"string","enum":["Binary","Json","Protobuf","GzJson","BondCompactBinary","BondFastBinary","BondSimpleJson"]}},"required":["knownType"]}},{"$eref":{"additionalProperties":false,"type":"object","properties":{"___type":{"description":"The clr type of the serializer to be used by distributed cache handles.","type":"string"}},"required":["type"]}}],"description":"The logger factory configuration.","type":"object"},"___updateMode":{"default":"Up","description":"The update mode (default is Up).","type":"string","enum":["None","Full","Up"]},"___loggerFactory":{"oneOf":[{"$eref":{"additionalProperties":false,"type":"object","properties":{"___knownType":{"description":"Choose one of the known logger factories instead of typing the full type name. The corresponding package for the logger factory must be installed.","type":"string","enum":["Microsoft"]}},"required":["knownType"]}},{"$eref":{"additionalProperties":false,"type":"object","properties":{"___type":{"description":"The clr type of a logger factory which should be used by CacheManager to log events.","type":"string"}},"required":["type"]}}],"description":"The logger factory configuration.","type":"object"},"___backplane":{"oneOf":[{"$eref":{"additionalProperties":false,"type":"object","properties":{"___channelName":{"$ref":"#\/definitions\/channelName"},"___key":{"$ref":"#\/definitions\/configurationKey"},"___knownType":{"description":"Choose one of the known backplane types instead of typing the full type name. The corresponding package for the backplane implementation must be installed.","type":"string","enum":["Redis"]}},"required":["key","knownType"]}},{"$eref":{"additionalProperties":false,"type":"object","properties":{"___channelName":{"$ref":"#\/definitions\/channelName"},"___key":{"$ref":"#\/definitions\/configurationKey"},"___type":{"description":"The clr type of a backplane implementation.","type":"string"}},"required":["type","key"]}}],"description":"The backplane configuration.","type":"object"},"___maxRetries":{"description":"The number of retries in case the cache action fails before the cache manager throws the exception (default is 50).","type":"integer","minimum":0},"___handles":{"minItems":1,"description":"The collection of cache handles the CacheManager instance should use.","type":"array","items":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/knownHandle"},{"$ref":"#\/definitions\/knownHandleWithConfigurationKey"},{"$ref":"#\/definitions\/unknownHandle"}],"uniqueItems":true,"type":"object","properties":{"___name":{"description":"The name of the cache handle.","type":"string"},"___enableStatistics":{"description":"Defines if statistics should be captured.","type":"boolean"},"___expirationTimeout":{"$ref":"#\/definitions\/expirationTimeout"},"___enablePerformanceCounters":{"description":"Defines if windows performance counters should be enabled or not.","type":"boolean"},"___expirationMode":{"$ref":"#\/definitions\/expirationMode"},"___isBackplaneSource":{"description":"Determines if the cache handle is the backplane's source. (optional; if no backplane is defined, this can stay empty. If a backplane is defined, at least one handle must be flagged.)","type":"boolean"}}}}},"___retryTimeout":{"description":"The time between retries (default is 100).","type":"integer","minimum":0}},"required":["handles"]},"_88configurationKey":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"},"_88unknownSerializer":{"additionalProperties":false,"type":"object","properties":{"___type":{"description":"The clr type of the serializer to be used by distributed cache handles.","type":"string"}},"required":["type"]},"_88knownBackplane":{"additionalProperties":false,"type":"object","properties":{"___channelName":{"$eref":{"minLength":1,"description":"If specified, this name will be used for communication channels, if applicable","type":"string"}},"___key":{"$eref":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"}},"___knownType":{"description":"Choose one of the known backplane types instead of typing the full type name. The corresponding package for the backplane implementation must be installed.","type":"string","enum":["Redis"]}},"required":["key","knownType"]},"_88knownHandleWithConfigurationKey":{"type":"object","properties":{"___key":{"$eref":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"}},"___knownType":{"description":"Shortcut to the known cache handle types. This requires the corresponding packages are installed.","type":"string","enum":["Redis","Couchbase","Memcached"]}},"required":["knownType","key"]},"_88unknownLoggerFactory":{"additionalProperties":false,"type":"object","properties":{"___type":{"description":"The clr type of a logger factory which should be used by CacheManager to log events.","type":"string"}},"required":["type"]},"_88knownSerializer":{"additionalProperties":false,"type":"object","properties":{"___knownType":{"description":"Define a known serializer type instead of setting 'serializerType'. The respective library has to be installed. The default 'binary' might not be available on all platforms.","type":"string","enum":["Binary","Json","Protobuf","GzJson","BondCompactBinary","BondFastBinary","BondSimpleJson"]}},"required":["knownType"]},"_88unknownHandle":{"type":"object","properties":{"___key":{"$eref":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"}},"___type":{"minLength":1,"description":"The clr type of the cache handle. Must be an open generic type definition.","type":"string"}},"required":["type"]},"_88unknownBackplane":{"additionalProperties":false,"type":"object","properties":{"___channelName":{"$eref":{"minLength":1,"description":"If specified, this name will be used for communication channels, if applicable","type":"string"}},"___key":{"$eref":{"minLength":1,"description":"The key to identify this entity by other parts of the configuration. The key must be unique for all entities of the collection.","type":"string"}},"___type":{"description":"The clr type of a backplane implementation.","type":"string"}},"required":["type","key"]}},"properties":{"___cacheManagers":{"minItems":1,"default":[],"uniqueItems":true,"description":"The collection of CacheManager configurations.","type":"array","items":{"$eref":{"default":{"_8_handles":[]},"description":"The configuration for one CacheManager instance.","additionalProperties":false,"type":"object","properties":{"___name":{"description":"The name of the cache manager instance.","type":"string"},"___serializer":{"oneOf":[{"$ref":"#\/definitions\/knownSerializer"},{"$ref":"#\/definitions\/unknownSerializer"}],"description":"The logger factory configuration.","type":"object"},"___updateMode":{"default":"Up","description":"The update mode (default is Up).","type":"string","enum":["None","Full","Up"]},"___loggerFactory":{"oneOf":[{"$ref":"#\/definitions\/knownLoggerFactory"},{"$ref":"#\/definitions\/unknownLoggerFactory"}],"description":"The logger factory configuration.","type":"object"},"___backplane":{"oneOf":[{"$ref":"#\/definitions\/knownBackplane"},{"$ref":"#\/definitions\/unknownBackplane"}],"description":"The backplane configuration.","type":"object"},"___maxRetries":{"description":"The number of retries in case the cache action fails before the cache manager throws the exception (default is 50).","type":"integer","minimum":0},"___handles":{"minItems":1,"description":"The collection of cache handles the CacheManager instance should use.","type":"array","items":{"$ref":"#\/definitions\/handle"}},"___retryTimeout":{"description":"The time between retries (default is 100).","type":"integer","minimum":0}},"required":["handles"]}}},"___redis":{"minItems":1,"uniqueItems":true,"description":"The redis options. Use the 'key' of each item to reference them by other parts of the configuration.","type":"array","items":{"anyOf":[{"$eref":{"description":"A redis configuration.","additionalProperties":false,"type":"object","properties":{"___strictCompatibilityModeVersion":{"minLength":1,"description":"Set an explicit version to restrict features available to CacheManager. Set this to 2.4 for example to disallow LUA scripting.","type":"string"},"___sslHost":{"description":"The ssl host to be used in conjunction with the ssl flag.","$ref":"#\/definitions\/host"},"___key":{"$ref":"#\/definitions\/configurationKey"},"___password":{"minLength":1,"description":"The server password.","type":"string"},"___allowAdmin":{"description":"If set to true, enables certain commands which might be time intensive, e.g. FLUSHDB.","type":"boolean"},"___twemproxyEnabled":{"description":"Set this to true only if you are using Twemproxy.","type":"boolean"},"___endpoints":{"minItems":1,"description":"The collection of redis hosts.","type":"array","items":{"type":"object","properties":{"___port":{"maximum":65535,"description":"The port number of the redis host.","type":"integer","minimum":0},"___host":{"$ref":"#\/definitions\/host"}},"required":["host","port"]}},"___database":{"description":"The database to be used on the redis instance.","type":"integer","minimum":0},"___isSsl":{"description":"Defines if an ssl connection should be used.","type":"boolean"},"___keyspaceNotificationsEnabled":{"description":"If set to true, CacheManager will listen to evicted and expired keyevent notifications. In redis, notify-keyspace-events must be set to at least Exe, otherwise the feature will not work.","type":"boolean"},"___connectionTimeout":{"description":"The time in milliseconds before the connection attempt gets timed out.","type":"integer","minimum":0}},"required":["key","endpoints"]}},{"$eref":{"description":"A connection string based redis configuration.","additionalProperties":false,"type":"object","properties":{"___strictCompatibilityModeVersion":{"minLength":1,"description":"Set an explicit version to restrict features available to CacheManager. Set this to 2.4 for example to disallow LUA scripting.","type":"string"},"___key":{"$ref":"#\/definitions\/configurationKey"},"___twemproxyEnabled":{"description":"Set this to true only if you are using Twemproxy.","type":"boolean"},"___database":{"description":"The database to be used on the redis instance.","type":"integer","minimum":0},"___connectionString":{"minLength":1,"description":"The StackExchange.Redis connection string, see https:\/\/github.com\/StackExchange\/StackExchange.Redis\/blob\/master\/Docs\/Configuration.md.","type":"string"}},"required":["key","connectionString"]}}]}}},"required":["cacheManagers"]}