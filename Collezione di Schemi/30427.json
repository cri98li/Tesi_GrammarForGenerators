{"patternProperties":{"___^player[0-9]+$":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"type":"object","definitions":{"_88flair":{"description":"Describes the flair a player is showing.","type":"object","properties":{"___description":{"type":"string"},"___degree":{"description":"The visible degree for the player, or omitted entirely if not present.","type":"integer"},"___x":{"description":"The x position of the flair on the flair sprite. Type may change but will be convertible to int.","type":["integer","string"]},"___y":{"description":"The y position of the flair on the flair sprite. Type may change but will be convertible to int.","type":["integer","string"]}},"required":["x","y","description"]}},"properties":{"___team":{"type":"array","items":{"anyOf":[{"$ref":"definitions.json#\/team"},{"$ref":"definitions.json#\/frameArrayItem"}]}},"___degree":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/integer"}},"___grip":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/bool"}},"___popAnimation":{"description":"Property seen on replays processed\/saved with old version of renderer.","type":"object"},"___fps":{"description":"The FPS that the replay was recorded at.","type":"integer"},"___tagpro":{"type":"array","items":{"anyOf":[{"$ref":"definitions.json#\/frameArrayItem\/bool"},{"description":"New format powerup value. See #77.","type":"integer"}]}},"___flair":{"type":"array","items":{"anyOf":[{"$ref":"#\/definitions\/flair"},{"$ref":"definitions.json#\/frameArrayItem"}]}},"___me":{"description":"'me' if this player was the player recording, 'other' otherwise. Used for determining world center for replay rendering.","type":"string","enum":["other","me"]},"___name":{"anyOf":[{"description":"old format that didn't have an array","type":"string"},{"type":"array","items":{"anyOf":[{"type":"string"},{"$ref":"definitions.json#\/frameArrayItem"}]}}]},"___angle":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/number"}},"___auth":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/bool"}},"___bomb":{"type":"array","items":{"anyOf":[{"$ref":"definitions.json#\/frameArrayItem\/bool"},{"description":"New format powerup value, see #77.","type":"integer"}]}},"___draw":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/bool"}},"___x":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/number"}},"___dead":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/bool"}},"___y":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/number"}},"___flag":{"type":"array","items":{"anyOf":[{"description":"The type of flag held by a player in a specific frame, or null if there was no flag held.","title":"Flag Value.","type":["number","string"]},{"$ref":"definitions.json#\/frameArrayItem"}]}},"___map":{"description":"The name of the map played on in the replay.","type":"string"}},"required":["auth","bomb","dead","degree","draw","flag","flair","grip","me","map","fps","name","tagpro","team","x","y"]}}},"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Represents the state of replay objects as stored in IndexedDB v1\/2 and exported replays.","additionalProperties":false,"title":"Replay Data Version 1.","type":"object","definitions":{"_88chatInstance":{"oneOf":[{"additionalProperties":false,"type":"object","properties":{"___mod":{"description":"Optional mod parameter.","type":"boolean"},"___removeAt":{"$eref":{"description":"Time of an event in ms.","type":"integer","title":"Epoch Time (ms)."},"description":"The time at which to remove the chat, 30s after it was sent. May not be present if replay was made while 3.0 bug was present."},"___shake":{"type":"boolean"},"___message":{"description":"The message text, or a number which should be interpreted as text.","type":["string","integer"]},"___c":{"description":"Optional text color as hex code. Formatted like \/#\\d{6}\/.","type":"string"},"___idInGroup":{"type":["string","null"]},"___to":{"description":"The recipients of the chat, may be omitted in some cases (for events)","id":"to","type":"string","enum":["all","team","group"]},"___from":{"type":["string","integer","null"]}},"required":["from","message"]},{"description":"New chat format introduced to fix #104","additionalProperties":false,"type":"object","properties":{"___mod":{"description":"Optional mod parameter.","type":"boolean"},"___name":{"type":"string"},"___team":{"$eref":{"description":"Specifies team relevant to object, 1 for red or 2 for blue","type":"integer","title":"Team.","enum":[1,2]}},"___auth":{"type":["boolean","null"]},"___removeAt":{"$eref":{"description":"Time of an event in ms.","type":"integer","title":"Epoch Time (ms)."},"description":"The time at which to remove the chat, 30s after it was sent. May not be present if replay was made while 3.0 bug was present."},"___shake":{"type":"boolean"},"___message":{"type":"string"},"___c":{"description":"Optional text color.","type":"string"},"___idInGroup":{"type":["string","null"]},"___to":{"id":"to","type":"string","enum":["all","team","group"]},"___from":{"type":["string","integer","null"]}},"required":["auth","from","message","name","team","to"]},{"description":"Extraneous sound packet seen in some old replays.","additionalProperties":false,"type":"object","properties":{"___removeAt":{"type":"integer"},"___s":{"type":"string"},"___v":{"type":"number"}},"required":["s","v","removeAt"]}],"description":"Information about a message sent to the player via chat.","title":"Chat Message."},"_88playerId":{"type":"integer"},"_88stringTime":{"description":"String result of JSON parsing date objects.","type":"string"},"_88splat":{"description":"Information about a splat that has occurred.","additionalProperties":false,"title":"Splat.","type":"object","properties":{"___time":{"$eref":{"description":"String result of JSON parsing date objects.","type":"string"}},"___x":{"type":"number"},"___y":{"type":"number"},"___img":{"description":"Extra property added in earlier version of replays. Not used.","type":"integer"},"___t":{"$eref":{"description":"Specifies team relevant to object, 1 for red or 2 for blue","type":"integer","title":"Team.","enum":[1,2]}},"___temp":{"type":"boolean"}},"required":["t","x","y","time"]},"_88time":{"description":"Message sent to initialize wait period and game start.","type":"object","properties":{"___time":{"description":"The time left in the game, in ms.","type":"integer"},"___startTime":{"$eref":{"description":"String result of JSON parsing date objects.","type":"string"}},"___state":{"description":"The state to change to."}}},"_88spawn":{"description":"Information about a player spawning.","additionalProperties":false,"title":"Spawn Event.","type":"object","properties":{"___time":{"$eref":{"description":"String result of JSON parsing date objects.","type":"string"}},"___w":{"description":"Time before player spawns after spawn position appears.","title":"Wait Time.","type":"integer"},"___x":{"type":"number"},"___y":{"type":"number"},"___diedAt":{"description":"Additional property seen on some replays, origin unknown.","type":"number"},"___t":{"$eref":{"description":"Specifies team relevant to object, 1 for red or 2 for blue","type":"integer","title":"Team.","enum":[1,2]}}},"required":["t","w","x","y","time"]},"_88floorTile":{"description":"Object holding the information about the state of a tile throughout the replay.","additionalProperties":false,"title":"Dynamic Floor Tile.","properties":{"___x":{"description":"The X position of the tile in the map array.","type":["number","string"]},"___y":{"description":"The Y position of the tile in the map array.","type":["number","string"]},"___value":{"type":"array","items":{"type":["number","string"]}}},"required":["value","x","y"]},"_88object":{"description":"A non-player object that exists in the game, e.g. mars ball or egg","type":"object","properties":{"___type":{"description":"The type of the object, should be marsball or egg","type":"string"},"___draw":{"type":"array","items":{"$eref":{"anyOf":[{"$ref":"#\/frameArrayItem"},{"type":"boolean"}]}}},"___x":{"type":"array","items":{"$eref":{"anyOf":[{"$ref":"#\/frameArrayItem"},{"type":"number"}]}}},"___y":{"type":"array","items":{"$eref":{"anyOf":[{"$ref":"#\/frameArrayItem"},{"type":"number"}]}}},"___id":{"type":"integer"}}},"_88bombInstance":{"description":"Instance of an explosion.","additionalProperties":false,"type":"object","properties":{"___time":{"$eref":{"description":"String result of JSON parsing date objects.","type":"string"}},"___type":{"type":"integer","enum":[1,2,3]},"___x":{"type":"number"},"___bombAnimation":{"description":"Unnecessary property added by rendering."},"___y":{"type":"number"}},"required":["time","type","x","y"]},"_88epochTime":{"description":"Time of an event in ms.","type":"integer","title":"Epoch Time (ms)."},"_88score":{"description":"Represents the score at a point in time.","additionalProperties":false,"title":"Score Object.","type":"object","properties":{"___b":{"type":"integer"},"___r":{"type":"integer"}},"required":["b","r"]},"_88trimmableItem":{"description":"An item in an array that is usually trimmed on import but which may have leading zeros. Other validation should ensure only leading zeroes are present.","type":"integer","enum":[0]}},"properties":{"___chat":{"type":"array","items":{"$eref":{"oneOf":[{"additionalProperties":false,"type":"object","properties":{"___mod":{"description":"Optional mod parameter.","type":"boolean"},"___removeAt":{"description":"The time at which to remove the chat, 30s after it was sent. May not be present if replay was made while 3.0 bug was present.","$ref":"#\/definitions\/epochTime"},"___shake":{"type":"boolean"},"___message":{"description":"The message text, or a number which should be interpreted as text.","type":["string","integer"]},"___c":{"description":"Optional text color as hex code. Formatted like \/#\\d{6}\/.","type":"string"},"___idInGroup":{"type":["string","null"]},"___to":{"description":"The recipients of the chat, may be omitted in some cases (for events)","id":"to","type":"string","enum":["all","team","group"]},"___from":{"type":["string","integer","null"]}},"required":["from","message"]},{"description":"New chat format introduced to fix #104","additionalProperties":false,"type":"object","properties":{"___mod":{"description":"Optional mod parameter.","type":"boolean"},"___name":{"type":"string"},"___team":{"$ref":"definitions.json#\/team"},"___auth":{"type":["boolean","null"]},"___removeAt":{"description":"The time at which to remove the chat, 30s after it was sent. May not be present if replay was made while 3.0 bug was present.","$ref":"#\/definitions\/epochTime"},"___shake":{"type":"boolean"},"___message":{"type":"string"},"___c":{"description":"Optional text color.","type":"string"},"___idInGroup":{"type":["string","null"]},"___to":{"id":"to","type":"string","enum":["all","team","group"]},"___from":{"type":["string","integer","null"]}},"required":["auth","from","message","name","team","to"]},{"description":"Extraneous sound packet seen in some old replays.","additionalProperties":false,"type":"object","properties":{"___removeAt":{"type":"integer"},"___s":{"type":"string"},"___v":{"type":"number"}},"required":["s","v","removeAt"]}],"description":"Information about a message sent to the player via chat.","title":"Chat Message."}}},"___floorTiles":{"description":"Track information about the state of dynamic tiles on the map.","title":"Floor Tiles.","type":"array","items":{"$eref":{"description":"Object holding the information about the state of a tile throughout the replay.","additionalProperties":false,"title":"Dynamic Floor Tile.","properties":{"___x":{"description":"The X position of the tile in the map array.","type":["number","string"]},"___y":{"description":"The Y position of the tile in the map array.","type":["number","string"]},"___value":{"type":"array","items":{"type":["number","string"]}}},"required":["value","x","y"]}}},"___bombs":{"type":"array","items":{"$eref":{"description":"Instance of an explosion.","additionalProperties":false,"type":"object","properties":{"___time":{"$ref":"#\/definitions\/stringTime"},"___type":{"type":"integer","enum":[1,2,3]},"___x":{"type":"number"},"___bombAnimation":{"description":"Unnecessary property added by rendering."},"___y":{"type":"number"}},"required":["time","type","x","y"]}}},"___gameEndsAt":{"oneOf":[{"minItems":1,"maxItems":3,"type":"array","items":[{"$eref":{"description":"Time of an event in ms.","type":"integer","title":"Epoch Time (ms)."},"description":"The initial value of tagpro.gameEndsAt as of initialization of the replay recording script."},{"$eref":{"description":"Message sent to initialize wait period and game start.","type":"object","properties":{"___time":{"description":"The time left in the game, in ms.","type":"integer"},"___startTime":{"$ref":"#\/definitions\/stringTime"},"___state":{"description":"The state to change to."}}},"description":"The time message sent when the game starts, or the initial time message, depending on when recording started."},{"$eref":{"description":"Message sent to initialize wait period and game start.","type":"object","properties":{"___time":{"description":"The time left in the game, in ms.","type":"integer"},"___startTime":{"$ref":"#\/definitions\/stringTime"},"___state":{"description":"The state to change to."}}},"description":"The time message send when the game starts, if we got another time messages."}]},{"description":"Old version that only held the gameEndsAt value from the start of the recording initialization.","type":"integer"}],"description":"Holds information about the end of the game, if it occurred in the replay.","title":"Game End Info."},"___score":{"description":"Holds the scores for each team at each frame of the replay.","title":"Scores.","type":"array","items":{"anyOf":[{"$eref":{"description":"Represents the score at a point in time.","additionalProperties":false,"title":"Score Object.","type":"object","properties":{"___b":{"type":"integer"},"___r":{"type":"integer"}},"required":["b","r"]}},{"$eref":{"description":"An item in an array that is usually trimmed on import but which may have leading zeros. Other validation should ensure only leading zeroes are present.","type":"integer","enum":[0]}}]}},"___spawns":{"description":"Information about the spawns that occurred over the replay.","title":"Spawns.","type":"array","items":{"$eref":{"description":"Information about a player spawning.","additionalProperties":false,"title":"Spawn Event.","type":"object","properties":{"___time":{"$ref":"#\/definitions\/stringTime"},"___w":{"description":"Time before player spawns after spawn position appears.","title":"Wait Time.","type":"integer"},"___x":{"type":"number"},"___y":{"type":"number"},"___diedAt":{"description":"Additional property seen on some replays, origin unknown.","type":"number"},"___t":{"$ref":"definitions.json#\/team"}},"required":["t","w","x","y","time"]}}},"___clock":{"description":"The time corresponding to each frame.","type":"array","items":{"anyOf":[{"$eref":{"description":"String result of JSON parsing date objects.","type":"string"}},{"$eref":{"description":"An item in an array that is usually trimmed on import but which may have leading zeros. Other validation should ensure only leading zeroes are present.","type":"integer","enum":[0]}}]}},"___splats":{"description":"Information about the splats that have occurred over the replay.","title":"Splats.","type":"array","items":{"$eref":{"description":"Information about a splat that has occurred.","additionalProperties":false,"title":"Splat.","type":"object","properties":{"___time":{"$ref":"#\/definitions\/stringTime"},"___x":{"type":"number"},"___y":{"type":"number"},"___img":{"description":"Extra property added in earlier version of replays. Not used.","type":"integer"},"___t":{"$ref":"definitions.json#\/team"},"___temp":{"type":"boolean"}},"required":["t","x","y","time"]}}},"___tiles":{"description":"Converted tile information to use in reconstructing the replay.","title":"Tile Information."},"___wallMap":{"description":"As copied from tagpro.wallMap.","type":"array","items":{"type":"array","items":{"minItems":4,"maxItems":4,"type":"array","items":{"type":["number","string"]}}}},"___event":{"oneOf":[{"additionalItems":false,"description":"Egg ball event spring 2017.","type":"object","properties":{"___name":{"enum":["spring-2017"]},"___data":{"additionalItems":false,"type":"object","properties":{"___egg_holder":{"type":"array","items":{"anyOf":[{"$eref":{"type":"integer"}},{"type":"null"}]}}}}}}],"description":"Special event descriptor, has name and optional data"},"___objects":{"patternProperties":{"___^-?\\d+$":{"$eref":{"description":"A non-player object that exists in the game, e.g. mars ball or egg","type":"object","properties":{"___type":{"description":"The type of the object, should be marsball or egg","type":"string"},"___draw":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/bool"}},"___x":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/number"}},"___y":{"type":"array","items":{"$ref":"definitions.json#\/frameArrayItem\/number"}},"___id":{"type":"integer"}}}}},"description":"List of objects that appear in the replay, e.g. eggs or mars balls","additionalProperties":false,"type":"object"},"___map":{"description":"The 2d map array copied from tagpro.map.","type":"array","items":{"type":"array","items":{"type":["number","string"]}}},"___end":{"additionalProperties":false,"type":"object","properties":{"___time":{"$eref":{"description":"String result of JSON parsing date objects.","type":"string"}},"___groupId":{"description":"Not used but may be present.","type":["string","null"]},"___winner":{"type":"string"}},"required":["time","winner"]},"___tagproVersion":{"description":"Version of the TagPro client code for the recording, for forward compatibility in case of changes. Default should be assumed 3.2.1 (the value when this was implemented)","title":"TagPro Version","type":"string"}},"required":["bombs","chat","clock","floorTiles","map","score","spawns","splats","wallMap"]}