{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Microsoft VirtualMachineImages Resource Types","id":"https:\/\/schema.management.azure.com\/schemas\/2019-02-01-preview\/Microsoft.VirtualMachineImages.json#","title":"Microsoft.VirtualMachineImages","resourceDefinitions":{"imageTemplates":{"description":"Microsoft.VirtualMachineImages\/imageTemplates","type":"object","properties":{"___location":{"description":"Resource location","type":"string"},"___name":{"oneOf":[{"pattern":"^[A-Za-z0-9-_]{1,64}$","type":"string"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name of the image Template"},"___type":{"type":"string","enum":["Microsoft.VirtualMachineImages\/imageTemplates"]},"___tags":{"oneOf":[{"additionalProperties":{"type":"string"},"type":"object","properties":{}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Resource tags"},"___properties":{"oneOf":[{"$eref":{"type":"object","properties":{"___distribute":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/ImageTemplateDistributor"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The distribution targets where the image output needs to go to."},"___customize":{"oneOf":[{"type":"array","items":{"$ref":"#\/definitions\/ImageTemplateCustomizer"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Specifies the properties used to describe the customization steps of the image, like Image source etc"},"___source":{"oneOf":[{"$ref":"#\/definitions\/ImageTemplateSource"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}]}},"required":["distribute","source"]}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}]},"___apiVersion":{"type":"string","enum":["2019-02-01-preview"]}},"required":["apiVersion","location","name","properties","type"]}},"definitions":{"_88ImageTemplateRestartCustomizer":{"description":"Reboots a VM and waits for it to come back online (Windows). Corresponds to Packer windows-restart provisioner","type":"object","properties":{"___restartCheckCommand":{"description":"Command to check if restart succeeded [Default: '']","type":"string"},"___type":{"type":"string","enum":["WindowsRestart"]},"___restartCommand":{"description":"Command to execute the restart [Default: 'shutdown \/r \/f \/t 0 \/c \"packer restart\"']","type":"string"},"___restartTimeout":{"description":"Restart timeout specified as a string of magnitude and unit, e.g. '5m' (5 minutes) or '2h' (2 hours) [Default: '5m']","type":"string"}},"required":["type"]},"_88ImageTemplateSource":{"oneOf":[{"$eref":{"description":"Describes an image source that is an installation ISO. Currently only supports Red Hat Enterprise Linux 7.2-7.5 ISO's.","type":"object","properties":{"___type":{"type":"string","enum":["ISO"]},"___sourceURI":{"description":"URI to get the ISO image. This URI has to be accessible to the resource provider at the time of the image template creation.","type":"string"},"___sha256Checksum":{"description":"SHA256 Checksum of the ISO image.","type":"string"}},"required":["sha256Checksum","sourceURI","type"]}},{"$eref":{"description":"Describes an image source from [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"object","properties":{"___version":{"description":"Image version from the [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"},"___type":{"type":"string","enum":["PlatformImage"]},"___offer":{"description":"Image offer from the [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"},"___sku":{"description":"Image sku from the [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"},"___publisher":{"description":"Image Publisher in [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"}},"required":["type"]}},{"$eref":{"description":"Describes an image source that is a managed image in customer subscription.","type":"object","properties":{"___type":{"type":"string","enum":["ManagedImage"]},"___imageId":{"description":"ARM resource id of the managed image in customer subscription","type":"string"}},"required":["imageId","type"]}}],"type":"object","properties":{}},"_88ImageTemplateCustomizer":{"oneOf":[{"$eref":{"description":"Runs a shell script during the customization phase (Linux). Corresponds to Packer shell provisioner. Exactly one of 'script' or 'inline' can be specified.","type":"object","properties":{"___script":{"description":"The shell script to be run for customizing. It can be a github link, SAS URI for Azure Storage, etc","type":"string"},"___type":{"type":"string","enum":["Shell"]},"___inline":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Array of shell commands to execute"}},"required":["type"]}},{"$eref":{"description":"Reboots a VM and waits for it to come back online (Windows). Corresponds to Packer windows-restart provisioner","type":"object","properties":{"___restartCheckCommand":{"description":"Command to check if restart succeeded [Default: '']","type":"string"},"___type":{"type":"string","enum":["WindowsRestart"]},"___restartCommand":{"description":"Command to execute the restart [Default: 'shutdown \/r \/f \/t 0 \/c \"packer restart\"']","type":"string"},"___restartTimeout":{"description":"Restart timeout specified as a string of magnitude and unit, e.g. '5m' (5 minutes) or '2h' (2 hours) [Default: '5m']","type":"string"}},"required":["type"]}},{"$eref":{"description":"Runs the specified PowerShell on the VM (Windows). Corresponds to Packer powershell provisioner. Exactly one of 'script' or 'inline' can be specified.","type":"object","properties":{"___script":{"description":"The PowerShell script to be run for customizing. It can be a github link, SAS URI for Azure Storage, etc","type":"string"},"___validExitCodes":{"oneOf":[{"type":"array","items":{"type":"integer"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Valid exit codes for the PowerShell script. [Default: 0]"},"___type":{"type":"string","enum":["PowerShell"]},"___inline":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Array of PowerShell commands to execute"}},"required":["type"]}}],"type":"object","properties":{"___name":{"description":"Friendly Name to provide context on what this customization step does","type":"string"}}},"_88ImageTemplateVhdDistributor":{"description":"Distribute via VHD in a storage account.","type":"object","properties":{"___type":{"type":"string","enum":["VHD"]}},"required":["type"]},"_88ImageTemplateManagedImageSource":{"description":"Describes an image source that is a managed image in customer subscription.","type":"object","properties":{"___type":{"type":"string","enum":["ManagedImage"]},"___imageId":{"description":"ARM resource id of the managed image in customer subscription","type":"string"}},"required":["imageId","type"]},"_88ImageTemplateShellCustomizer":{"description":"Runs a shell script during the customization phase (Linux). Corresponds to Packer shell provisioner. Exactly one of 'script' or 'inline' can be specified.","type":"object","properties":{"___script":{"description":"The shell script to be run for customizing. It can be a github link, SAS URI for Azure Storage, etc","type":"string"},"___type":{"type":"string","enum":["Shell"]},"___inline":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Array of shell commands to execute"}},"required":["type"]},"_88ImageTemplatePowerShellCustomizer":{"description":"Runs the specified PowerShell on the VM (Windows). Corresponds to Packer powershell provisioner. Exactly one of 'script' or 'inline' can be specified.","type":"object","properties":{"___script":{"description":"The PowerShell script to be run for customizing. It can be a github link, SAS URI for Azure Storage, etc","type":"string"},"___validExitCodes":{"oneOf":[{"type":"array","items":{"type":"integer"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Valid exit codes for the PowerShell script. [Default: 0]"},"___type":{"type":"string","enum":["PowerShell"]},"___inline":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Array of PowerShell commands to execute"}},"required":["type"]},"_88ImageTemplateProperties":{"type":"object","properties":{"___distribute":{"oneOf":[{"type":"array","items":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/ImageTemplateManagedImageDistributor"},{"$ref":"#\/definitions\/ImageTemplateSharedImageDistributor"},{"$ref":"#\/definitions\/ImageTemplateVhdDistributor"}],"description":"Generic distribution object","type":"object","properties":{"___artifactTags":{"oneOf":[{"additionalProperties":{"type":"string"},"type":"object","properties":{}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"Tags that will be applied to the artifact once it has been created\/updated by the distributor."},"___runOutputName":{"oneOf":[{"pattern":"^[A-Za-z0-9-_]{1,64}$","type":"string"},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}],"description":"The name to be used for the associated RunOutput."}},"required":["runOutputName"]}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The distribution targets where the image output needs to go to."},"___customize":{"oneOf":[{"type":"array","items":{"$eref":{"oneOf":[{"$ref":"#\/definitions\/ImageTemplateShellCustomizer"},{"$ref":"#\/definitions\/ImageTemplateRestartCustomizer"},{"$ref":"#\/definitions\/ImageTemplatePowerShellCustomizer"}],"type":"object","properties":{"___name":{"description":"Friendly Name to provide context on what this customization step does","type":"string"}}}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Specifies the properties used to describe the customization steps of the image, like Image source etc"},"___source":{"oneOf":[{"$eref":{"oneOf":[{"$ref":"#\/definitions\/ImageTemplateIsoSource"},{"$ref":"#\/definitions\/ImageTemplatePlatformImageSource"},{"$ref":"#\/definitions\/ImageTemplateManagedImageSource"}],"type":"object","properties":{}}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}]}},"required":["distribute","source"]},"_88ImageTemplateManagedImageDistributor":{"description":"Distribute as a Managed Disk Image.","type":"object","properties":{"___location":{"description":"Azure location for the image, should match if image already exists","type":"string"},"___type":{"type":"string","enum":["ManagedImage"]},"___imageId":{"description":"Resource Id of the Managed Disk Image","type":"string"}},"required":["imageId","location","type"]},"_88ImageTemplatePlatformImageSource":{"description":"Describes an image source from [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"object","properties":{"___version":{"description":"Image version from the [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"},"___type":{"type":"string","enum":["PlatformImage"]},"___offer":{"description":"Image offer from the [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"},"___sku":{"description":"Image sku from the [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"},"___publisher":{"description":"Image Publisher in [Azure Gallery Images](https:\/\/docs.microsoft.com\/en-us\/rest\/api\/compute\/virtualmachineimages).","type":"string"}},"required":["type"]},"_88ImageTemplateIsoSource":{"description":"Describes an image source that is an installation ISO. Currently only supports Red Hat Enterprise Linux 7.2-7.5 ISO's.","type":"object","properties":{"___type":{"type":"string","enum":["ISO"]},"___sourceURI":{"description":"URI to get the ISO image. This URI has to be accessible to the resource provider at the time of the image template creation.","type":"string"},"___sha256Checksum":{"description":"SHA256 Checksum of the ISO image.","type":"string"}},"required":["sha256Checksum","sourceURI","type"]},"_88ImageTemplateDistributor":{"oneOf":[{"$eref":{"description":"Distribute as a Managed Disk Image.","type":"object","properties":{"___location":{"description":"Azure location for the image, should match if image already exists","type":"string"},"___type":{"type":"string","enum":["ManagedImage"]},"___imageId":{"description":"Resource Id of the Managed Disk Image","type":"string"}},"required":["imageId","location","type"]}},{"$eref":{"description":"Distribute via Shared Image Gallery.","type":"object","properties":{"___type":{"type":"string","enum":["SharedImage"]},"___galleryImageId":{"description":"Resource Id of the Shared Image Gallery image","type":"string"},"___replicationRegions":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$ref":"https:\/\/schema.management.azure.com\/schemas\/common\/definitions.json#\/definitions\/expression"}]}},"required":["galleryImageId","replicationRegions","type"]}},{"$eref":{"description":"Distribute via VHD in a storage account.","type":"object","properties":{"___type":{"type":"string","enum":["VHD"]}},"required":["type"]}}],"description":"Generic distribution object","type":"object","properties":{"___artifactTags":{"oneOf":[{"additionalProperties":{"type":"string"},"type":"object","properties":{}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"Tags that will be applied to the artifact once it has been created\/updated by the distributor."},"___runOutputName":{"oneOf":[{"pattern":"^[A-Za-z0-9-_]{1,64}$","type":"string"},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}],"description":"The name to be used for the associated RunOutput."}},"required":["runOutputName"]},"_88ImageTemplateSharedImageDistributor":{"description":"Distribute via Shared Image Gallery.","type":"object","properties":{"___type":{"type":"string","enum":["SharedImage"]},"___galleryImageId":{"description":"Resource Id of the Shared Image Gallery image","type":"string"},"___replicationRegions":{"oneOf":[{"type":"array","items":{"type":"string"}},{"$eref":{"pattern":"^\\[([^\\[].*)?\\]$","description":"Deployment template expression. See https:\/\/aka.ms\/arm-template-expressions for more details on the ARM expression syntax.","type":"string"}}]}},"required":["galleryImageId","replicationRegions","type"]}}}