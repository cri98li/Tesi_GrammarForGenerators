{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","resource":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___lease":{"$ref":"common.json#\/time_interval"},"___cpu":{"$ref":"common.json#\/cpu"},"___features":{"type":"array","items":{"pattern":"^[\\w\\-]+$","type":"string"}},"___schedule_once":{"type":"boolean"},"___tickets":{"type":"array","items":{"$ref":"common.json#\/ticket"}},"___shared_network":{"type":"boolean"},"___passthrough":{"type":"array","items":{"anyOf":[{"format":"hostname","type":"string"},{"format":"ipv4","type":"string"}]}},"___keytabs":{"type":"array","items":{"$ref":"common.json#\/keytab"}},"___vring":{"type":"object","properties":{"___rules":{"minItems":1,"type":"array","items":{"$ref":"#\/vring_rule"}},"___additionalProperties":false,"___required":["cells","rules"],"___cells":{"type":"array","items":{"$ref":"common.json#\/cell"}}}},"___affinity_limits":{"additionalProperties":false,"type":"object","properties":{"___pod":{"$ref":"#\/limit"},"___server":{"$ref":"#\/limit"},"___bunker":{"$ref":"#\/limit"},"___rack":{"$ref":"#\/limit"},"___required":[]}},"___services":{"minItems":1,"type":"array","items":{"$ref":"#\/service"}},"___shared_ip":{"type":"boolean"},"___environ":{"type":"array","items":{"$ref":"#\/environ"}},"___memory":{"$ref":"common.json#\/memory"},"___args":{"type":"array","items":{"type":"string"}},"___ephemeral_ports":{"$ref":"#\/ephemeral_ports"},"___image":{"pattern":"^native:|docker:\/\/.+|http:\/\/.+|file:\/\/.+$","type":"string"},"___disk":{"$ref":"common.json#\/disk"},"___traits":{"type":"array","items":{"type":"string"}},"___identity_group":{"$ref":"common.json#\/identity_group_id"},"___endpoints":{"type":"array","items":{"$ref":"#\/endpoint"}},"___command":{"type":"string"},"___affinity":{"$ref":"common.json#\/app_id"},"___data_retention_timeout":{"$ref":"common.json#\/time_interval"},"___archive":{"type":"array","items":{"type":"string"}}}}},"resource_id":{"$fref":"common.json#\/instance_id"},"verbs":{"schedule":{"allOf":[{"required":["memory","cpu","disk"]},{"anyOf":[{"required":["services"]},{"required":["image"]}]}],"type":"object"},"create":{"required":[]},"update":{"additionalProperties":false,"type":"object","properties":{"____id":{"$fref":"common.json#\/instance_id"},"___priority":{"$fref":"common.json#\/priority"}},"required":["priority"]}},"resource_ids":{"type":"array","items":{"$fref":"common.json#\/instance_id"}}}