{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","title":"Transitland Datastore Changeset","type":"object","properties":{"___changes":{"minItems":1,"type":"array","items":{"oneOf":[{"properties":{"___feed":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","title":"Transitland Datastore Feed","type":"object","properties":{"___licenseCreateDerivedProduct":{"type":"string"},"___feedFormat":{"type":"string"},"___tags":{"type":"object"},"___onestopId":{"format":"feed-onestop-id","type":"string"},"___doesNotIncludeOperators":{"minItems":1,"type":"array","items":{"operatorOnestopId":{"format":"operator-onestop-id","type":"string"},"gtfsAgencyId":{"type":"string"},"type":"object","required":["operatorOnestopId","gtfsAgencyId"]}},"___licenseRedistribute":{"type":"string"},"___licenseAttributionText":{"type":"string"},"___licenseName":{"type":"string"},"___name":{"type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"feed-onestop-id","type":"string"}},"___licenseUrl":{"type":"string"},"___url":{"type":"string"},"___newOnestopId":{"format":"feed-onestop-id","type":"string"},"___includesOperators":{"minItems":1,"type":"array","items":{"operatorOnestopId":{"format":"operator-onestop-id","type":"string"},"gtfsAgencyId":{"type":"string"},"type":"object","required":["operatorOnestopId","gtfsAgencyId"]}},"___licenseUseWithoutAttribution":{"type":"string"},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["feed"]},{"properties":{"___feed":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","title":"Transitland Datastore Feed","type":"object","properties":{"___licenseCreateDerivedProduct":{"type":"string"},"___feedFormat":{"type":"string"},"___tags":{"type":"object"},"___onestopId":{"format":"feed-onestop-id","type":"string"},"___doesNotIncludeOperators":{"minItems":1,"type":"array","items":{"operatorOnestopId":{"format":"operator-onestop-id","type":"string"},"gtfsAgencyId":{"type":"string"},"type":"object","required":["operatorOnestopId","gtfsAgencyId"]}},"___licenseRedistribute":{"type":"string"},"___licenseAttributionText":{"type":"string"},"___licenseName":{"type":"string"},"___name":{"type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"feed-onestop-id","type":"string"}},"___licenseUrl":{"type":"string"},"___url":{"type":"string"},"___newOnestopId":{"format":"feed-onestop-id","type":"string"},"___includesOperators":{"minItems":1,"type":"array","items":{"operatorOnestopId":{"format":"operator-onestop-id","type":"string"},"gtfsAgencyId":{"type":"string"},"type":"object","required":["operatorOnestopId","gtfsAgencyId"]}},"___licenseUseWithoutAttribution":{"type":"string"},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["gtfsRealtimeFeed"]},{"properties":{"___stop":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore Stop","type":"object","properties":{"___platformName":{"type":"string"},"___stopType":{"type":"string"},"___tags":{"type":"object"},"___wheelchairBoarding":{"type":["boolean","null"]},"___onestopId":{"format":"stop-onestop-id","type":"string"},"___notServedBy":{"type":["array","null"],"items":{"format":"operator-onestop-id","type":"string"}},"___directionality":{"type":["string","null"],"enum":["enter","exit"]},"___includesStopTransfers":{"minItems":1,"type":["array","null"],"items":{"minTransferTime":{"type":["number","null"]},"toStopOnestopId":{"format":"stop-onestop-id","type":"string"},"transferType":{"type":"string"},"type":"object","required":["toStopOnestopId","transferType"]}},"___osmWayId":{"type":["integer","null"]},"___name":{"type":"string"},"___parentStopOnestopId":{"format":"stop-onestop-id","type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___notImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___geometryReversegeo":{"type":"object"},"___newOnestopId":{"format":"stop-onestop-id","type":"string"},"___doesNotIncludeStopTransfers":{"minItems":1,"type":["array","null"],"items":{"destinationOnestopId":{"format":"stop-onestop-id","type":"string"},"type":"object","required":["destinationOnestopId"]}},"___timezone":{"type":"string"},"___addImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___servedBy":{"type":["array","null"],"items":{"format":"operator-onestop-id","type":"string"}},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["stop"]},{"properties":{"___stopPlatform":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore Stop","type":"object","properties":{"___platformName":{"type":"string"},"___stopType":{"type":"string"},"___tags":{"type":"object"},"___wheelchairBoarding":{"type":["boolean","null"]},"___onestopId":{"format":"stop-onestop-id","type":"string"},"___notServedBy":{"type":["array","null"],"items":{"format":"operator-onestop-id","type":"string"}},"___directionality":{"type":["string","null"],"enum":["enter","exit"]},"___includesStopTransfers":{"minItems":1,"type":["array","null"],"items":{"minTransferTime":{"type":["number","null"]},"toStopOnestopId":{"format":"stop-onestop-id","type":"string"},"transferType":{"type":"string"},"type":"object","required":["toStopOnestopId","transferType"]}},"___osmWayId":{"type":["integer","null"]},"___name":{"type":"string"},"___parentStopOnestopId":{"format":"stop-onestop-id","type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___notImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___geometryReversegeo":{"type":"object"},"___newOnestopId":{"format":"stop-onestop-id","type":"string"},"___doesNotIncludeStopTransfers":{"minItems":1,"type":["array","null"],"items":{"destinationOnestopId":{"format":"stop-onestop-id","type":"string"},"type":"object","required":["destinationOnestopId"]}},"___timezone":{"type":"string"},"___addImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___servedBy":{"type":["array","null"],"items":{"format":"operator-onestop-id","type":"string"}},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["stopPlatform"]},{"properties":{"___stopPlatform":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore Stop","type":"object","properties":{"___platformName":{"type":"string"},"___stopType":{"type":"string"},"___tags":{"type":"object"},"___wheelchairBoarding":{"type":["boolean","null"]},"___onestopId":{"format":"stop-onestop-id","type":"string"},"___notServedBy":{"type":["array","null"],"items":{"format":"operator-onestop-id","type":"string"}},"___directionality":{"type":["string","null"],"enum":["enter","exit"]},"___includesStopTransfers":{"minItems":1,"type":["array","null"],"items":{"minTransferTime":{"type":["number","null"]},"toStopOnestopId":{"format":"stop-onestop-id","type":"string"},"transferType":{"type":"string"},"type":"object","required":["toStopOnestopId","transferType"]}},"___osmWayId":{"type":["integer","null"]},"___name":{"type":"string"},"___parentStopOnestopId":{"format":"stop-onestop-id","type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___notImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___geometryReversegeo":{"type":"object"},"___newOnestopId":{"format":"stop-onestop-id","type":"string"},"___doesNotIncludeStopTransfers":{"minItems":1,"type":["array","null"],"items":{"destinationOnestopId":{"format":"stop-onestop-id","type":"string"},"type":"object","required":["destinationOnestopId"]}},"___timezone":{"type":"string"},"___addImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___servedBy":{"type":["array","null"],"items":{"format":"operator-onestop-id","type":"string"}},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["stopEgress"]},{"properties":{"___operator":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore Operator","type":"object","properties":{"___serves":{"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___tags":{"type":"object"},"___onestopId":{"format":"operator-onestop-id","type":"string"},"___shortName":{"type":"string"},"___name":{"type":"string"},"___metro":{"type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"operator-onestop-id","type":"string"}},"___notImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___website":{"type":"string"},"___state":{"type":"string"},"___doesNotServe":{"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___newOnestopId":{"format":"operator-onestop-id","type":"string"},"___country":{"type":"string"},"___timezone":{"type":"string"},"___addImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["operator"]},{"properties":{"___route":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore Route","type":"object","properties":{"___serves":{"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___tags":{"type":"object"},"___onestopId":{"format":"route-onestop-id","type":"string"},"___color":{"type":"string"},"___wheelchairAccessible":{"type":"string","enum":["unknown","all_trips","no_trips","some_trips"]},"___name":{"type":"string"},"___operatedBy":{"format":"operator-onestop-id","type":"string"},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"format":"route-onestop-id","type":"string"}},"___notImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___vehicleType":{"format":"vehicle-type","type":["string","integer"]},"___doesNotServe":{"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___newOnestopId":{"format":"route-onestop-id","type":"string"},"___addImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___bikesAllowed":{"type":"string","enum":["unknown","all_trips","no_trips","some_trips"]},"___geometry":{"type":"object"}},"required":["onestopId"]}}},"required":["route"]},{"properties":{"___scheduleStopPair":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore ScheduleStopPair","type":"object","properties":{"___destinationTimezone":{"type":"string"},"___serviceAddedDates":{"type":["array","null"],"items":{"format":"date","type":"string"}},"___tripHeadsign":{"type":["string","null"]},"___blockId":{"type":["string","null"]},"___dropOffType":{"type":["string","null"]},"___frequencyType":{"type":["string","null"],"enum":["window","exact",null]},"___originDepartureTime":{"type":"string"},"___frequencyEndTime":{"type":["string"]},"___serviceStartDate":{"format":"date","type":"string"},"___shapeDistTraveled":{"type":["number","null"]},"___serviceExceptDates":{"type":["array","null"],"items":{"format":"date","type":"string"}},"___destinationArrivalTime":{"type":"string"},"___frequencyStartTime":{"type":["string"]},"___trip":{"type":["string","null"]},"___serviceDaysOfWeek":{"minItems":7,"maxItems":7,"type":"array","items":{"type":"boolean"}},"___windowStart":{"type":"string"},"___destinationDepartureTime":{"type":"string"},"___originTimezone":{"type":"string"},"___tags":{"type":["object","null"]},"___destinationDistTraveled":{"type":"number"},"___routeOnestopId":{"format":"route-onestop-id","type":"string"},"___destinationTimepointSource":{"type":"string"},"___frequencyHeadwaySeconds":{"type":["integer"]},"___originDistTraveled":{"type":"number"},"___destinationOnestopId":{"format":"stop-onestop-id","type":"string"},"___routeStopPatternOnestopId":{"type":"string"},"___originOnestopId":{"format":"stop-onestop-id","type":"string"},"___wheelchairAccessible":{"type":["boolean","null"]},"___originArrivalTime":{"type":"string"},"___pickupType":{"type":["string","null"]},"___windowEnd":{"type":"string"},"___tripShortName":{"type":["string","null"]},"___serviceEndDate":{"format":"date","type":"string"},"___originTimepointSource":{"type":"string"},"___bikesAllowed":{"type":["boolean","null"]}},"required":["originOnestopId","destinationOnestopId","routeOnestopId","routeStopPatternOnestopId","originArrivalTime","originDepartureTime","destinationArrivalTime","destinationDepartureTime","originTimezone","destinationTimezone","serviceStartDate","serviceEndDate","windowStart","windowEnd"],"dependencies":{"frequencyType":["frequencyStartTime","frequencyEndTime","frequencyHeadwaySeconds"]}}}},"required":["scheduleStopPair"]},{"properties":{"___routeStopPattern":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"title":"Transitland Datastore RouteStopPattern","type":"object","properties":{"___stopPattern":{"type":"array","items":{"format":"stop-onestop-id","type":"string"}},"___onestopIdsToMerge":{"minItems":1,"uniqueItems":true,"type":"array","items":{"type":"string"}},"___notImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___traversedBy":{"format":"route-onestop-id","type":"string"},"___tags":{"type":"object"},"___onestopId":{"type":"string"},"___newOnestopId":{"type":"string"},"___geometrySource":{"type":"string"},"___trips":{"type":"array","items":{"type":"string"}},"___addImportedFromFeeds":{"minItems":1,"type":"array","items":{"$ref":".\/imported_from_feed.json"}},"___geometry":{"type":"object"},"___stopDistances":{"type":"array","items":{"type":["number","null"]}}},"required":["onestopId"]}}},"required":["routeStopPattern"]}],"type":"object","properties":{"___action":{"type":"string","enum":["createUpdate","destroy","changeOnestopID","changeStopType","merge"]},"___issuesResolved":{"type":"array","items":{"type":"number"}}},"required":["action"]}}}}