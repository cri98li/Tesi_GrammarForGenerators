{"$schema":"http:\/\/json-schema.org\/draft-04\/schema","description":"Json format for defining new faction (aka towns) in VCMI","additionalProperties":false,"title":"VCMI faction format","type":"object","definitions":{"_88townIcon":{"additionalProperties":false,"type":"object","properties":{"___large":{"format":"imageFile","type":"string"},"___small":{"format":"imageFile","type":"string"}},"required":["small","large"]},"_88townIconPair":{"additionalProperties":false,"type":"object","properties":{"___built":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___large":{"format":"imageFile","type":"string"},"___small":{"format":"imageFile","type":"string"}},"required":["small","large"]},"description":"Icon used after player build something in town"},"___normal":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___large":{"format":"imageFile","type":"string"},"___small":{"format":"imageFile","type":"string"}},"required":["small","large"]},"description":"Icon used normally"}},"required":["normal","built"]}},"properties":{"___name":{"description":"Translatable name of town","type":"string"},"___creatureBackground":{"description":"Backgrounds for creature info card","additionalProperties":false,"type":"object","properties":{"___130px":{"format":"imageFile","description":"Version that is 130 pixels in height","type":"string"},"___120px":{"format":"imageFile","description":"Version that is 120 pixels in height","type":"string"}},"required":["120px","130px"]},"___puzzleMap":{"description":"Puzzle map from obelisks for this town. Must contain 48 pieces","additionalProperties":false,"type":"object","properties":{"___prefix":{"description":"Prefix for image names, e.g. \"PUZCAS\" for name \"PUZCAS12.png\"","type":"string"},"___pieces":{"minItems":48,"maxItems":48,"description":"Lits of pieces definitions","type":"array","items":{"additionalProperties":false,"type":"object","properties":{"___index":{"description":"Order in which images will be opened","type":"number"},"___x":{"description":"X coordinate on screen","type":"number"},"___y":{"description":"X coordinate on screen","type":"number"}}}}},"required":["prefix","pieces"]},"___index":{"description":"Private field to break things, do not use.","type":"number"},"___nativeTerrain":{"description":"Native terrain for creatures. Creatures fighting on native terrain receive several bonuses","type":"string"},"___town":{"description":"town","additionalProperties":false,"type":"object","properties":{"___guildBackground":{"format":"imageFile","description":"Image with background of mage guild","type":"string"},"___horde":{"maxItems":2,"description":"Levels of creatures that have hordes in town","type":"array","items":{"type":"number"}},"___hallSlots":{"minItems":5,"maxItems":5,"description":"Description of town hall","type":"array","items":{"minItems":1,"maxItems":4,"type":"array","items":{"description":"List of buildings available in one slot","type":"array","items":{"type":"string"}}}},"___musicTheme":{"format":"musicFile","description":"Path to town music theme","type":"string"},"___creatures":{"minItems":7,"maxItems":7,"description":"List of creatures available for recruitment on each level","type":"array","items":{"type":"array","items":{"type":"string"}}},"___icons":{"description":"Town icons","additionalProperties":false,"type":"object","properties":{"___village":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___built":{"description":"Icon used after player build something in town","$ref":"#\/definitions\/townIcon"},"___normal":{"description":"Icon used normally","$ref":"#\/definitions\/townIcon"}},"required":["normal","built"]},"description":"Icons for town without fort"},"___fort":{"$eref":{"additionalProperties":false,"type":"object","properties":{"___built":{"description":"Icon used after player build something in town","$ref":"#\/definitions\/townIcon"},"___normal":{"description":"Icon used normally","$ref":"#\/definitions\/townIcon"}},"required":["normal","built"]},"description":"Icons for town with built fort"}},"required":["fort","village"]},"___hallBackground":{"format":"imageFile","description":"background image for town hall","type":"string"},"___defaultTavern":{"description":"Default chance for hero to appear in tavern, used only when value vas not set in tavern field","type":"number","minimum":0},"___structures":{"additionalProperties":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema","description":"Format used to define structures visible on town screen in VCMI","additionalProperties":false,"title":"VCMI town structures format","type":"object","properties":{"___animation":{"format":"animationFile","description":"Main animation file for this building","type":"string"},"___builds":{"description":"","type":"string"},"___x":{"description":"Position on screen","type":"number"},"___y":{"description":"Position on screen","type":"number"},"___z":{"description":"Position on screen. Buildings with higher value will be drawn on top of other buildings","type":"number"},"___area":{"format":"imageFile","description":"Area that indicate when building is selected. Must be 8-bit image","type":"string"},"___border":{"format":"imageFile","description":"Golden border around building, displayed when building is selected","type":"string"},"___hidden":{"description":"If upgrade, this building will replace parent animation but will not alter its behaviour","type":"boolean"}},"required":["animation","x","y"]}},"type":"object"},"___siege":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema","description":"Format used to define town siege screen in VCMI","additionalProperties":false,"title":"VCMI siege screen format","type":"object","definitions":{"_88tower":{"additionalProperties":false,"type":"object","properties":{"___creature":{"description":"Location of shooter in tower","$ref":"#\/definitions\/point"},"___tower":{"description":"Location of main segment of tower","$ref":"#\/definitions\/point"},"___battlement":{"description":"Location of battlement, part of tower that covers shooter","$ref":"#\/definitions\/point"}},"required":["battlement","creature","tower"]},"_88point":{"additionalProperties":false,"type":"object","properties":{"___x":{"type":"number"},"___y":{"type":"number"}},"required":["x","y"]}},"properties":{"___towers":{"description":"Decription of towers","additionalProperties":false,"type":"object","properties":{"___top":{"description":"Top tower","$ref":"#\/definitions\/tower"},"___bottom":{"description":"Bottom tower","$ref":"#\/definitions\/tower"},"___keep":{"description":"Central keep","$ref":"#\/definitions\/tower"}}},"___shooter":{"description":"Identifier of creature that will be used as tower shooter","type":"string"},"___walls":{"description":"Destructible sections of the walls","additionalProperties":false,"type":"object","properties":{"___upper":{"description":"Topmost section located near top tower","$ref":"#\/definitions\/point"},"___bottom":{"description":"Bottommost section located near bottom tower","$ref":"#\/definitions\/point"},"___bottomMid":{"description":"Second from bottom section located near gates","$ref":"#\/definitions\/point"},"___upperMid":{"description":"Second from top section located near gates","$ref":"#\/definitions\/point"}}},"___imagePrefix":{"description":"Prefix to all images related to siege screen","type":"string"},"___gate":{"description":"Town gates","additionalProperties":false,"type":"object","properties":{"___arch":{"description":"Static, top part of gates","$ref":"#\/definitions\/point"},"___gate":{"description":"Main section of gates","$ref":"#\/definitions\/point"}}},"___moat":{"description":"Castle moat description","additionalProperties":false,"type":"object","properties":{"___bank":{"description":"Small section with bank of the moat","$ref":"#\/definitions\/point"},"___moat":{"description":"Main section of the moat","$ref":"#\/definitions\/point"}}},"___static":{"description":"Static sections of walls","additionalProperties":false,"type":"object","properties":{"___top":{"description":"Top section located between destructible sections","$ref":"#\/definitions\/point"},"___bottom":{"description":"Bottom section located between destructible sections","$ref":"#\/definitions\/point"},"___background":{"description":"Very top section of the wall located above hero","$ref":"#\/definitions\/point"}}}},"required":["gate","imagePrefix","moat","shooter","static","towers","walls"]}},"___moatDamage":{"description":"Damage dealt to creature that entered town moat during siege","type":"number"},"___tavern":{"description":"Hero classes available in tavern. Value indicates chance for hero of this class to appear","additionalProperties":{"type":"number","minimum":0},"type":"object"},"___buildings":{"additionalProperties":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema","description":"Format used to define town buildings in VCMI","additionalProperties":false,"title":"VCMI town building format","type":"object","definitions":{"_88buildingRequirement":{"additionalItems":{"description":"Following items that contain expression elements","$ref":"#\/definitions\/buidingRequirement"},"type":"array","items":[{"description":"First item that indicates type of following expression","type":"string"}]}},"properties":{"___name":{"description":"Name of this building","type":"string"},"___produce":{"description":"Resources this building produce each day","additionalProperties":false,"type":"object","properties":{"___ore":{"type":"number"},"___crystal":{"type":"number"},"___wood":{"type":"number"},"___gems":{"type":"number"},"___gold":{"type":"number"},"___sulfur":{"type":"number"},"___mercury":{"type":"number"}}},"___description":{"description":"Full decsription of this building","type":"string"},"___mode":{"description":"Mode in which this building will be built","type":"string","enum":["normal","auto","special","grail"]},"___requires":{"description":"List of town buildings that must be built before this one","$ref":"#\/definitions\/buildingRequirement"},"___cost":{"description":"Cost to build this building","additionalProperties":false,"type":"object","properties":{"___ore":{"type":"number"},"___crystal":{"type":"number"},"___wood":{"type":"number"},"___gems":{"type":"number"},"___gold":{"type":"number"},"___sulfur":{"type":"number"},"___mercury":{"type":"number"}}},"___upgrades":{"description":"If this building is upgrade, identifier of base building","type":"string"},"___id":{"description":"Numeric identifier of this building","type":"number"}},"required":["id"]}},"type":"object"},"___moatHexes":{"description":"Numbers of battlefield hexes affected by moat during siege","type":"array","items":{"type":"number"}},"___buildingsIcons":{"format":"animationFile","description":"Path to .def file with building icons","type":"string"},"___warMachine":{"description":"Identifier of war machine produced by blacksmith in town","type":"string"},"___townBackground":{"format":"imageFile","description":"Background for town screen","type":"string"},"___guildSpells":{"description":"Spells available in mage guild. Value indicates chance for this spell to appear","additionalProperties":{"type":"number"},"type":"object"},"___mageGuild":{"description":"Maximal level of mage guild","type":"number"},"___guildWindow":{"description":"Image with small view on town from mage guild","type":"string"},"___primaryResource":{"description":"Primary resource for this town. Produced by Silo and offered as starting bonus","type":"string"},"___tavernVideo":{"format":"videoFile","description":"Video for tavern window","type":"string"},"___mapObject":{"properties":{"___filters":{"additionalProperties":{"type":"array"},"type":"object"}}},"___names":{"minItems":1,"description":"Names for towns on adventure map","type":"array","items":{"type":"string"}}},"required":["mapObject","buildingsIcons","buildings","creatures","guildWindow","names","hallBackground","hallSlots","horde","mageGuild","moatDamage","defaultTavern","tavernVideo","guildBackground","musicTheme","siege","structures","townBackground","warMachine"]},"___alignment":{"description":"Town alignment, good, neutral or evil","type":"string","enum":["good","neutral","evil"]}},"required":["name","alignment","creatureBackground"],"dependencies":{"town":["puzzleMap"]}}