{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"schema for a Prebid Server request","id":"http:\/\/prebid.org\/pbs_request.json","type":"object","properties":{"___timeout_millis":{"description":"How long to wait for adapters to return bids","type":"integer"},"___app":{"description":"This object should be included if the ad supported content is a non-browser application (typically in mobile) as opposed to a website. At a minimum, it is useful to provide an App ID or bundle, but this is not strictly required.","type":"object","properties":{"___name":{"description":"App name (may be aliased at the publisher\u2019s request).","type":"string"},"___ver":{"description":"Application version.","type":"string"},"___paid":{"description":"0 = app is free, 1 = the app is a paid version.","type":"integer"},"___storeurl":{"description":"App store URL for an installed app; for IQG 2.1 compliance.","type":"string"},"___bundle":{"description":"A platform-specific application identifier intended to be unique to the app and independent of the exchange. On Android, this should be a bundle or package name (e.g., com.foo.mygame). On iOS, it is typically a numeric ID.","type":"string"},"___privacypolicy":{"description":"Indicates if the app has a privacy policy, where 0 = no, 1 = yes.","type":"integer"},"___keywords":{"description":"Comma separated list of keywords about the app.","type":"string"},"___domain":{"description":"Domain of the app (e.g., 'mygame.foo.com').","type":"string"}}},"___tid":{"description":"Unique transaction ID","type":"string"},"___user":{"type":"object","properties":{"___yob":{"description":"Year of birth as a 4-digit integer.","type":"integer"},"___gender":{"description":"Gender, where M=male, F=female, O=known to be other, omitted is unknown","type":"string"},"___buyeruid":{"description":"Buyer-specific ID for the user as mapped by the exchange for the buyer.","type":"string"},"___id":{"description":"Exchange-specific ID for the user.","type":"string"}}},"___ad_units":{"minItems":1,"type":"array","items":{"oneOf":[{"required":["bids"]},{"required":["config_id"]}],"type":"object","properties":{"___video":{"description":"Video attributes of this ad Unit","type":"object","properties":{"___skippable":{"description":"Indicates if the player will allow the video to be skipped ( 0 = no, 1 = yes).","type":"integer"},"___playback_method":{"description":"Playback method code as defined by ORTB.","type":"integer"},"___minduration":{"description":"Minimum video ad duration in seconds.","type":"integer"},"___startdelay":{"description":"Indicates the start delay in seconds for pre-roll, mid-roll, or post-roll ad placements.","type":"integer"},"___maxduration":{"description":"Maximum video ad duration in seconds.","type":"integer"},"___mimes":{"description":"Mime types as defined by ORTB - ex: video\/mp4","type":"array","items":{"type":"string"}},"___protocols":{"description":"protocols as specified in ORTB 2.5 spec: 5.8","type":"integer"}}},"___bids":{"minItems":1,"type":"array","items":{"type":"object","properties":{"___bidder":{"description":"Unique code for an adapter to call","type":"string"},"___bid_id":{"description":"Unique bid id for this bidder for this slot - for analytics","type":"string"},"___params":{"description":"Optional params to send to the adapter","type":"object"}},"required":["bidder","bid_id"]}},"___instl":{"description":"1 = the ad is interstitial or full screen, 0 = not interstitial","maximum":1,"type":"integer","minimum":0},"___sizes":{"type":"array","items":{"type":"object","properties":{"___w":{"description":"Width of the ad unit","type":"integer"},"___h":{"description":"Height of the ad unit","type":"integer"}}}},"___config_id":{"description":"The config to load for this ad unit","type":"string"},"___media_types":{"description":"Media types accepted by this ad unit","type":"array","items":{"type":"string","enum":["banner","video"]}},"___topframe":{"description":"Whether this ad will render in the top IFRAME","maximum":1,"type":"integer","minimum":0},"___slot_code":{"description":"The slot code used by DFP","type":"string"},"___code":{"description":"Unique code of the ad unit on the page","type":"string"}},"required":["sizes","code"]}},"___account_id":{"type":"string"},"___sort_bids":{"description":"Sorts bids by price & response time and returns ad server targeting keys for each bid in prebid server response","type":"integer"},"___secure":{"description":"Flag to indicate if the impression requires secure HTTPS URL creative assets and markup, where 0 = non-secure, 1 = secure. If omitted, the secure state will be interpreted from the request to the prebid server","type":"integer"},"___device":{"description":"3.2.18 Object: Device. This object provides information pertaining to the device through which the user is interacting. Device information includes its hardware, platform, location, and carrier data. The device can refer to a mobile handset, a desktop computer, set top box, or other digital device.","type":"object","properties":{"___language":{"description":"Browser language using ISO-639-1-alpha-2.","type":"string"},"___ip":{"description":"IPv4 address closest to device.","type":"string"},"___os":{"description":"Device operating system (e.g., 'iOS').","type":"string"},"___ifa":{"description":"ID sanctioned for advertiser use in the clear (i.e., not hashed).","type":"string"},"___devicetype":{"description":"The general type of device. Refer to List 5.21.","type":"integer"},"___dnt":{"description":"Standard \u201CDo Not Track\u201D flag as set in the header by the browser, where 0 = tracking is unrestricted, 1 = do not track.","type":"integer"},"___ppi":{"description":"Screen size as pixels per linear inch.","type":"integer"},"___connectiontype":{"description":"Network connection type. Refer to List 5.22.","type":"integer"},"___pxratio":{"description":"The ratio of physical pixels to device independent pixels.","type":"number"},"___make":{"description":"Device make (e.g., 'Apple').","type":"string"},"___macsha1":{"description":"MAC address of the device; hashed via SHA1.","type":"string"},"___carrier":{"description":"Carrier or ISP (e.g., 'VERIZON') using exchange curated string names which should be published to bidders a priori.","type":"string"},"___model":{"description":"Device model (e.g., 'iPhone')","type":"string"},"___didmd5":{"description":"Hardware device ID (e.g., IMEI); hashed via MD5.","type":"string"},"___ipv6":{"description":"IPv6 address closest to device.","type":"string"},"___geofetch":{"description":"Indicates if the geolocation API will be available to JavaScript code running in the banner, where 0 = no, 1 = yes.","type":"integer"},"___dpidmd5":{"description":"Platform device ID (e.g., Android ID); hashed via MD5.","type":"string"},"___macmd5":{"description":"MAC address of the device; hashed via MD5.","type":"string"},"___h":{"description":"Physical height of the screen in pixels.","type":"integer"},"___hwv":{"description":"Hardware version of the device (e.g., '5S' for iPhone 5S).","type":"string"},"___ua":{"description":"Browser user agent string.","type":"string"},"___didsha1":{"description":"Hardware device ID (e.g., IMEI); hashed via SHA1.","type":"string"},"___js":{"description":"Support for JavaScript, where 0 = no, 1 = yes.","type":"integer"},"___osv":{"description":"Device operating system version (e.g., '3.1.2').","type":"string"},"___geo":{"description":"This object encapsulates various methods for specifying a geographic location. When subordinate to a Device object, it indicates the location of the device which can also be interpreted as the user\u2019s current location. The lat\/lon attributes should only be passed if they conform to the accuracy depicted in the type attribute. For example, the centroid of a geographic region such as postal code should not be passed.","type":"object","properties":{"___metro":{"description":"Google metro code; similar to but not exactly Nielsen DMAs. See Appendix A for a link to the codes.","type":"string"},"___utcoffset":{"description":"Local time as the number +\/- of minutes from UTC.","type":"string"},"___lat":{"description":"Latitude from -90.0 to +90.0, where negative is south.","type":"number"},"___type":{"description":"Source of location data; recommended when passing lat\/lon. Refer to List 5.20.","type":"integer"},"___zip":{"description":"Zip or postal code.","type":"string"},"___lastfix":{"description":"Number of seconds since this geolocation fix was established. Note that devices may cache location data across multiple fetches. Ideally, this value should be from the time the actual fix was taken.","type":"integer"},"___country":{"description":"Country code using ISO-3166-1-alpha-3.","type":"string"},"___ipservice":{"description":"Service or provider used to determine geolocation from IP address if applicable (i.e., type = 2). Refer to List 5.23.","type":"integer"},"___accuracy":{"description":"Estimated location accuracy in meters; recommended when lat\/lon are specified and derived from a device\u2019s location services (i.e., type = 1). Note that this is the accuracy as reported from the device. Consult OS specific documentation (e.g., Android, iOS) for exact interpretation.","type":"integer"},"___city":{"description":"City using United Nations Code for Trade & Transport Locations. See Appendix A for a link to the codes.","type":"string"},"___region":{"description":"Region code using ISO-3166-2; 2-letter state code if USA.","type":"string"},"___lon":{"description":"Longitude from -180.0 to +180.0, where negative is west.","type":"number"}}},"___mccmnc":{"description":"Mobile carrier as the concatenated MCC-MNC code (e.g., '310-005' identifies Verizon Wireless CDMA in the USA). Refer to https:\/\/en.wikipedia.org\/wiki\/Mobile_country_code for further examples. Note that the dash between the MCC and MNC parts is required to remove parsing ambiguity.","type":"string"},"___w":{"description":"Physical width of the screen in pixels.","type":"integer"},"___lmt":{"description":"'Limit Ad Tracking' signal commercially endorsed (e.g., iOS, Android), where 0 = tracking is unrestricted, 1 = tracking must be limited per commercial guidelines.","type":"integer"},"___dpidsha1":{"description":"Platform device ID (e.g., Android ID); hashed via SHA1.","type":"string"}}},"___max_key_length":{"description":"Used to determine whether ad server targeting key strings should be truncated on prebid server. For DFP max key length should be 20.","type":"integer"},"___cache_markup":{"description":"Caches markup for two-phase response (get response then separate call to get markup)","type":"integer"}},"required":["account_id","ad_units"]}