{"$schema":"http:\/\/json-schema.org\/draft-04\/schema","title":"RightScale Self Service Vending Machine Product Output v1.0.0","type":"object","definitions":{"_88server":{"type":"object","properties":{"___description":{"type":"string"},"___count":{"type":"string"},"___resource_type":{"enum":["server"]},"___optimized":{"type":"boolean"},"___name_prefix":{"type":"string"},"___alert_specs":{"type":"array","items":{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___threshold":{"type":"string"},"___variable":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["alert_spec"]},"___vote_tag":{"type":"string"},"___vote_type":{"enum":["grow","shrink"]},"___escalation_name":{"type":"string"},"___condition":{"enum":[">",">=","<","<=","==","!="]},"___duration":{"type":"string"},"___file":{"type":"string"}},"required":["resource_type","name","condition","duration","file","threshold","variable"]}}},"___instance":{"$eref":{"type":"object","properties":{"___multi_cloud_image_href":{"type":"string"},"___subnet_hrefs":{"type":"array","items":{"type":"string"}},"___instance_type_href":{"type":"string"},"___resource_type":{"enum":["instance"]},"___ssh_key_href":{"type":"string"},"___datacenter_hrefs":{"type":"array"},"___inputs":{"type":"array","items":{"$ref":"#\/definitions\/input"}},"___security_group_hrefs":{"description":"Can contain either security group hrefs, or a reference to a security group definition which must be created and the resultant href used.","type":"array","items":{"anyOf":[{"type":"string"},{"$ref":"#\/definitions\/security_group_relationship"}]}},"___cloud_href":{"type":"string"},"___server_template":{"$ref":"#\/definitions\/server_template"}},"required":["resource_type","cloud_href","server_template"]}}},"required":["resource_type","name_prefix","count","instance"]},"_88elasticity_params":{"type":"object","properties":{"___resource_type":{"enum":["elasticity_params"]},"___bounds":{"type":"object","properties":{"___max_count":{"type":"string"},"___min_count":{"type":"string"}},"required":["min_count","max_count"]},"___pacing":{"type":"object","properties":{"___resize_down_by":{"type":"string"},"___resize_calm_time":{"type":"string"},"___resize_up_by":{"type":"string"}},"required":["resize_calm_time","resize_down_by","resize_up_by"]},"___queue_specific_params":{"type":"object","properties":{"___collect_audit_entries":{"type":"string"},"___item_age":{"type":"object","properties":{"___regexp":{"type":"string"},"___algorithm":{"enum":["max_10","avg_10"]},"___max_age":{"type":"string"}}},"___queue_size":{"type":"object","properties":{"___items_per_instance":{"type":"string"}}}}},"___schedule":{"type":"array","items":{"type":"object","properties":{"___time":{"pattern":"^\\d\\d:\\d\\d$","type":"string"},"___max_count":{"type":"string"},"___min_count":{"type":"string"},"___day":{"enum":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"required":["day","max_count","min_count","time"]}},"___alert_specific_params":{"type":"object","properties":{"___decision_threshold":{"type":"string"},"___voters_tag_predicate":{"type":"string"}}}},"required":["resource_type","bounds","pacing"]},"_88security_group":{"type":"object","properties":{"___name":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["security_group"]},"___security_group_rules":{"type":"array","items":{"$eref":{"type":"object","properties":{"___ingress_group":{"$ref":"#\/definitions\/security_group_relationship"},"___source_type":{"enum":["cidr_ips","group"]},"___resource_type":{"enum":["security_group_rule"]},"___protocol_details":{"type":"object","properties":{"___icmp_code":{"type":"string"},"___icmp_type":{"type":"string"},"___end_port":{"type":"string"},"___start_port":{"type":"string"}}},"___protocol":{"enum":["tcp","udp","icmp"]},"___cidr_ips":{"type":"string"}},"required":["resource_type","protocol","protocol_details","source_type"]}}},"___id":{"type":"string"},"___cloud_href":{"type":"string"}},"required":["id","resource_type","cloud_href","name"]},"_88server_template":{"type":"object","properties":{"___name":{"type":"string"},"___revision":{"type":"string"},"___resource_type":{"enum":["server_template"]},"___publication_id":{"type":"string"},"___id":{"type":"string"}},"required":["id","resource_type","name","revision"]},"_88alert_spec":{"type":"object","properties":{"___name":{"type":"string"},"___threshold":{"type":"string"},"___variable":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["alert_spec"]},"___vote_tag":{"type":"string"},"___vote_type":{"enum":["grow","shrink"]},"___escalation_name":{"type":"string"},"___condition":{"enum":[">",">=","<","<=","==","!="]},"___duration":{"type":"string"},"___file":{"type":"string"}},"required":["resource_type","name","condition","duration","file","threshold","variable"]},"_88instance":{"type":"object","properties":{"___multi_cloud_image_href":{"type":"string"},"___subnet_hrefs":{"type":"array","items":{"type":"string"}},"___instance_type_href":{"type":"string"},"___resource_type":{"enum":["instance"]},"___ssh_key_href":{"type":"string"},"___datacenter_hrefs":{"type":"array"},"___inputs":{"type":"array","items":{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___resource_type":{"enum":["input"]},"___value":{"pattern":"^(text|key|cred|array|env):.*","type":"string"}},"required":["resource_type","name","value"]}}},"___security_group_hrefs":{"description":"Can contain either security group hrefs, or a reference to a security group definition which must be created and the resultant href used.","type":"array","items":{"anyOf":[{"type":"string"},{"$eref":{"type":"object","properties":{"___ref":{"enum":["security_group"]},"___id":{"type":"string"}},"required":["id","ref"]}}]}},"___cloud_href":{"type":"string"},"___server_template":{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___revision":{"type":"string"},"___resource_type":{"enum":["server_template"]},"___publication_id":{"type":"string"},"___id":{"type":"string"}},"required":["id","resource_type","name","revision"]}}},"required":["resource_type","cloud_href","server_template"]},"_88deployment":{"type":"object","properties":{"___name":{"type":"string"},"___server_arrays":{"type":"array","items":{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["server_array"]},"___optimized":{"type":"boolean"},"___state":{"default":"disabled","enum":["enabled","disabled"]},"___array_type":{"enum":["alert","queue"]},"___elasticity_params":{"$ref":"#\/definitions\/elasticity_params"},"___alert_specs":{"type":"array","items":{"$ref":"#\/definitions\/alert_spec"}},"___instance":{"$ref":"#\/definitions\/instance"}},"required":["resource_type","array_type","elasticity_params","instance","name"]}}},"___resource_type":{"enum":["deployment"]},"___servers":{"type":"array","items":{"$eref":{"type":"object","properties":{"___description":{"type":"string"},"___count":{"type":"string"},"___resource_type":{"enum":["server"]},"___optimized":{"type":"boolean"},"___name_prefix":{"type":"string"},"___alert_specs":{"type":"array","items":{"$ref":"#\/definitions\/alert_spec"}},"___instance":{"$ref":"#\/definitions\/instance"}},"required":["resource_type","name_prefix","count","instance"]}}},"___server_tag_scope":{"enum":["deployment","account"]},"___inputs":{"type":"array","items":{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___resource_type":{"enum":["input"]},"___value":{"pattern":"^(text|key|cred|array|env):.*","type":"string"}},"required":["resource_type","name","value"]}}},"___id":{"description":"A unique ID for this deployment within the product.","type":"string"}},"required":["id","resource_type","name","servers"]},"_88server_array":{"type":"object","properties":{"___name":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["server_array"]},"___optimized":{"type":"boolean"},"___state":{"default":"disabled","enum":["enabled","disabled"]},"___array_type":{"enum":["alert","queue"]},"___elasticity_params":{"$eref":{"type":"object","properties":{"___resource_type":{"enum":["elasticity_params"]},"___bounds":{"type":"object","properties":{"___max_count":{"type":"string"},"___min_count":{"type":"string"}},"required":["min_count","max_count"]},"___pacing":{"type":"object","properties":{"___resize_down_by":{"type":"string"},"___resize_calm_time":{"type":"string"},"___resize_up_by":{"type":"string"}},"required":["resize_calm_time","resize_down_by","resize_up_by"]},"___queue_specific_params":{"type":"object","properties":{"___collect_audit_entries":{"type":"string"},"___item_age":{"type":"object","properties":{"___regexp":{"type":"string"},"___algorithm":{"enum":["max_10","avg_10"]},"___max_age":{"type":"string"}}},"___queue_size":{"type":"object","properties":{"___items_per_instance":{"type":"string"}}}}},"___schedule":{"type":"array","items":{"type":"object","properties":{"___time":{"pattern":"^\\d\\d:\\d\\d$","type":"string"},"___max_count":{"type":"string"},"___min_count":{"type":"string"},"___day":{"enum":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"required":["day","max_count","min_count","time"]}},"___alert_specific_params":{"type":"object","properties":{"___decision_threshold":{"type":"string"},"___voters_tag_predicate":{"type":"string"}}}},"required":["resource_type","bounds","pacing"]}},"___alert_specs":{"type":"array","items":{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___threshold":{"type":"string"},"___variable":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["alert_spec"]},"___vote_tag":{"type":"string"},"___vote_type":{"enum":["grow","shrink"]},"___escalation_name":{"type":"string"},"___condition":{"enum":[">",">=","<","<=","==","!="]},"___duration":{"type":"string"},"___file":{"type":"string"}},"required":["resource_type","name","condition","duration","file","threshold","variable"]}}},"___instance":{"$eref":{"type":"object","properties":{"___multi_cloud_image_href":{"type":"string"},"___subnet_hrefs":{"type":"array","items":{"type":"string"}},"___instance_type_href":{"type":"string"},"___resource_type":{"enum":["instance"]},"___ssh_key_href":{"type":"string"},"___datacenter_hrefs":{"type":"array"},"___inputs":{"type":"array","items":{"$ref":"#\/definitions\/input"}},"___security_group_hrefs":{"description":"Can contain either security group hrefs, or a reference to a security group definition which must be created and the resultant href used.","type":"array","items":{"anyOf":[{"type":"string"},{"$ref":"#\/definitions\/security_group_relationship"}]}},"___cloud_href":{"type":"string"},"___server_template":{"$ref":"#\/definitions\/server_template"}},"required":["resource_type","cloud_href","server_template"]}}},"required":["resource_type","array_type","elasticity_params","instance","name"]},"_88input":{"type":"object","properties":{"___name":{"type":"string"},"___resource_type":{"enum":["input"]},"___value":{"pattern":"^(text|key|cred|array|env):.*","type":"string"}},"required":["resource_type","name","value"]},"_88security_group_relationship":{"type":"object","properties":{"___ref":{"enum":["security_group"]},"___id":{"type":"string"}},"required":["id","ref"]},"_88security_group_rule":{"type":"object","properties":{"___ingress_group":{"$eref":{"type":"object","properties":{"___ref":{"enum":["security_group"]},"___id":{"type":"string"}},"required":["id","ref"]}},"___source_type":{"enum":["cidr_ips","group"]},"___resource_type":{"enum":["security_group_rule"]},"___protocol_details":{"type":"object","properties":{"___icmp_code":{"type":"string"},"___icmp_type":{"type":"string"},"___end_port":{"type":"string"},"___start_port":{"type":"string"}}},"___protocol":{"enum":["tcp","udp","icmp"]},"___cidr_ips":{"type":"string"}},"required":["resource_type","protocol","protocol_details","source_type"]}},"properties":{"___name":{"type":"string"},"___version":{"pattern":"^[0-9]+\\.[0-9]+\\.[0-9]+$","description":"An optional DB schema version.  This is a semantic version number and it identifies the version of the object schema as stored in a NoSQL database.","type":"string"},"___resources":{"description":"An array of resources which can be referenced by any other resource.  Resources can also be nested, such as in deployment\/server\/security_group.  If a resource is nested it can not be referenced anywhere else in the schema.  Only resources in this array can be referenced by their type and ID.","type":"array","items":{"anyOf":[{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___server_arrays":{"type":"array","items":{"$ref":"#\/definitions\/server_array"}},"___resource_type":{"enum":["deployment"]},"___servers":{"type":"array","items":{"$ref":"#\/definitions\/server"}},"___server_tag_scope":{"enum":["deployment","account"]},"___inputs":{"type":"array","items":{"$ref":"#\/definitions\/input"}},"___id":{"description":"A unique ID for this deployment within the product.","type":"string"}},"required":["id","resource_type","name","servers"]}},{"$eref":{"type":"object","properties":{"___name":{"type":"string"},"___description":{"type":"string"},"___resource_type":{"enum":["security_group"]},"___security_group_rules":{"type":"array","items":{"$ref":"#\/definitions\/security_group_rule"}},"___id":{"type":"string"},"___cloud_href":{"type":"string"}},"required":["id","resource_type","cloud_href","name"]}}],"type":"object"}}},"required":["name","resources"]}