{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"The types of webhooks supported by SaaSquatch with their corresponding structures.","title":"Webhook Schema","type":"object","properties":{"___live":{"description":"Indicates whether this is a live or test tenant","type":"boolean","title":"Is Live Tenant"},"___tenantAlias":{"description":"The identifier for the tenant that generated this webhook","type":"string","title":"Tenant Alias"},"___type":{"description":"The type of this webhook","type":"string","title":"Webhook Type","enum":["user.created","coupon.created","reward.created","referral.started","referral.converted","export.created","export.completed","user.reward.balance.changed"]},"___created":{"description":"The date this webhook was created","type":"integer","title":"Created"},"___id":{"description":"A unique Id associated with this webhook","type":"string","title":"Webhook Id"}},"required":["id","type","tenantAlias","live","created"],"dependencies":{"type":{"oneOf":[{"properties":{"___type":{"enum":["user.created"]},"___data":{"$eref":{"oneOf":[{"$ref":"UserCreatedClassic.schema.json#"},{"$ref":"UserCreatedClassicDisabled.schema.json#"}],"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever a new user is created in SaaSquatch program where the classic program is enabled.","title":"Classic User Created Webhook Schema","type":"object"}}}},{"properties":{"___type":{"enum":["coupon.created"]},"___data":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent when a new coupon (referral code) is created, often when the user is created or interacts with a newly activated program","additionalProperties":false,"title":"Coupon Created Webhook Schema","type":"object","properties":{"___dateCreated":{"description":"The date this code was created","type":"integer","title":"Date Created"},"___code":{"description":"The code to be shared","type":"string","title":"Code"},"___programId":{"description":"The Id of the program this code was created for","type":["string","null"],"title":"Program Id"}},"required":["code","dateCreated"]}}}},{"properties":{"___type":{"enum":["reward.created"]},"___data":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever a reward is created (when it becomes available, e.g. not pending).","title":"Reward Created Webhook Schema","type":"object","definitions":{"_88rewardRedemption":{"description":"An instance of credit being withdrawn from a reward","additionalProperties":false,"title":"Reward Redemption","type":"object","properties":{"___quantityRedeemed":{"description":"The amount that was withdrawn from this reward","type":"string","title":"Quantity Redeemed"},"___id":{"description":"The unique identifier of this redemption","type":"string","title":"Redemption Id"},"___dateRedeemed":{"description":"The date this redemption was made","type":"integer","title":"Date Redeemed"}},"required":["id","dateRedeemed","quantityRedeemed"]}},"properties":{"___rewardSource":{"description":"The source of this reward (e.g. insight into why this reward was created)","type":"string","title":"Reward Source","enum":["FRIEND_SIGNUP","REFERRED","MANUAL","ACTIVATION","ACQUISITION","RETENTION","REACTIVATION","AUTOMATED"]},"___type":{"type":"string","title":"Reward Type","enum":["PCT_DISCOUNT","FUELTANK","CREDIT","INTEGRATION"]},"___userId":{"description":"The user Id for the user who received this reward","type":"string","title":"User Id"},"___dateScheduledFor":{"description":"The date this reward is scheduled to be given if it starts in a pending state","type":["integer","null"],"title":"Date Scheduled For"},"___cancellable":{"description":"Whether this reward can be cancelled (e.g. rewards that have already been fulfilled externally cannot be cancelled)","type":"boolean","title":"Is Cancellable"},"___dateCreated":{"description":"The date this reward was created","type":"integer","title":"Date Reward Created"},"___dateCancelled":{"description":"The date this reward was cancelled","type":["integer","null"],"title":"Date Cancelled"},"___dateExpires":{"description":"The date this reward will expire","type":["integer","null"],"title":"Date Expires"},"___accountId":{"description":"The account Id for the user who received this reward","type":"string","title":"Account Id"},"___programId":{"description":"The program that issued this reward","type":["string","null"],"title":"Program Id"},"___id":{"description":"The unique identifier associated with this reward","type":"string","title":"Reward Id"},"___dateGiven":{"description":"The date this reward was given (became available for use)","type":["integer","null"],"title":"Date Given"}},"required":["id","type","dateCreated","accountId","userId","cancellable","rewardSource"],"dependencies":{"type":{"oneOf":[{"properties":{"___name":{"description":"The name given to this discount reward (e.g. Referrer Reward)","type":"string","title":"Reward Name"},"___discountPercent":{"description":"The percent discount to be given (e.g. 1-100)","type":"integer","title":"Discount Percent"},"___type":{"enum":["PCT_DISCOUNT"]},"___unit":{"const":"%","description":"The unit of this reward","type":"string","title":"Reward Unit"}}},{"properties":{"___type":{"enum":["FUELTANK"]},"___fuelTankType":{"description":"The type of the redeemable reward associated with the fuel tank code (e.g. is it a discount or credit)","type":"string","title":"Reward Code Type","enum":["PCT_DISCOUNT","CREDIT"]},"___amount":{"description":"The value associated with this reward (e.g. 10% or $100)","type":"integer","title":"Reward Amount"},"___fuelTankCode":{"description":"The code associated with this reward (e.g. used in fulfillment)","type":"string","title":"Reward Code"},"___unit":{"description":"The unit of this reward","type":"string","title":"Reward Unit"}}},{"properties":{"___name":{"description":"The name given to this credit reward (e.g. Referrer Reward)","type":"string","title":"Reward Name"},"___type":{"enum":["CREDIT"]},"___redeemedCredit":{"description":"The amount of credit that has already been redeemed from this reward","type":"integer","title":"Redeemed Credit"},"___assignedCredit":{"description":"The credit assigned to this reward (e.g. amount that can be redeemed)","type":"integer","title":"Assigned Credit"},"___unit":{"description":"The unit of this reward (e.g. USD)","type":"string","title":"Reward Unit"},"___redemptions":{"description":"A record of how credit was redeemed from this reward","type":"array","title":"Reward Redemptions","items":{"$ref":"#\/definitions\/rewardRedemption"}}}},{"properties":{"___name":{"description":"The name of this reward (e.g. Amazon Gift Card)","type":"string","title":"Reward Name"},"___integrationId":{"description":"The identifier for the integration that issued this reward","type":"string","title":"Integration Id"},"___description":{"description":"This describe the reward in more detail","type":"string","title":"Reward Description"},"___type":{"enum":["INTEGRATION"]},"___rewardDetails":{"description":"A map of details about this reward provided by the underlying giftcard provider (e.g. Tango's utid)","type":"object","title":"Reward Details"},"___valueInCents":{"description":"The monetary value of this reward in its fractional unit (e.g. cents)","type":"integer","title":"Reward Value"},"___unit":{"description":"The unit of this reward (e.g. USD)","type":"string","title":"Reward Unit"}}}]}}}}}},{"properties":{"___type":{"enum":["referral.started"]},"___data":{"$eref":{"oneOf":[{"$ref":"ReferralClassic.schema.json#"},{"$ref":"ReferralClassicDisabled.schema.json#"}],"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever a referral event happens","title":"Referral Data Webhook Schema","type":"object"}}}},{"properties":{"___type":{"enum":["referral.converted"]},"___data":{"$eref":{"oneOf":[{"$ref":"ReferralClassic.schema.json#"},{"$ref":"ReferralClassicDisabled.schema.json#"}],"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever a referral event happens","title":"Referral Data Webhook Schema","type":"object"}}}},{"properties":{"___type":{"enum":["export.created"]},"___data":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever a data export activity happens (e.g. export created\/completed)","additionalProperties":false,"title":"Export Webhook Schema","type":"object","properties":{"___status":{"description":"The status of this export (e.g. is it running\/finished?)","type":"string","title":"Status","enum":["PENDING","ABORTED","COMPLETED"]},"___stats":{"description":"Statistics recorded upon completions of the export","additionalProperties":false,"title":"Export Stats","type":["object","null"],"properties":{"___errors":{"description":"The number of errors that occurred while running this export","type":"integer","title":"Errors"},"___recordsProcessed":{"description":"The number of records that were processed to complete this export","type":"integer","title":"Records Processed"}}},"___fileRef":{"description":"A link to an uploaded file, if this export was based on an uploaded file (e.g. a list of redemption)","type":["string","null"],"title":"Uploaded File Reference"},"___outputFormat":{"description":"The format this export will be generated in (e.g. CSV or Excel)","type":"string","title":"Output Format","enum":["XLSX","CSV"]},"___params":{"description":"These parameters are used to filter the export (e.g. by date or program)","type":"object","title":"Export Filters"},"___dateExpires":{"description":"The date this export expires (e.g. when it will no longer be downloadable)","type":["integer","null"],"title":"Date Expires"},"___operation":{"description":"The operation being performed (for exports this is always QUERY)","type":"string","title":"Operation"},"___name":{"description":"The name of this export (e.g. User Details)","type":["string","null"],"title":"Export Name"},"___mailtoEmail":{"description":"The email address that will receive a download link for this export when it completes","type":["string","null"],"title":"Notification Email Address"},"___requester":{"description":"The person or machine that requested this export","type":"string","title":"Requester"},"___dateCreated":{"description":"The date this export was created","type":"integer","title":"Date Created"},"___task":{"description":"The type of export generated","type":"string","title":"Export Type","enum":["USER","REFERRAL","REWARD_BALANCE","USER_REWARD_BALANCE","USER_REFERRAL","REFERRAL_PARTICIPANT","REDEEMABLE_REWARD_BALANCE"]},"___dateCompleted":{"description":"The date this export completed","type":["integer","null"],"title":"Date Completed"},"___id":{"description":"The unique identifier for this export","type":"string","title":"Export Id"}},"required":["id","requester","status","dateCreated","outputFormat","task","operation"]}}}},{"properties":{"___type":{"enum":["export.completed"]},"___data":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever a data export activity happens (e.g. export created\/completed)","additionalProperties":false,"title":"Export Webhook Schema","type":"object","properties":{"___status":{"description":"The status of this export (e.g. is it running\/finished?)","type":"string","title":"Status","enum":["PENDING","ABORTED","COMPLETED"]},"___stats":{"description":"Statistics recorded upon completions of the export","additionalProperties":false,"title":"Export Stats","type":["object","null"],"properties":{"___errors":{"description":"The number of errors that occurred while running this export","type":"integer","title":"Errors"},"___recordsProcessed":{"description":"The number of records that were processed to complete this export","type":"integer","title":"Records Processed"}}},"___fileRef":{"description":"A link to an uploaded file, if this export was based on an uploaded file (e.g. a list of redemption)","type":["string","null"],"title":"Uploaded File Reference"},"___outputFormat":{"description":"The format this export will be generated in (e.g. CSV or Excel)","type":"string","title":"Output Format","enum":["XLSX","CSV"]},"___params":{"description":"These parameters are used to filter the export (e.g. by date or program)","type":"object","title":"Export Filters"},"___dateExpires":{"description":"The date this export expires (e.g. when it will no longer be downloadable)","type":["integer","null"],"title":"Date Expires"},"___operation":{"description":"The operation being performed (for exports this is always QUERY)","type":"string","title":"Operation"},"___name":{"description":"The name of this export (e.g. User Details)","type":["string","null"],"title":"Export Name"},"___mailtoEmail":{"description":"The email address that will receive a download link for this export when it completes","type":["string","null"],"title":"Notification Email Address"},"___requester":{"description":"The person or machine that requested this export","type":"string","title":"Requester"},"___dateCreated":{"description":"The date this export was created","type":"integer","title":"Date Created"},"___task":{"description":"The type of export generated","type":"string","title":"Export Type","enum":["USER","REFERRAL","REWARD_BALANCE","USER_REWARD_BALANCE","USER_REFERRAL","REFERRAL_PARTICIPANT","REDEEMABLE_REWARD_BALANCE"]},"___dateCompleted":{"description":"The date this export completed","type":["integer","null"],"title":"Date Completed"},"___id":{"description":"The unique identifier for this export","type":"string","title":"Export Id"}},"required":["id","requester","status","dateCreated","outputFormat","task","operation"]}}}},{"properties":{"___type":{"enum":["user.reward.balance.changed"]},"___data":{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-06\/schema#","description":"Sent whenever something happens to change this user's available reward balance (e.g. rewards given\/expired\/etc)","title":"User Reward Balance Changed Webhook Schema","type":"object","properties":{"___resourceVersion":{"description":"An integer value reflective of when the balance was generated, the greater the value the more recent the balance","title":"Resource Version","type":"integer"},"___availableValue":{"description":"The reward balance available to be redeemed","title":"Available Reward Balance","type":"integer"},"___userId":{"description":"The user's unique identifier","type":"string","title":"User Id"},"___accountId":{"description":"The user's unique account identifier","type":"string","title":"Account Id"},"___unit":{"description":"The unit corresponding to this reward balance","type":"string","title":"Reward Balance Unit"}}}}}}]}}}