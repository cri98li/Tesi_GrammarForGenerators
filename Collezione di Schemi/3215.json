{"allOf":[{"oneOf":[{"required":["when"]},{"required":["schedule"]}]},{"oneOf":[{"required":["action"]},{"required":["actions"]}]}],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Rule for rules system","title":"Rule","type":"object","definitions":{"_88location":{"description":"Location(s) to search for the object","type":"object","properties":{"___location":{"description":"Location to search for the object","type":"string"},"___locations":{"minItems":1,"uniqueItems":true,"description":"Locations to search for the object","type":"array","items":{"type":"string"}}}},"_88orQuery":{"description":"Or operation","type":"object","properties":{"___or":{"description":"List of queries","type":"array","items":{"oneOf":[{"$eref":{"allOf":[{"properties":{"___pattern":{"description":"Pattern to be matched","type":"object"}},"required":["pattern"]},{"$ref":"#\/definitions\/location"}],"description":"Pattern to be matched","type":"object"}},{"$eref":{"allOf":[{"properties":{"___libraries":{"$ref":"#\/definitions\/libraries"},"___code":{"description":"Javascript code block","type":"string"}},"required":["code"]},{"$ref":"#\/definitions\/location"}],"description":"Code to be executed","type":"object"}},{"$eref":{"description":"Not operation","type":"object","properties":{"___not":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}],"description":"Query block"}},"required":["not"]}},{"$eref":{"description":"And operation","type":"object","properties":{"___and":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["and"]}},{"$eref":{"description":"Or operation","type":"object","properties":{"___or":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["or"]}}]}}},"required":["or"]},"_88patternQuery":{"allOf":[{"properties":{"___pattern":{"description":"Pattern to be matched","type":"object"}},"required":["pattern"]},{"$eref":{"description":"Location(s) to search for the object","type":"object","properties":{"___location":{"description":"Location to search for the object","type":"string"},"___locations":{"minItems":1,"uniqueItems":true,"description":"Locations to search for the object","type":"array","items":{"type":"string"}}}}}],"description":"Pattern to be matched","type":"object"},"_88action":{"allOf":[{"properties":{"___opts":{"description":"Optional data to be sent to the endpoint","type":"object"},"___libraries":{"$eref":{"minItems":1,"uniqueItems":true,"description":"Javascript libraries to use with the code","type":"array","items":{"type":"string"}}},"___code":{"oneOf":[{"type":"string"},{"minItems":1,"type":"array","items":{"type":"string"}},{"type":"object"}],"description":"Code to be executed"},"___endpoint":{"description":"Endpoint to execute the code","type":"string"}},"required":["code"]},{"$eref":{"description":"Location(s) to search for the object","type":"object","properties":{"___location":{"description":"Location to search for the object","type":"string"},"___locations":{"minItems":1,"uniqueItems":true,"description":"Locations to search for the object","type":"array","items":{"type":"string"}}}}}],"description":"Action to be executed","type":"object"},"_88andQuery":{"description":"And operation","type":"object","properties":{"___and":{"description":"List of queries","type":"array","items":{"oneOf":[{"$eref":{"allOf":[{"properties":{"___pattern":{"description":"Pattern to be matched","type":"object"}},"required":["pattern"]},{"$ref":"#\/definitions\/location"}],"description":"Pattern to be matched","type":"object"}},{"$eref":{"allOf":[{"properties":{"___libraries":{"$ref":"#\/definitions\/libraries"},"___code":{"description":"Javascript code block","type":"string"}},"required":["code"]},{"$ref":"#\/definitions\/location"}],"description":"Code to be executed","type":"object"}},{"$eref":{"description":"Not operation","type":"object","properties":{"___not":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}],"description":"Query block"}},"required":["not"]}},{"$eref":{"description":"And operation","type":"object","properties":{"___and":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["and"]}},{"$eref":{"description":"Or operation","type":"object","properties":{"___or":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["or"]}}]}}},"required":["and"]},"_88codeQuery":{"allOf":[{"properties":{"___libraries":{"$eref":{"minItems":1,"uniqueItems":true,"description":"Javascript libraries to use with the code","type":"array","items":{"type":"string"}}},"___code":{"description":"Javascript code block","type":"string"}},"required":["code"]},{"$eref":{"description":"Location(s) to search for the object","type":"object","properties":{"___location":{"description":"Location to search for the object","type":"string"},"___locations":{"minItems":1,"uniqueItems":true,"description":"Locations to search for the object","type":"array","items":{"type":"string"}}}}}],"description":"Code to be executed","type":"object"},"_88notQuery":{"description":"Not operation","type":"object","properties":{"___not":{"oneOf":[{"$eref":{"allOf":[{"properties":{"___pattern":{"description":"Pattern to be matched","type":"object"}},"required":["pattern"]},{"$ref":"#\/definitions\/location"}],"description":"Pattern to be matched","type":"object"}},{"$eref":{"allOf":[{"properties":{"___libraries":{"$ref":"#\/definitions\/libraries"},"___code":{"description":"Javascript code block","type":"string"}},"required":["code"]},{"$ref":"#\/definitions\/location"}],"description":"Code to be executed","type":"object"}},{"$eref":{"description":"Not operation","type":"object","properties":{"___not":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}],"description":"Query block"}},"required":["not"]}},{"$eref":{"description":"And operation","type":"object","properties":{"___and":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["and"]}},{"$eref":{"description":"Or operation","type":"object","properties":{"___or":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["or"]}}],"description":"Query block"}},"required":["not"]},"_88libraries":{"minItems":1,"uniqueItems":true,"description":"Javascript libraries to use with the code","type":"array","items":{"type":"string"}}},"properties":{"___action":{"$eref":{"allOf":[{"properties":{"___opts":{"description":"Optional data to be sent to the endpoint","type":"object"},"___libraries":{"$ref":"#\/definitions\/libraries"},"___code":{"oneOf":[{"type":"string"},{"minItems":1,"type":"array","items":{"type":"string"}},{"type":"object"}],"description":"Code to be executed"},"___endpoint":{"description":"Endpoint to execute the code","type":"string"}},"required":["code"]},{"$ref":"#\/definitions\/location"}],"description":"Action to be executed","type":"object"}},"___when":{"$eref":{"allOf":[{"properties":{"___pattern":{"description":"Pattern to be matched","type":"object"}},"required":["pattern"]},{"$ref":"#\/definitions\/location"}],"description":"Pattern to be matched","type":"object"}},"___actions":{"type":"array","items":{"$eref":{"allOf":[{"properties":{"___opts":{"description":"Optional data to be sent to the endpoint","type":"object"},"___libraries":{"$ref":"#\/definitions\/libraries"},"___code":{"oneOf":[{"type":"string"},{"minItems":1,"type":"array","items":{"type":"string"}},{"type":"object"}],"description":"Code to be executed"},"___endpoint":{"description":"Endpoint to execute the code","type":"string"}},"required":["code"]},{"$ref":"#\/definitions\/location"}],"description":"Action to be executed","type":"object"}}},"___condition":{"oneOf":[{"$eref":{"allOf":[{"properties":{"___pattern":{"description":"Pattern to be matched","type":"object"}},"required":["pattern"]},{"$ref":"#\/definitions\/location"}],"description":"Pattern to be matched","type":"object"}},{"$eref":{"allOf":[{"properties":{"___libraries":{"$ref":"#\/definitions\/libraries"},"___code":{"description":"Javascript code block","type":"string"}},"required":["code"]},{"$ref":"#\/definitions\/location"}],"description":"Code to be executed","type":"object"}},{"$eref":{"description":"Not operation","type":"object","properties":{"___not":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}],"description":"Query block"}},"required":["not"]}},{"$eref":{"description":"And operation","type":"object","properties":{"___and":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["and"]}},{"$eref":{"description":"Or operation","type":"object","properties":{"___or":{"description":"List of queries","type":"array","items":{"oneOf":[{"$ref":"#\/definitions\/patternQuery"},{"$ref":"#\/definitions\/codeQuery"},{"$ref":"#\/definitions\/notQuery"},{"$ref":"#\/definitions\/andQuery"},{"$ref":"#\/definitions\/orQuery"}]}}},"required":["or"]}}],"description":"Conditions to be evaluated"},"___schedule":{"description":"Schedule for the rule","type":"string"}}}