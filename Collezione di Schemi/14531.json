{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","description":"Describes a rule, which consists of zero or more conditions that must be evaluated to true in order to trigger the one or more actions","title":"Rule schema.","type":"object","definitions":{"_88inside-condition":{"description":"Geo-fence: check whether the updated feature, or the feature with ID featureId, is inside the area.","type":"object","properties":{"___polyId":{"description":"ID of the feature that represents the polygon area (geo-fence).","type":"string"},"___featureId":{"description":"ID of the feature that must be checked whether it is inside the area.","type":"string"},"___static":{"description":"When true, the polygon ID represents a static area, resulting in slightly optimized code.","type":"boolean"}},"required":["polyId"]},"_88nearby-condition":{"description":"Check whether the updated feature is near the point.","type":"object","properties":{"___units":{"default":"kilometers","description":"Specifies the unit type in which the distance is measured.","enum":["kilometers","radians","miles","degrees"]},"___locationLatLng":{"minItems":2,"maxItems":2,"description":"Specifies the reference location in latitude and longitude.","type":"array","items":{"type":"number"}},"___distance":{"description":"Distance to the reference location in units","type":"number"},"___static":{"description":"When true, the polygon ID represents a static area, resulting in slightly optimized code.","type":"boolean"},"___locationId":{"description":"ID of the feature that represents the reference point.","type":"string"}},"required":["distance"]},"_88sendImbMessage-action":{"type":"object","properties":{"___topic":{"description":"Channel or topic name.","type":"string"},"___property":{"type":"object","properties":{"___attach":{"oneOf":[{"description":"Attach either the complete feature, its properties or geometry to the message.","enum":["$feature","$properties","$geometry"]},{"description":"Alternatively, you can also provide an attached object.","type":"object"}]},"___message":{"description":"Message to show in the client.","type":"string"}}},"___method":{"description":"Name of the method to execute at the receiver.","type":"string"},"___publisher":{"description":"The publisher type - may be superfluous after renaming the method to sendImbMessage.","type":"string"}}},"_88evaluate-condition":{"description":"Evaluate the properties, e.g. speed > 5. Note that we only support one level of brackets.","type":"string"}},"properties":{"___description":{"description":"Description of the rule's purpose. Solely used for documentation purposes.","id":"description","type":"string","title":"Description schema."},"___recurrence":{"default":-1,"description":"How often may the rule fire. In case the value is -1, fire continuously.","id":"recurrence","title":"Recurrence schema.","type":"integer","minimum":-1},"___activationType":{"default":"Continuously","description":"Determines when the rule should be activated \/ triggered.","enum":["OnEnter","OnExit","OnChange","Continuous","Manual"]},"___actions":{"description":"An array of actions: each action is executed when the rule is triggered.","id":"actions","title":"Actions schema.","type":"array","items":{"description":"A single action","type":"object","properties":{"___property":{"oneOf":[{"$eref":{"type":"object","properties":{"___topic":{"description":"Channel or topic name.","type":"string"},"___property":{"type":"object","properties":{"___attach":{"oneOf":[{"description":"Attach either the complete feature, its properties or geometry to the message.","enum":["$feature","$properties","$geometry"]},{"description":"Alternatively, you can also provide an attached object.","type":"object"}]},"___message":{"description":"Message to show in the client.","type":"string"}}},"___method":{"description":"Name of the method to execute at the receiver.","type":"string"},"___publisher":{"description":"The publisher type - may be superfluous after renaming the method to sendImbMessage.","type":"string"}}}}]},"___method":{"description":"Type of action.","enum":["sendImbMessage"]},"___delayInMSec":{"description":"Delay in milliseconds before triggering the action.","type":"number"}},"required":["method","property"]}},"___activatedAt":{"description":"The time the rule is activated."},"___conditions":{"description":"An array of AND conditions: each condition must be evaluated to true in order to trigger the actions in the rule.","type":"array","title":"Conditions schema.","items":{"description":"A single AND condition","type":"object","properties":{"___property":{"oneOf":[{"$eref":{"description":"Evaluate the properties, e.g. speed > 5. Note that we only support one level of brackets.","type":"string"}},{"$eref":{"description":"Geo-fence: check whether the updated feature, or the feature with ID featureId, is inside the area.","type":"object","properties":{"___polyId":{"description":"ID of the feature that represents the polygon area (geo-fence).","type":"string"},"___featureId":{"description":"ID of the feature that must be checked whether it is inside the area.","type":"string"},"___static":{"description":"When true, the polygon ID represents a static area, resulting in slightly optimized code.","type":"boolean"}},"required":["polyId"]}},{"$eref":{"description":"Check whether the updated feature is near the point.","type":"object","properties":{"___units":{"default":"kilometers","description":"Specifies the unit type in which the distance is measured.","enum":["kilometers","radians","miles","degrees"]},"___locationLatLng":{"minItems":2,"maxItems":2,"description":"Specifies the reference location in latitude and longitude.","type":"array","items":{"type":"number"}},"___distance":{"description":"Distance to the reference location in units","type":"number"},"___static":{"description":"When true, the polygon ID represents a static area, resulting in slightly optimized code.","type":"boolean"},"___locationId":{"description":"ID of the feature that represents the reference point.","type":"string"}},"required":["distance"]}}]},"___method":{"description":"Type of condition.","enum":["evaluate","inside","nearby"]}}}},"___featureId":{"description":"Feature (ID) this rule applies too. If the featureId is specified, the rule is not generic.","type":"string"},"___isGeneric":{"description":"If true, indicates that we are dealing with a rule that is not bound to a specific feature, but applied to all.","type":"boolean"},"___id":{"description":"Unique identifier (name) of the rule.","id":"id","type":"string","title":"Id schema."},"___isActive":{"default":true,"description":"A rule may start active, meaning it will be evaluated every time, or inactive, waiting for activation to occur.","id":"isActive","title":"IsActive schema.","type":"boolean"}},"required":["id","recurrence","isActive","actions"]}