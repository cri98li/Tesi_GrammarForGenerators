{"allOf":[{"$fref":"\/json-schema\/crudCommon.json#\/definitions\/common"}],"copyright":["Copyright 2013 Red Hat, Inc. and\/or its affiliates.","This file is part of lightblue.","This program is free software: you can redistribute it and\/or modify","it under the terms of the GNU General Public License as published by","the Free Software Foundation, either version 3 of the License, or","(at your option) any later version.","This program is distributed in the hope that it will be useful,","but WITHOUT ANY WARRANTY; without even the implied warranty of","MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","GNU General Public License for more details.","You should have received a copy of the GNU General Public License","along with this program.  If not, see <http:\/\/www.gnu.org\/licenses\/>."],"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","additionalProperties":false,"type":"object","definitions":{"_88updateFieldAdd":{"description":"Attribute name is field to modify, value is a $valueof expression.","additionalProperties":true,"type":"object"},"_88updateArrayInsert":{"patternProperties":{"___.*":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"description":"Inserts given values to the field (attribute name).  Values are added to the index as given in the field names,  Doesn't check for uniqueness before adding.","additionalProperties":false,"type":"object"},"_88updateArrayAppend":{"patternProperties":{"___.*":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"description":"Appends given values to the field (attribute name).  Values are added at the end of the array.  Doesn't check for uniqueness before adding.","additionalProperties":false,"type":"object"},"_88updateFieldUnset":{"oneOf":[{"minItems":1,"description":"Name of fields to unset","type":"array","items":[{"type":"string"}]},{"type":"string"}]},"_88updateArrayForEach":{"description":"Iterates over array elements, checking for elements matching a query, and operating on them","additionalProperties":{"$fref":"\/json-schema\/crudCommon.json#\/definitions\/query"},"type":"object","properties":{"___$update":{"oneOf":[{"type":"string"},{"$eref":{"oneOf":[{"additionalProperties":false,"properties":{"___$set":{"$ref":"#\/definitions\/updateFieldSet"}}},{"additionalProperties":false,"properties":{"___$unset":{"$ref":"#\/definitions\/updateFieldUnset"}}},{"additionalProperties":false,"properties":{"___$add":{"$ref":"#\/definitions\/updateFieldAdd"}}},{"additionalProperties":false,"properties":{"___$append":{"$ref":"#\/definitions\/updateArrayAppend"}}},{"additionalProperties":false,"properties":{"___$insert":{"$ref":"#\/definitions\/updateArrayInsert"}}},{"additionalProperties":false,"properties":{"___$foreach":{"$ref":"#\/definitions\/updateArrayForEach"}}}]}},{"type":"array","items":{"$eref":{"oneOf":[{"additionalProperties":false,"properties":{"___$set":{"$ref":"#\/definitions\/updateFieldSet"}}},{"additionalProperties":false,"properties":{"___$unset":{"$ref":"#\/definitions\/updateFieldUnset"}}},{"additionalProperties":false,"properties":{"___$add":{"$ref":"#\/definitions\/updateFieldAdd"}}},{"additionalProperties":false,"properties":{"___$append":{"$ref":"#\/definitions\/updateArrayAppend"}}},{"additionalProperties":false,"properties":{"___$insert":{"$ref":"#\/definitions\/updateArrayInsert"}}},{"additionalProperties":false,"properties":{"___$foreach":{"$ref":"#\/definitions\/updateArrayForEach"}}}]}}}]}}},"_88updateFieldSet":{"description":"Attribute name is field to set, value is the new value to assign.","additionalProperties":true,"type":"object"},"_88updateChoice":{"oneOf":[{"additionalProperties":false,"properties":{"___$set":{"$eref":{"description":"Attribute name is field to set, value is the new value to assign.","additionalProperties":true,"type":"object"}}}},{"additionalProperties":false,"properties":{"___$unset":{"$eref":{"oneOf":[{"minItems":1,"description":"Name of fields to unset","type":"array","items":[{"type":"string"}]},{"type":"string"}]}}}},{"additionalProperties":false,"properties":{"___$add":{"$eref":{"description":"Attribute name is field to modify, value is a $valueof expression.","additionalProperties":true,"type":"object"}}}},{"additionalProperties":false,"properties":{"___$append":{"$eref":{"patternProperties":{"___.*":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"description":"Appends given values to the field (attribute name).  Values are added at the end of the array.  Doesn't check for uniqueness before adding.","additionalProperties":false,"type":"object"}}}},{"additionalProperties":false,"properties":{"___$insert":{"$eref":{"patternProperties":{"___.*":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},"description":"Inserts given values to the field (attribute name).  Values are added to the index as given in the field names,  Doesn't check for uniqueness before adding.","additionalProperties":false,"type":"object"}}}},{"additionalProperties":false,"properties":{"___$foreach":{"$eref":{"description":"Iterates over array elements, checking for elements matching a query, and operating on them","additionalProperties":{"$ref":"\/json-schema\/crudCommon.json#\/definitions\/query"},"type":"object","properties":{"___$update":{"oneOf":[{"type":"string"},{"$ref":"#\/definitions\/updateChoice"},{"type":"array","items":{"$ref":"#\/definitions\/updateChoice"}}]}}}}}}]}},"properties":{"___projection":{},"___query":{"description":"Query expression that identifies docs to update","$fref":"\/json-schema\/crudCommon.json#\/definitions\/query"},"___version":{},"___objectType":{},"___execution":{},"___update":{"oneOf":[{"$eref":{"oneOf":[{"additionalProperties":false,"properties":{"___$set":{"$ref":"#\/definitions\/updateFieldSet"}}},{"additionalProperties":false,"properties":{"___$unset":{"$ref":"#\/definitions\/updateFieldUnset"}}},{"additionalProperties":false,"properties":{"___$add":{"$ref":"#\/definitions\/updateFieldAdd"}}},{"additionalProperties":false,"properties":{"___$append":{"$ref":"#\/definitions\/updateArrayAppend"}}},{"additionalProperties":false,"properties":{"___$insert":{"$ref":"#\/definitions\/updateArrayInsert"}}},{"additionalProperties":false,"properties":{"___$foreach":{"$ref":"#\/definitions\/updateArrayForEach"}}}]}},{"type":"array","items":{"$eref":{"oneOf":[{"additionalProperties":false,"properties":{"___$set":{"$ref":"#\/definitions\/updateFieldSet"}}},{"additionalProperties":false,"properties":{"___$unset":{"$ref":"#\/definitions\/updateFieldUnset"}}},{"additionalProperties":false,"properties":{"___$add":{"$ref":"#\/definitions\/updateFieldAdd"}}},{"additionalProperties":false,"properties":{"___$append":{"$ref":"#\/definitions\/updateArrayAppend"}}},{"additionalProperties":false,"properties":{"___$insert":{"$ref":"#\/definitions\/updateArrayInsert"}}},{"additionalProperties":false,"properties":{"___$foreach":{"$ref":"#\/definitions\/updateArrayForEach"}}}]}}}]},"___client":{}},"required":["query","update"]}