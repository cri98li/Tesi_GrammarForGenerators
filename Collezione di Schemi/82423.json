{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/schemas.triniti.io\/json-schema\/triniti\/curator\/mixin\/render-promotion-request\/1-0-0.json#","additionalProperties":true,"type":"object","definitions":{"_88cloud":{"anyOf":[{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/schemas.triniti.io\/json-schema\/gdbots\/contexts\/cloud\/1-0-0.json#","additionalProperties":false,"type":"object","properties":{"___instance_type":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"},"____schema":{"default":"pbj:gdbots:contexts::cloud:1-0-0","pattern":"^pbj:([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+):([0-9]+-[0-9]+-[0-9]+)$","type":"string"},"___provider":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"type":"string","maxLength":20},"___instance_id":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"},"___zone":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"type":"string","maxLength":20},"___region":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"type":"string","maxLength":20}},"required":["_schema"]}}],"type":"object"},"_88render-context":{"anyOf":[{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/schemas.triniti.io\/json-schema\/triniti\/common\/render-context\/1-0-0.json#","additionalProperties":false,"type":"object","properties":{"___section":{"pattern":"^[\\w-]+$","description":"Refers to the location on the screen or application that the rendering is happening in, e.g. \"article-detail\", \"blogroll\", \"modal\", \"jumbotron\". Renderers can use this to customize the output.","pbj":{"rule":"single","type":"string"},"type":"string"},"____schema":{"default":"pbj:triniti:common::render-context:1-0-0","pattern":"^pbj:([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+):([0-9]+-[0-9]+-[0-9]+)$","type":"string"},"___trinaries":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"default":0,"maximum":2,"type":"integer","minimum":0}},"pbj":{"rule":"map","type":"trinary"},"additionalProperties":false,"type":"object"},"___viewer_country":{"pattern":"^[A-Z]{2}$","pbj":{"rule":"single","type":"string"},"type":"string"},"___device_view":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"type":"string","maxLength":255},"___floats":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"default":0,"type":"number"}},"pbj":{"rule":"map","type":"float"},"additionalProperties":false,"type":"object"},"___container":{"description":"A message (e.g. article) where the rendering is taking place. This is used by some renderers when it needs data from the container or to generate urls.","pbj":{"rule":"single","type":"message"},"type":"object"},"___strings":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"minLength":0,"type":"string","maxLength":255}},"pbj":{"rule":"map","type":"string"},"additionalProperties":false,"type":"object"},"___platform":{"default":"web","minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"description":"The platform the rendering is happening in, e.g. web, amp, apple-news, facebook-instant-articles.","type":"string","maxLength":255},"___promotion_slot":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"description":"The promotion_slot the rendering is happening in, e.g. desktop-home-sidebar or smartphone-global-html-head.","type":"string","maxLength":255},"___cache_expiry":{"default":300,"pbj":{"rule":"single","type":"medium-int"},"description":"Number of seconds the rendered output can be cached, if the cache_enabled field is true. Zero means cache indefinitely.","maximum":16777215,"type":"integer","minimum":0},"___cache_enabled":{"default":true,"pbj":{"rule":"single","type":"boolean"},"type":"boolean"},"___ints":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"default":0,"maximum":4294967295,"type":"integer","minimum":0}},"pbj":{"rule":"map","type":"int"},"additionalProperties":false,"type":"object"},"___booleans":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"type":"boolean"}},"pbj":{"rule":"map","type":"boolean"},"additionalProperties":false,"type":"object"}},"required":["_schema"]}},{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/schemas.triniti.io\/json-schema\/triniti\/common\/render-context\/1-0-1.json#","additionalProperties":false,"type":"object","properties":{"___section":{"pattern":"^[\\w-]+$","description":"Refers to the location on the screen or application that the rendering is happening in, e.g. \"article-detail\", \"blogroll\", \"modal\", \"jumbotron\". Renderers can use this to customize the output.","pbj":{"rule":"single","type":"string"},"type":"string"},"____schema":{"default":"pbj:triniti:common::render-context:1-0-1","pattern":"^pbj:([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+):([0-9]+-[0-9]+-[0-9]+)$","type":"string"},"___trinaries":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"default":0,"maximum":2,"type":"integer","minimum":0}},"pbj":{"rule":"map","type":"trinary"},"additionalProperties":false,"type":"object"},"___viewer_country":{"pattern":"^[A-Z]{2}$","pbj":{"rule":"single","type":"string"},"type":"string"},"___device_view":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"type":"string","maxLength":255},"___floats":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"default":0,"type":"number"}},"pbj":{"rule":"map","type":"float"},"additionalProperties":false,"type":"object"},"___container":{"description":"A message (e.g. article) where the rendering is taking place. This is used by some renderers when it needs data from the container or to generate urls.","pbj":{"rule":"single","type":"message"},"type":"object"},"___strings":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"minLength":0,"type":"string","maxLength":255}},"pbj":{"rule":"map","type":"string"},"additionalProperties":false,"type":"object"},"___format":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"description":"The format to be used for rendering, e.g. \"html\" or \"json\".","type":"string","maxLength":255},"___platform":{"default":"web","minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"description":"The platform the rendering is happening in, e.g. web, amp, apple-news, facebook-instant-articles.","type":"string","maxLength":255},"___promotion_slot":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"description":"The promotion_slot the rendering is happening in, e.g. desktop-home-sidebar or smartphone-global-html-head.","type":"string","maxLength":255},"___cache_expiry":{"default":300,"pbj":{"rule":"single","type":"medium-int"},"description":"Number of seconds the rendered output can be cached, if the cache_enabled field is true. Zero means cache indefinitely.","maximum":16777215,"type":"integer","minimum":0},"___cache_enabled":{"default":true,"pbj":{"rule":"single","type":"boolean"},"type":"boolean"},"___ints":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"default":0,"maximum":4294967295,"type":"integer","minimum":0}},"pbj":{"rule":"map","type":"int"},"additionalProperties":false,"type":"object"},"___booleans":{"patternProperties":{"___^[a-zA-Z_]{1}[\\w\\.:-]+$":{"type":"boolean"}},"pbj":{"rule":"map","type":"boolean"},"additionalProperties":false,"type":"object"}},"required":["_schema"]}}],"type":"object"},"_88app":{"anyOf":[{"$eref":{"$schema":"http:\/\/json-schema.org\/draft-04\/schema#","id":"http:\/\/schemas.triniti.io\/json-schema\/gdbots\/contexts\/app\/1-0-0.json#","additionalProperties":false,"type":"object","properties":{"___name":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"},"___version":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"},"___vendor":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"},"___variant":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"},"____schema":{"default":"pbj:gdbots:contexts::app:1-0-0","pattern":"^pbj:([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+):([0-9]+-[0-9]+-[0-9]+)$","type":"string"},"____id":{"pattern":"^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$","pbj":{"useTypeDefault":false,"rule":"single","type":"uuid"},"type":"string"},"___build":{"pattern":"^[\\w\\.-]+$","pbj":{"rule":"single","type":"string"},"type":"string"}},"required":["_schema"]}}],"type":"object"}},"properties":{"___slot":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","pbj":{"format":"slug","rule":"single","type":"string"},"description":"The name of the slot to use for finding the promotion to render. If promotion_ref is supplied this should be ignored.","type":"string","maxLength":255},"___ctx_causator_ref":{"pbj":{"rule":"single","type":"message-ref"},"additionalProperties":false,"type":"object","properties":{"___curie":{"minLength":0,"pattern":"^([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+)$","type":"string","maxLength":146},"___id":{"minLength":0,"pattern":"^[A-Za-z0-9:_\\-]+$","type":"string","maxLength":255},"___tag":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","type":"string","maxLength":255}},"required":["curie","id"]},"___ctx_retries":{"default":0,"pbj":{"rule":"single","type":"tiny-int"},"description":"The \"ctx_retries\" field is used to keep track of how many attempts were made to handle this request. In some cases, the service or transport that handles the request may be down or over capacity and is being retried.","maximum":255,"type":"integer","minimum":0},"___ctx_ipv6":{"format":"ipv6","pbj":{"format":"ipv6","overridable":true,"rule":"single","type":"string"},"type":"string"},"___ctx_cloud":{"description":"The \"ctx_cloud\" is set by the server making the request and is generally only used internally for tracking and performance monitoring.","anyOf":[{"$eref":{"anyOf":[{"$ref":"http:\/\/schemas.triniti.io\/json-schema\/gdbots\/contexts\/cloud\/1-0-0.json#"}],"type":"object"}}],"pbj":{"rule":"single","type":"message"},"type":"object"},"___request_id":{"pattern":"^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$","pbj":{"rule":"single","type":"uuid"},"type":"string"},"___ctx_correlator_ref":{"pbj":{"rule":"single","type":"message-ref"},"additionalProperties":false,"type":"object","properties":{"___curie":{"minLength":0,"pattern":"^([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+)$","type":"string","maxLength":146},"___id":{"minLength":0,"pattern":"^[A-Za-z0-9:_\\-]+$","type":"string","maxLength":255},"___tag":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","type":"string","maxLength":255}},"required":["curie","id"]},"___ctx_ua":{"minLength":0,"pbj":{"overridable":true,"rule":"single","type":"text"},"type":"string","maxLength":65535},"___derefs":{"uniqueItems":true,"pbj":{"rule":"set","type":"string"},"description":"Field names to dereference, this serves as a hint to the server and is not necessarily gauranteed since authorization, availability, etc. are determined by the server not the client.","additionalProperties":false,"type":"array","items":[{"pattern":"^[\\w\\.-]+$","type":"string"}]},"___render_at":{"format":"date-time","description":"Used to preview a time other than now of what a promotion slot will render. This is primarily for CMS preview or unit testing.","pbj":{"rule":"single","type":"date-time"},"type":"string"},"___ctx_ip":{"format":"ipv4","pbj":{"format":"ipv4","overridable":true,"rule":"single","type":"string"},"type":"string"},"___ctx_app":{"description":"The \"ctx_app\" refers to the application used to make the request. This is different from ctx_ua (user_agent) because the agent used (Safari, Firefox) is not necessarily the app used (cms, iOS app, website)","anyOf":[{"$eref":{"anyOf":[{"$ref":"http:\/\/schemas.triniti.io\/json-schema\/gdbots\/contexts\/app\/1-0-0.json#"}],"type":"object"}}],"pbj":{"rule":"single","type":"message"},"type":"object"},"___ctx_user_ref":{"pbj":{"rule":"single","type":"message-ref"},"additionalProperties":false,"type":"object","properties":{"___curie":{"minLength":0,"pattern":"^([a-z0-9-]+):([a-z0-9\\.-]+):([a-z0-9-]+)?:([a-z0-9-]+)$","type":"string","maxLength":146},"___id":{"minLength":0,"pattern":"^[A-Za-z0-9:_\\-]+$","type":"string","maxLength":255},"___tag":{"minLength":0,"pattern":"^([\\w\\\/-]|[\\w-][\\w\\\/-]*[\\w-])$","type":"string","maxLength":255}},"required":["curie","id"]},"___promotion_ref":{"pattern":"^[\\w\\\/\\.:-]+$","pbj":{"rule":"single","type":"identifier"},"type":"string"},"___occurred_at":{"pattern":"^[1-9]{1}[0-9]{12,15}$","pbj":{"rule":"single","type":"microtime"},"type":"string"},"___context":{"anyOf":[{"$eref":{"anyOf":[{"$ref":"http:\/\/schemas.triniti.io\/json-schema\/triniti\/common\/render-context\/1-0-0.json#"},{"$ref":"http:\/\/schemas.triniti.io\/json-schema\/triniti\/common\/render-context\/1-0-1.json#"}],"type":"object"}}],"pbj":{"rule":"single","type":"message"},"type":"object"}},"required":["request_id"]}